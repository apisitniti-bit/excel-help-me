"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/nuqs";
exports.ids = ["vendor-chunks/nuqs"];
exports.modules = {

/***/ "(ssr)/./node_modules/nuqs/dist/adapters/next/app.js":
/*!*****************************************************!*\
  !*** ./node_modules/nuqs/dist/adapters/next/app.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NuqsAdapter: () => (/* binding */ NuqsAdapter)\n/* harmony export */ });\n/* harmony import */ var _context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../context-DRdo5A2P.js */ \"(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js\");\n/* harmony import */ var _impl_app_Q6Qchelg_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl.app-Q6Qchelg.js */ \"(ssr)/./node_modules/nuqs/dist/impl.app-Q6Qchelg.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* __next_internal_client_entry_do_not_use__ NuqsAdapter auto */ \n\n\n\n\n\n//#region src/adapters/next/app.ts\nconst Provider = (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.n)(_impl_app_Q6Qchelg_js__WEBPACK_IMPORTED_MODULE_2__.n);\nfunction NuqsAdapter({ children, ...adapterProps }) {\n    return /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Provider, {\n        ...adapterProps,\n        children: [\n            /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, {\n                key: \"nuqs-adapter-suspense-navspy\",\n                children: /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_impl_app_Q6Qchelg_js__WEBPACK_IMPORTED_MODULE_2__.t)\n            }),\n            children\n        ]\n    });\n}\n//#endregion\n //# sourceMappingURL=app.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L2FkYXB0ZXJzL25leHQvYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBU0EsTUFBTUEsV0FBV0MsdURBQXFCQSxDQUFDQyxvREFBMkJBO0FBRWxFLFNBQWdCQyxZQUFZLEVBQzFCQyxRQUFBLEVBQ0EsR0FBR0MsY0FBQTtJQUlILHFCQUFPQyxvREFBYUEsQ0FBQ04sVUFBVTtRQUM3QixHQUFHSyxZQUFBO1FBQ0hELFVBQVU7MEJBQ1JFLG9EQUFhQSxDQUFDQywyQ0FBUUEsRUFBRTtnQkFDdEJDLEtBQUs7Z0JBQ0xKLHdCQUFVRSxvREFBYUEsQ0FBQ0csb0RBQWFBOztZQUV2Q0w7U0FDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Y2VsLWhlbHAtbWUvLi4vLi4vLi4vc3JjL2FkYXB0ZXJzL25leHQvYXBwLnRzPzJmMmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlRWxlbWVudCxcbiAgU3VzcGVuc2UsXG4gIHR5cGUgUmVhY3RFbGVtZW50LFxuICB0eXBlIFJlYWN0Tm9kZVxufSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGNyZWF0ZUFkYXB0ZXJQcm92aWRlciwgdHlwZSBBZGFwdGVyUHJvcHMgfSBmcm9tICcuLi9saWIvY29udGV4dCdcbmltcG9ydCB7IE5hdmlnYXRpb25TcHksIHVzZU51cXNOZXh0QXBwUm91dGVyQWRhcHRlciB9IGZyb20gJy4vaW1wbC5hcHAnXG5cbmNvbnN0IFByb3ZpZGVyID0gY3JlYXRlQWRhcHRlclByb3ZpZGVyKHVzZU51cXNOZXh0QXBwUm91dGVyQWRhcHRlcilcblxuZXhwb3J0IGZ1bmN0aW9uIE51cXNBZGFwdGVyKHtcbiAgY2hpbGRyZW4sXG4gIC4uLmFkYXB0ZXJQcm9wc1xufTogQWRhcHRlclByb3BzICYge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlXG59KTogUmVhY3RFbGVtZW50IHtcbiAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoUHJvdmlkZXIsIHtcbiAgICAuLi5hZGFwdGVyUHJvcHMsXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIGNyZWF0ZUVsZW1lbnQoU3VzcGVuc2UsIHtcbiAgICAgICAga2V5OiAnbnVxcy1hZGFwdGVyLXN1c3BlbnNlLW5hdnNweScsXG4gICAgICAgIGNoaWxkcmVuOiBjcmVhdGVFbGVtZW50KE5hdmlnYXRpb25TcHkpXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuXG4gICAgXVxuICB9KVxufVxuIl0sIm5hbWVzIjpbIlByb3ZpZGVyIiwiY3JlYXRlQWRhcHRlclByb3ZpZGVyIiwidXNlTnVxc05leHRBcHBSb3V0ZXJBZGFwdGVyIiwiTnVxc0FkYXB0ZXIiLCJjaGlsZHJlbiIsImFkYXB0ZXJQcm9wcyIsImNyZWF0ZUVsZW1lbnQiLCJTdXNwZW5zZSIsImtleSIsIk5hdmlnYXRpb25TcHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/adapters/next/app.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nuqs/dist/compare-Br3z3FUS.js":
/*!****************************************************!*\
  !*** ./node_modules/nuqs/dist/compare-Br3z3FUS.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   t: () => (/* binding */ compareQuery)\n/* harmony export */ });\n//#region src/lib/compare.ts\nfunction compareQuery(a, b) {\n\tif (a === b) return true;\n\tif (a === null || b === null) return false;\n\tif (typeof a === \"string\" || typeof b === \"string\") return false;\n\tif (a.length !== b.length) return false;\n\treturn a.every((value, index) => value === b[index]);\n}\n\n//#endregion\n\n//# sourceMappingURL=compare-Br3z3FUS.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L2NvbXBhcmUtQnIzejNGVVMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGNlbC1oZWxwLW1lLy4vbm9kZV9tb2R1bGVzL251cXMvZGlzdC9jb21wYXJlLUJyM3ozRlVTLmpzP2QyOTciXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9saWIvY29tcGFyZS50c1xuZnVuY3Rpb24gY29tcGFyZVF1ZXJ5KGEsIGIpIHtcblx0aWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuXHRpZiAoYSA9PT0gbnVsbCB8fCBiID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgYiA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGZhbHNlO1xuXHRpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiBhLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSBiW2luZGV4XSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29tcGFyZVF1ZXJ5IGFzIHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbXBhcmUtQnIzejNGVVMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/compare-Br3z3FUS.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js":
/*!****************************************************!*\
  !*** ./node_modules/nuqs/dist/context-DRdo5A2P.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ useAdapterProcessUrlSearchParams),\n/* harmony export */   c: () => (/* binding */ debug),\n/* harmony export */   i: () => (/* binding */ useAdapterDefaultOptions),\n/* harmony export */   l: () => (/* binding */ warn),\n/* harmony export */   n: () => (/* binding */ createAdapterProvider),\n/* harmony export */   o: () => (/* binding */ renderQueryString),\n/* harmony export */   r: () => (/* binding */ useAdapter),\n/* harmony export */   s: () => (/* binding */ error),\n/* harmony export */   t: () => (/* binding */ context)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n//#region src/lib/debug.ts\nconst debugEnabled = isDebugEnabled();\nfunction debug(message, ...args) {\n\tif (!debugEnabled) return;\n\tconst msg = sprintf(message, ...args);\n\tperformance.mark(msg);\n\ttry {\n\t\tconsole.log(message, ...args);\n\t} catch {\n\t\tconsole.log(msg);\n\t}\n}\nfunction warn(message, ...args) {\n\tif (!debugEnabled) return;\n\tconsole.warn(message, ...args);\n}\nfunction sprintf(base, ...args) {\n\treturn base.replace(/%[sfdO]/g, (match) => {\n\t\tconst arg = args.shift();\n\t\treturn match === \"%O\" && arg ? JSON.stringify(arg).replace(/\"([^\"]+)\":/g, \"$1:\") : String(arg);\n\t});\n}\nfunction isDebugEnabled() {\n\ttry {\n\t\tconst test = \"nuqs-localStorage-test\";\n\t\tif (typeof localStorage === \"undefined\") return false;\n\t\tlocalStorage.setItem(test, test);\n\t\tconst isStorageAvailable = localStorage.getItem(test) === test;\n\t\tlocalStorage.removeItem(test);\n\t\treturn isStorageAvailable && (localStorage.getItem(\"debug\") || \"\").includes(\"nuqs\");\n\t} catch {\n\t\treturn false;\n\t}\n}\n\n//#endregion\n//#region src/lib/errors.ts\nconst errors = {\n\t303: \"Multiple adapter contexts detected. This might happen in monorepos.\",\n\t404: \"nuqs requires an adapter to work with your framework.\",\n\t409: \"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.\",\n\t414: \"Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.\",\n\t422: \"Invalid options combination: `limitUrlUpdates: debounce` should be used in SSR scenarios, with `shallow: false`\",\n\t429: \"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O\",\n\t500: \"Empty search params cache. Search params can't be accessed in Layouts.\",\n\t501: \"Search params cache already populated. Have you called `parse` twice?\"\n};\nfunction error(code) {\n\treturn `[nuqs] ${errors[code]}\n  See https://nuqs.dev/NUQS-${code}`;\n}\n\n//#endregion\n//#region src/lib/url-encoding.ts\nfunction renderQueryString(search) {\n\tif (search.size === 0) return \"\";\n\tconst query = [];\n\tfor (const [key, value] of search.entries()) {\n\t\tconst safeKey = key.replace(/#/g, \"%23\").replace(/&/g, \"%26\").replace(/\\+/g, \"%2B\").replace(/=/g, \"%3D\").replace(/\\?/g, \"%3F\");\n\t\tquery.push(`${safeKey}=${encodeQueryValue(value)}`);\n\t}\n\tconst queryString = \"?\" + query.join(\"&\");\n\twarnIfURLIsTooLong(queryString);\n\treturn queryString;\n}\nfunction encodeQueryValue(input) {\n\treturn input.replace(/%/g, \"%25\").replace(/\\+/g, \"%2B\").replace(/ /g, \"+\").replace(/#/g, \"%23\").replace(/&/g, \"%26\").replace(/\"/g, \"%22\").replace(/'/g, \"%27\").replace(/`/g, \"%60\").replace(/</g, \"%3C\").replace(/>/g, \"%3E\").replace(/[\\x00-\\x1F]/g, (char) => encodeURIComponent(char));\n}\nconst URL_MAX_LENGTH = 2e3;\nfunction warnIfURLIsTooLong(queryString) {\n\tif (false) {}\n\tif (typeof location === \"undefined\") return;\n\tconst url = new URL(location.href);\n\turl.search = queryString;\n\tif (url.href.length > URL_MAX_LENGTH) console.warn(error(414));\n}\n\n//#endregion\n//#region src/adapters/lib/context.ts\nconst context = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({ useAdapter() {\n\tthrow new Error(error(404));\n} });\ncontext.displayName = \"NuqsAdapterContext\";\nif (debugEnabled && typeof window !== \"undefined\") {\n\tif (window.__NuqsAdapterContext && window.__NuqsAdapterContext !== context) console.error(error(303));\n\twindow.__NuqsAdapterContext = context;\n}\n/**\n* Create a custom adapter (context provider) for nuqs to work with your framework / router.\n*\n* Adapters are based on React Context,\n*\n* @param useAdapter\n* @returns\n*/\nfunction createAdapterProvider(useAdapter$1) {\n\treturn ({ children, defaultOptions, processUrlSearchParams,...props }) => (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(context.Provider, {\n\t\t...props,\n\t\tvalue: {\n\t\t\tuseAdapter: useAdapter$1,\n\t\t\tdefaultOptions,\n\t\t\tprocessUrlSearchParams\n\t\t}\n\t}, children);\n}\nfunction useAdapter(watchKeys) {\n\tconst value = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(context);\n\tif (!(\"useAdapter\" in value)) throw new Error(error(404));\n\treturn value.useAdapter(watchKeys);\n}\nconst useAdapterDefaultOptions = () => (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(context).defaultOptions;\nconst useAdapterProcessUrlSearchParams = () => (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(context).processUrlSearchParams;\n\n//#endregion\n\n//# sourceMappingURL=context-DRdo5A2P.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L2NvbnRleHQtRFJkbzVBMlAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFpRTs7QUFFakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsOEJBQThCLEtBQUs7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUSxHQUFHLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssS0FBcUMsRUFBRSxFQUFPO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixvREFBYSxHQUFHO0FBQ2hDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJEQUEyRCxLQUFLLG9EQUFhO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsZUFBZSxpREFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsaURBQVU7QUFDakQsK0NBQStDLGlEQUFVOztBQUV6RDtBQUNzTTtBQUN0TSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Y2VsLWhlbHAtbWUvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L2NvbnRleHQtRFJkbzVBMlAuanM/YjQ0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCBjcmVhdGVFbGVtZW50LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvbGliL2RlYnVnLnRzXG5jb25zdCBkZWJ1Z0VuYWJsZWQgPSBpc0RlYnVnRW5hYmxlZCgpO1xuZnVuY3Rpb24gZGVidWcobWVzc2FnZSwgLi4uYXJncykge1xuXHRpZiAoIWRlYnVnRW5hYmxlZCkgcmV0dXJuO1xuXHRjb25zdCBtc2cgPSBzcHJpbnRmKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuXHRwZXJmb3JtYW5jZS5tYXJrKG1zZyk7XG5cdHRyeSB7XG5cdFx0Y29uc29sZS5sb2cobWVzc2FnZSwgLi4uYXJncyk7XG5cdH0gY2F0Y2gge1xuXHRcdGNvbnNvbGUubG9nKG1zZyk7XG5cdH1cbn1cbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgLi4uYXJncykge1xuXHRpZiAoIWRlYnVnRW5hYmxlZCkgcmV0dXJuO1xuXHRjb25zb2xlLndhcm4obWVzc2FnZSwgLi4uYXJncyk7XG59XG5mdW5jdGlvbiBzcHJpbnRmKGJhc2UsIC4uLmFyZ3MpIHtcblx0cmV0dXJuIGJhc2UucmVwbGFjZSgvJVtzZmRPXS9nLCAobWF0Y2gpID0+IHtcblx0XHRjb25zdCBhcmcgPSBhcmdzLnNoaWZ0KCk7XG5cdFx0cmV0dXJuIG1hdGNoID09PSBcIiVPXCIgJiYgYXJnID8gSlNPTi5zdHJpbmdpZnkoYXJnKS5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpIDogU3RyaW5nKGFyZyk7XG5cdH0pO1xufVxuZnVuY3Rpb24gaXNEZWJ1Z0VuYWJsZWQoKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgdGVzdCA9IFwibnVxcy1sb2NhbFN0b3JhZ2UtdGVzdFwiO1xuXHRcdGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZmFsc2U7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdCwgdGVzdCk7XG5cdFx0Y29uc3QgaXNTdG9yYWdlQXZhaWxhYmxlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGVzdCkgPT09IHRlc3Q7XG5cdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdCk7XG5cdFx0cmV0dXJuIGlzU3RvcmFnZUF2YWlsYWJsZSAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJkZWJ1Z1wiKSB8fCBcIlwiKS5pbmNsdWRlcyhcIm51cXNcIik7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvbGliL2Vycm9ycy50c1xuY29uc3QgZXJyb3JzID0ge1xuXHQzMDM6IFwiTXVsdGlwbGUgYWRhcHRlciBjb250ZXh0cyBkZXRlY3RlZC4gVGhpcyBtaWdodCBoYXBwZW4gaW4gbW9ub3JlcG9zLlwiLFxuXHQ0MDQ6IFwibnVxcyByZXF1aXJlcyBhbiBhZGFwdGVyIHRvIHdvcmsgd2l0aCB5b3VyIGZyYW1ld29yay5cIixcblx0NDA5OiBcIk11bHRpcGxlIHZlcnNpb25zIG9mIHRoZSBsaWJyYXJ5IGFyZSBsb2FkZWQuIFRoaXMgbWF5IGxlYWQgdG8gdW5leHBlY3RlZCBiZWhhdmlvci4gQ3VycmVudGx5IHVzaW5nIGAlc2AsIGJ1dCBgJXNgICh2aWEgdGhlICVzIGFkYXB0ZXIpIHdhcyBhYm91dCB0byBsb2FkIG9uIHRvcC5cIixcblx0NDE0OiBcIk1heCBzYWZlIFVSTCBsZW5ndGggZXhjZWVkZWQuIFNvbWUgYnJvd3NlcnMgbWF5IG5vdCBiZSBhYmxlIHRvIGFjY2VwdCB0aGlzIFVSTC4gQ29uc2lkZXIgbGltaXRpbmcgdGhlIGFtb3VudCBvZiBzdGF0ZSBzdG9yZWQgaW4gdGhlIFVSTC5cIixcblx0NDIyOiBcIkludmFsaWQgb3B0aW9ucyBjb21iaW5hdGlvbjogYGxpbWl0VXJsVXBkYXRlczogZGVib3VuY2VgIHNob3VsZCBiZSB1c2VkIGluIFNTUiBzY2VuYXJpb3MsIHdpdGggYHNoYWxsb3c6IGZhbHNlYFwiLFxuXHQ0Mjk6IFwiVVJMIHVwZGF0ZSByYXRlLWxpbWl0ZWQgYnkgdGhlIGJyb3dzZXIuIENvbnNpZGVyIGluY3JlYXNpbmcgYHRocm90dGxlTXNgIGZvciBrZXkocykgYCVzYC4gJU9cIixcblx0NTAwOiBcIkVtcHR5IHNlYXJjaCBwYXJhbXMgY2FjaGUuIFNlYXJjaCBwYXJhbXMgY2FuJ3QgYmUgYWNjZXNzZWQgaW4gTGF5b3V0cy5cIixcblx0NTAxOiBcIlNlYXJjaCBwYXJhbXMgY2FjaGUgYWxyZWFkeSBwb3B1bGF0ZWQuIEhhdmUgeW91IGNhbGxlZCBgcGFyc2VgIHR3aWNlP1wiXG59O1xuZnVuY3Rpb24gZXJyb3IoY29kZSkge1xuXHRyZXR1cm4gYFtudXFzXSAke2Vycm9yc1tjb2RlXX1cbiAgU2VlIGh0dHBzOi8vbnVxcy5kZXYvTlVRUy0ke2NvZGV9YDtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2xpYi91cmwtZW5jb2RpbmcudHNcbmZ1bmN0aW9uIHJlbmRlclF1ZXJ5U3RyaW5nKHNlYXJjaCkge1xuXHRpZiAoc2VhcmNoLnNpemUgPT09IDApIHJldHVybiBcIlwiO1xuXHRjb25zdCBxdWVyeSA9IFtdO1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBzZWFyY2guZW50cmllcygpKSB7XG5cdFx0Y29uc3Qgc2FmZUtleSA9IGtleS5yZXBsYWNlKC8jL2csIFwiJTIzXCIpLnJlcGxhY2UoLyYvZywgXCIlMjZcIikucmVwbGFjZSgvXFwrL2csIFwiJTJCXCIpLnJlcGxhY2UoLz0vZywgXCIlM0RcIikucmVwbGFjZSgvXFw/L2csIFwiJTNGXCIpO1xuXHRcdHF1ZXJ5LnB1c2goYCR7c2FmZUtleX09JHtlbmNvZGVRdWVyeVZhbHVlKHZhbHVlKX1gKTtcblx0fVxuXHRjb25zdCBxdWVyeVN0cmluZyA9IFwiP1wiICsgcXVlcnkuam9pbihcIiZcIik7XG5cdHdhcm5JZlVSTElzVG9vTG9uZyhxdWVyeVN0cmluZyk7XG5cdHJldHVybiBxdWVyeVN0cmluZztcbn1cbmZ1bmN0aW9uIGVuY29kZVF1ZXJ5VmFsdWUoaW5wdXQpIHtcblx0cmV0dXJuIGlucHV0LnJlcGxhY2UoLyUvZywgXCIlMjVcIikucmVwbGFjZSgvXFwrL2csIFwiJTJCXCIpLnJlcGxhY2UoLyAvZywgXCIrXCIpLnJlcGxhY2UoLyMvZywgXCIlMjNcIikucmVwbGFjZSgvJi9nLCBcIiUyNlwiKS5yZXBsYWNlKC9cIi9nLCBcIiUyMlwiKS5yZXBsYWNlKC8nL2csIFwiJTI3XCIpLnJlcGxhY2UoL2AvZywgXCIlNjBcIikucmVwbGFjZSgvPC9nLCBcIiUzQ1wiKS5yZXBsYWNlKC8+L2csIFwiJTNFXCIpLnJlcGxhY2UoL1tcXHgwMC1cXHgxRl0vZywgKGNoYXIpID0+IGVuY29kZVVSSUNvbXBvbmVudChjaGFyKSk7XG59XG5jb25zdCBVUkxfTUFYX0xFTkdUSCA9IDJlMztcbmZ1bmN0aW9uIHdhcm5JZlVSTElzVG9vTG9uZyhxdWVyeVN0cmluZykge1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSByZXR1cm47XG5cdGlmICh0eXBlb2YgbG9jYXRpb24gPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblx0Y29uc3QgdXJsID0gbmV3IFVSTChsb2NhdGlvbi5ocmVmKTtcblx0dXJsLnNlYXJjaCA9IHF1ZXJ5U3RyaW5nO1xuXHRpZiAodXJsLmhyZWYubGVuZ3RoID4gVVJMX01BWF9MRU5HVEgpIGNvbnNvbGUud2FybihlcnJvcig0MTQpKTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2xpYi9jb250ZXh0LnRzXG5jb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7IHVzZUFkYXB0ZXIoKSB7XG5cdHRocm93IG5ldyBFcnJvcihlcnJvcig0MDQpKTtcbn0gfSk7XG5jb250ZXh0LmRpc3BsYXlOYW1lID0gXCJOdXFzQWRhcHRlckNvbnRleHRcIjtcbmlmIChkZWJ1Z0VuYWJsZWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRpZiAod2luZG93Ll9fTnVxc0FkYXB0ZXJDb250ZXh0ICYmIHdpbmRvdy5fX051cXNBZGFwdGVyQ29udGV4dCAhPT0gY29udGV4dCkgY29uc29sZS5lcnJvcihlcnJvcigzMDMpKTtcblx0d2luZG93Ll9fTnVxc0FkYXB0ZXJDb250ZXh0ID0gY29udGV4dDtcbn1cbi8qKlxuKiBDcmVhdGUgYSBjdXN0b20gYWRhcHRlciAoY29udGV4dCBwcm92aWRlcikgZm9yIG51cXMgdG8gd29yayB3aXRoIHlvdXIgZnJhbWV3b3JrIC8gcm91dGVyLlxuKlxuKiBBZGFwdGVycyBhcmUgYmFzZWQgb24gUmVhY3QgQ29udGV4dCxcbipcbiogQHBhcmFtIHVzZUFkYXB0ZXJcbiogQHJldHVybnNcbiovXG5mdW5jdGlvbiBjcmVhdGVBZGFwdGVyUHJvdmlkZXIodXNlQWRhcHRlciQxKSB7XG5cdHJldHVybiAoeyBjaGlsZHJlbiwgZGVmYXVsdE9wdGlvbnMsIHByb2Nlc3NVcmxTZWFyY2hQYXJhbXMsLi4ucHJvcHMgfSkgPT4gY3JlYXRlRWxlbWVudChjb250ZXh0LlByb3ZpZGVyLCB7XG5cdFx0Li4ucHJvcHMsXG5cdFx0dmFsdWU6IHtcblx0XHRcdHVzZUFkYXB0ZXI6IHVzZUFkYXB0ZXIkMSxcblx0XHRcdGRlZmF1bHRPcHRpb25zLFxuXHRcdFx0cHJvY2Vzc1VybFNlYXJjaFBhcmFtc1xuXHRcdH1cblx0fSwgY2hpbGRyZW4pO1xufVxuZnVuY3Rpb24gdXNlQWRhcHRlcih3YXRjaEtleXMpIHtcblx0Y29uc3QgdmFsdWUgPSB1c2VDb250ZXh0KGNvbnRleHQpO1xuXHRpZiAoIShcInVzZUFkYXB0ZXJcIiBpbiB2YWx1ZSkpIHRocm93IG5ldyBFcnJvcihlcnJvcig0MDQpKTtcblx0cmV0dXJuIHZhbHVlLnVzZUFkYXB0ZXIod2F0Y2hLZXlzKTtcbn1cbmNvbnN0IHVzZUFkYXB0ZXJEZWZhdWx0T3B0aW9ucyA9ICgpID0+IHVzZUNvbnRleHQoY29udGV4dCkuZGVmYXVsdE9wdGlvbnM7XG5jb25zdCB1c2VBZGFwdGVyUHJvY2Vzc1VybFNlYXJjaFBhcmFtcyA9ICgpID0+IHVzZUNvbnRleHQoY29udGV4dCkucHJvY2Vzc1VybFNlYXJjaFBhcmFtcztcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB1c2VBZGFwdGVyUHJvY2Vzc1VybFNlYXJjaFBhcmFtcyBhcyBhLCBkZWJ1ZyBhcyBjLCB1c2VBZGFwdGVyRGVmYXVsdE9wdGlvbnMgYXMgaSwgd2FybiBhcyBsLCBjcmVhdGVBZGFwdGVyUHJvdmlkZXIgYXMgbiwgcmVuZGVyUXVlcnlTdHJpbmcgYXMgbywgdXNlQWRhcHRlciBhcyByLCBlcnJvciBhcyBzLCBjb250ZXh0IGFzIHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQtRFJkbzVBMlAuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nuqs/dist/debounce-BI0MC054.js":
/*!*****************************************************!*\
  !*** ./node_modules/nuqs/dist/debounce-BI0MC054.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ write),\n/* harmony export */   c: () => (/* binding */ throttle),\n/* harmony export */   i: () => (/* binding */ isAbsentFromUrl),\n/* harmony export */   n: () => (/* binding */ globalThrottleQueue),\n/* harmony export */   o: () => (/* binding */ debounce),\n/* harmony export */   r: () => (/* binding */ createEmitter),\n/* harmony export */   s: () => (/* binding */ defaultRateLimit),\n/* harmony export */   t: () => (/* binding */ debounceController)\n/* harmony export */ });\n/* harmony import */ var _context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context-DRdo5A2P.js */ \"(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\n//#region src/lib/queues/rate-limiting.ts\nfunction getDefaultThrottle() {\n\tif (typeof window === \"undefined\") return 50;\n\tif (!Boolean(window.GestureEvent)) return 50;\n\ttry {\n\t\tconst match = navigator.userAgent?.match(/version\\/([\\d\\.]+) safari/i);\n\t\treturn parseFloat(match[1]) >= 17 ? 120 : 320;\n\t} catch {\n\t\treturn 320;\n\t}\n}\nfunction throttle(timeMs) {\n\treturn {\n\t\tmethod: \"throttle\",\n\t\ttimeMs\n\t};\n}\nfunction debounce(timeMs) {\n\treturn {\n\t\tmethod: \"debounce\",\n\t\ttimeMs\n\t};\n}\nconst defaultRateLimit = throttle(getDefaultThrottle());\n\n//#endregion\n//#region src/lib/search-params.ts\nfunction isAbsentFromUrl(query) {\n\treturn query === null || Array.isArray(query) && query.length === 0;\n}\nfunction write(serialized, key, searchParams) {\n\tif (typeof serialized === \"string\") searchParams.set(key, serialized);\n\telse {\n\t\tsearchParams.delete(key);\n\t\tfor (const v of serialized) searchParams.append(key, v);\n\t\tif (!searchParams.has(key)) searchParams.set(key, \"\");\n\t}\n\treturn searchParams;\n}\n\n//#endregion\n//#region src/lib/emitter.ts\nfunction createEmitter() {\n\tconst all = /* @__PURE__ */ new Map();\n\treturn {\n\t\ton(type, handler) {\n\t\t\tconst handlers = all.get(type) || [];\n\t\t\thandlers.push(handler);\n\t\t\tall.set(type, handlers);\n\t\t\treturn () => this.off(type, handler);\n\t\t},\n\t\toff(type, handler) {\n\t\t\tconst handlers = all.get(type);\n\t\t\tif (handlers) all.set(type, handlers.filter((h) => h !== handler));\n\t\t},\n\t\temit(type, event) {\n\t\t\tall.get(type)?.forEach((handler) => handler(event));\n\t\t}\n\t};\n}\n\n//#endregion\n//#region src/lib/timeout.ts\nfunction timeout(callback, ms, signal) {\n\tfunction onTick() {\n\t\tcallback();\n\t\tsignal.removeEventListener(\"abort\", onAbort);\n\t}\n\tconst id = setTimeout(onTick, ms);\n\tfunction onAbort() {\n\t\tclearTimeout(id);\n\t\tsignal.removeEventListener(\"abort\", onAbort);\n\t}\n\tsignal.addEventListener(\"abort\", onAbort);\n}\n\n//#endregion\n//#region src/lib/with-resolvers.ts\nfunction withResolvers() {\n\tconst P = Promise;\n\tif (Promise.hasOwnProperty(\"withResolvers\")) return Promise.withResolvers();\n\tlet resolve = () => {};\n\tlet reject = () => {};\n\treturn {\n\t\tpromise: new P((res, rej) => {\n\t\t\tresolve = res;\n\t\t\treject = rej;\n\t\t}),\n\t\tresolve,\n\t\treject\n\t};\n}\n\n//#endregion\n//#region src/lib/compose.ts\nfunction compose(fns, final) {\n\tlet next = final;\n\tfor (let i = fns.length - 1; i >= 0; i--) {\n\t\tconst fn = fns[i];\n\t\tif (!fn) continue;\n\t\tconst prev = next;\n\t\tnext = () => fn(prev);\n\t}\n\tnext();\n}\n\n//#endregion\n//#region src/lib/queues/throttle.ts\nfunction getSearchParamsSnapshotFromLocation() {\n\treturn new URLSearchParams(location.search);\n}\nvar ThrottledQueue = class {\n\tupdateMap = /* @__PURE__ */ new Map();\n\toptions = {\n\t\thistory: \"replace\",\n\t\tscroll: false,\n\t\tshallow: true\n\t};\n\ttimeMs = defaultRateLimit.timeMs;\n\ttransitions = /* @__PURE__ */ new Set();\n\tresolvers = null;\n\tcontroller = null;\n\tlastFlushedAt = 0;\n\tresetQueueOnNextPush = false;\n\tpush({ key, query, options }, timeMs = defaultRateLimit.timeMs) {\n\t\tif (this.resetQueueOnNextPush) {\n\t\t\tthis.reset();\n\t\t\tthis.resetQueueOnNextPush = false;\n\t\t}\n\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs gtq] Enqueueing %s=%s %O\", key, query, options);\n\t\tthis.updateMap.set(key, query);\n\t\tif (options.history === \"push\") this.options.history = \"push\";\n\t\tif (options.scroll) this.options.scroll = true;\n\t\tif (options.shallow === false) this.options.shallow = false;\n\t\tif (options.startTransition) this.transitions.add(options.startTransition);\n\t\tif (!Number.isFinite(this.timeMs) || timeMs > this.timeMs) this.timeMs = timeMs;\n\t}\n\tgetQueuedQuery(key) {\n\t\treturn this.updateMap.get(key);\n\t}\n\tgetPendingPromise({ getSearchParamsSnapshot = getSearchParamsSnapshotFromLocation }) {\n\t\treturn this.resolvers?.promise ?? Promise.resolve(getSearchParamsSnapshot());\n\t}\n\tflush({ getSearchParamsSnapshot = getSearchParamsSnapshotFromLocation, rateLimitFactor = 1,...adapter }, processUrlSearchParams) {\n\t\tthis.controller ??= new AbortController();\n\t\tif (!Number.isFinite(this.timeMs)) {\n\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs gtq] Skipping flush due to throttleMs=Infinity\");\n\t\t\treturn Promise.resolve(getSearchParamsSnapshot());\n\t\t}\n\t\tif (this.resolvers) return this.resolvers.promise;\n\t\tthis.resolvers = withResolvers();\n\t\tconst flushNow = () => {\n\t\t\tthis.lastFlushedAt = performance.now();\n\t\t\tconst [search, error$1] = this.applyPendingUpdates({\n\t\t\t\t...adapter,\n\t\t\t\tautoResetQueueOnUpdate: adapter.autoResetQueueOnUpdate ?? true,\n\t\t\t\tgetSearchParamsSnapshot\n\t\t\t}, processUrlSearchParams);\n\t\t\tif (error$1 === null) {\n\t\t\t\tthis.resolvers.resolve(search);\n\t\t\t\tthis.resetQueueOnNextPush = true;\n\t\t\t} else this.resolvers.reject(search);\n\t\t\tthis.resolvers = null;\n\t\t};\n\t\tconst runOnNextTick = () => {\n\t\t\tconst timeSinceLastFlush = performance.now() - this.lastFlushedAt;\n\t\t\tconst timeMs = this.timeMs;\n\t\t\tconst flushInMs = rateLimitFactor * Math.max(0, timeMs - timeSinceLastFlush);\n\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(`[nuqs gtq] Scheduling flush in %f ms. Throttled at %f ms (x%f)`, flushInMs, timeMs, rateLimitFactor);\n\t\t\tif (flushInMs === 0) flushNow();\n\t\t\telse timeout(flushNow, flushInMs, this.controller.signal);\n\t\t};\n\t\ttimeout(runOnNextTick, 0, this.controller.signal);\n\t\treturn this.resolvers.promise;\n\t}\n\tabort() {\n\t\tthis.controller?.abort();\n\t\tthis.controller = new AbortController();\n\t\tthis.resolvers?.resolve(new URLSearchParams());\n\t\tthis.resolvers = null;\n\t\treturn this.reset();\n\t}\n\treset() {\n\t\tconst queuedKeys = Array.from(this.updateMap.keys());\n\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs gtq] Resetting queue %s\", JSON.stringify(Object.fromEntries(this.updateMap)));\n\t\tthis.updateMap.clear();\n\t\tthis.transitions.clear();\n\t\tthis.options = {\n\t\t\thistory: \"replace\",\n\t\t\tscroll: false,\n\t\t\tshallow: true\n\t\t};\n\t\tthis.timeMs = defaultRateLimit.timeMs;\n\t\treturn queuedKeys;\n\t}\n\tapplyPendingUpdates(adapter, processUrlSearchParams) {\n\t\tconst { updateUrl, getSearchParamsSnapshot } = adapter;\n\t\tlet search = getSearchParamsSnapshot();\n\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(`[nuqs gtq] Applying %d pending update(s) on top of %s`, this.updateMap.size, search.toString());\n\t\tif (this.updateMap.size === 0) return [search, null];\n\t\tconst items = Array.from(this.updateMap.entries());\n\t\tconst options = { ...this.options };\n\t\tconst transitions = Array.from(this.transitions);\n\t\tif (adapter.autoResetQueueOnUpdate) this.reset();\n\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs gtq] Flushing queue %O with options %O\", items, options);\n\t\tfor (const [key, value] of items) if (value === null) search.delete(key);\n\t\telse search = write(value, key, search);\n\t\tif (processUrlSearchParams) search = processUrlSearchParams(search);\n\t\ttry {\n\t\t\tcompose(transitions, () => {\n\t\t\t\tupdateUrl(search, options);\n\t\t\t});\n\t\t\treturn [search, null];\n\t\t} catch (err) {\n\t\t\tconsole.error((0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.s)(429), items.map(([key]) => key).join(), err);\n\t\t\treturn [search, err];\n\t\t}\n\t}\n};\nconst globalThrottleQueue = new ThrottledQueue();\n\n//#endregion\n//#region src/lib/queues/useSyncExternalStores.ts\n/**\n* Like `useSyncExternalStore`, but for subscribing to multiple keys.\n*\n* Each key becomes the key of the returned object,\n* and the value is the result of calling `getKeySnapshot` with that key.\n*\n* @param keys - A list of keys to subscribe to.\n* @param subscribeKey - A function that takes a key and a callback,\n* subscribes to an external store using that key (calling the callback when\n* state changes occur), and returns a function to unsubscribe from that key.\n* @param getKeySnapshot - A function that takes a key and returns the snapshot for that key.\n* It will be called on the server and on the client, so it needs to handle both\n* environments.\n*/\nfunction useSyncExternalStores(keys, subscribeKey, getKeySnapshot) {\n\tconst snapshot = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n\t\tconst record = Object.fromEntries(keys.map((key) => [key, getKeySnapshot(key)]));\n\t\treturn [JSON.stringify(record), record];\n\t}, [keys.join(\",\"), getKeySnapshot]);\n\tconst cacheRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\tif (cacheRef.current === null) cacheRef.current = snapshot();\n\treturn (0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((callback) => {\n\t\tconst off = keys.map((key) => subscribeKey(key, callback));\n\t\treturn () => off.forEach((unsubscribe) => unsubscribe());\n\t}, [keys.join(\",\"), subscribeKey]), () => {\n\t\tconst [cacheKey, record] = snapshot();\n\t\tif (cacheRef.current[0] === cacheKey) return cacheRef.current[1];\n\t\tcacheRef.current = [cacheKey, record];\n\t\treturn record;\n\t}, () => cacheRef.current[1]);\n}\n\n//#endregion\n//#region src/lib/queues/debounce.ts\nvar DebouncedPromiseQueue = class {\n\tcallback;\n\tresolvers = withResolvers();\n\tcontroller = new AbortController();\n\tqueuedValue = void 0;\n\tconstructor(callback) {\n\t\tthis.callback = callback;\n\t}\n\tabort() {\n\t\tthis.controller.abort();\n\t\tthis.queuedValue = void 0;\n\t}\n\tpush(value, timeMs) {\n\t\tthis.queuedValue = value;\n\t\tthis.controller.abort();\n\t\tthis.controller = new AbortController();\n\t\ttimeout(() => {\n\t\t\tconst outputResolvers = this.resolvers;\n\t\t\ttry {\n\t\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs dq] Flushing debounce queue\", value);\n\t\t\t\tconst callbackPromise = this.callback(value);\n\t\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs dq] Reset debounce queue %O\", this.queuedValue);\n\t\t\t\tthis.queuedValue = void 0;\n\t\t\t\tthis.resolvers = withResolvers();\n\t\t\t\tcallbackPromise.then((output) => outputResolvers.resolve(output)).catch((error$1) => outputResolvers.reject(error$1));\n\t\t\t} catch (error$1) {\n\t\t\t\tthis.queuedValue = void 0;\n\t\t\t\toutputResolvers.reject(error$1);\n\t\t\t}\n\t\t}, timeMs, this.controller.signal);\n\t\treturn this.resolvers.promise;\n\t}\n};\nvar DebounceController = class {\n\tthrottleQueue;\n\tqueues = /* @__PURE__ */ new Map();\n\tqueuedQuerySync = createEmitter();\n\tconstructor(throttleQueue = new ThrottledQueue()) {\n\t\tthis.throttleQueue = throttleQueue;\n\t}\n\tuseQueuedQueries(keys) {\n\t\treturn useSyncExternalStores(keys, (key, callback) => this.queuedQuerySync.on(key, callback), (key) => this.getQueuedQuery(key));\n\t}\n\tpush(update, timeMs, adapter, processUrlSearchParams) {\n\t\tif (!Number.isFinite(timeMs)) {\n\t\t\tconst getSnapshot = adapter.getSearchParamsSnapshot ?? getSearchParamsSnapshotFromLocation;\n\t\t\treturn Promise.resolve(getSnapshot());\n\t\t}\n\t\tconst key = update.key;\n\t\tif (!this.queues.has(key)) {\n\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs dqc] Creating debounce queue for `%s`\", key);\n\t\t\tconst queue = new DebouncedPromiseQueue((update$1) => {\n\t\t\t\tthis.throttleQueue.push(update$1);\n\t\t\t\treturn this.throttleQueue.flush(adapter, processUrlSearchParams).finally(() => {\n\t\t\t\t\tif (this.queues.get(update$1.key)?.queuedValue === void 0) {\n\t\t\t\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs dqc] Cleaning up empty queue for `%s`\", update$1.key);\n\t\t\t\t\t\tthis.queues.delete(update$1.key);\n\t\t\t\t\t}\n\t\t\t\t\tthis.queuedQuerySync.emit(update$1.key);\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.queues.set(key, queue);\n\t\t}\n\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs dqc] Enqueueing debounce update %O\", update);\n\t\tconst promise = this.queues.get(key).push(update, timeMs);\n\t\tthis.queuedQuerySync.emit(key);\n\t\treturn promise;\n\t}\n\tabort(key) {\n\t\tconst queue = this.queues.get(key);\n\t\tif (!queue) return (passThrough) => passThrough;\n\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs dqc] Aborting debounce queue %s=%s\", key, queue.queuedValue?.query);\n\t\tthis.queues.delete(key);\n\t\tqueue.abort();\n\t\tthis.queuedQuerySync.emit(key);\n\t\treturn (promise) => {\n\t\t\tpromise.then(queue.resolvers.resolve, queue.resolvers.reject);\n\t\t\treturn promise;\n\t\t};\n\t}\n\tabortAll() {\n\t\tfor (const [key, queue] of this.queues.entries()) {\n\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_1__.c)(\"[nuqs dqc] Aborting debounce queue %s=%s\", key, queue.queuedValue?.query);\n\t\t\tqueue.abort();\n\t\t\tqueue.resolvers.resolve(new URLSearchParams());\n\t\t\tthis.queuedQuerySync.emit(key);\n\t\t}\n\t\tthis.queues.clear();\n\t}\n\tgetQueuedQuery(key) {\n\t\tconst debouncedQueued = this.queues.get(key)?.queuedValue?.query;\n\t\tif (debouncedQueued !== void 0) return debouncedQueued;\n\t\treturn this.throttleQueue.getQueuedQuery(key);\n\t}\n};\nconst debounceController = new DebounceController(globalThrottleQueue);\n\n//#endregion\n\n//# sourceMappingURL=debounce-BI0MC054.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L2RlYm91bmNlLUJJME1DMDU0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDRzs7QUFFbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsUUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFCQUFxQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsdURBQUs7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwrREFBK0Q7QUFDcEY7QUFDQTtBQUNBLFNBQVMsK0ZBQStGO0FBQ3hHO0FBQ0E7QUFDQSxHQUFHLHVEQUFLO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsdURBQUs7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHVEQUFLO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUNBQXFDO0FBQy9DO0FBQ0EsRUFBRSx1REFBSztBQUNQO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLEVBQUUsdURBQUs7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0osaUJBQWlCLHVEQUFLO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrREFBVztBQUM3QjtBQUNBO0FBQ0EsRUFBRTtBQUNGLGtCQUFrQiw2Q0FBTTtBQUN4QjtBQUNBLFFBQVEsMkRBQW9CLENBQUMsa0RBQVc7QUFDeEM7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVEQUFLO0FBQ1Q7QUFDQSxJQUFJLHVEQUFLO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyx1REFBSztBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx1REFBSztBQUNYO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEVBQUUsdURBQUs7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsdURBQUs7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsdURBQUs7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN3SztBQUN4SyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Y2VsLWhlbHAtbWUvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L2RlYm91bmNlLUJJME1DMDU0LmpzPzU3N2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYyBhcyBkZWJ1ZywgcyBhcyBlcnJvciB9IGZyb20gXCIuL2NvbnRleHQtRFJkbzVBMlAuanNcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN5bmNFeHRlcm5hbFN0b3JlIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvbGliL3F1ZXVlcy9yYXRlLWxpbWl0aW5nLnRzXG5mdW5jdGlvbiBnZXREZWZhdWx0VGhyb3R0bGUoKSB7XG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gNTA7XG5cdGlmICghQm9vbGVhbih3aW5kb3cuR2VzdHVyZUV2ZW50KSkgcmV0dXJuIDUwO1xuXHR0cnkge1xuXHRcdGNvbnN0IG1hdGNoID0gbmF2aWdhdG9yLnVzZXJBZ2VudD8ubWF0Y2goL3ZlcnNpb25cXC8oW1xcZFxcLl0rKSBzYWZhcmkvaSk7XG5cdFx0cmV0dXJuIHBhcnNlRmxvYXQobWF0Y2hbMV0pID49IDE3ID8gMTIwIDogMzIwO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gMzIwO1xuXHR9XG59XG5mdW5jdGlvbiB0aHJvdHRsZSh0aW1lTXMpIHtcblx0cmV0dXJuIHtcblx0XHRtZXRob2Q6IFwidGhyb3R0bGVcIixcblx0XHR0aW1lTXNcblx0fTtcbn1cbmZ1bmN0aW9uIGRlYm91bmNlKHRpbWVNcykge1xuXHRyZXR1cm4ge1xuXHRcdG1ldGhvZDogXCJkZWJvdW5jZVwiLFxuXHRcdHRpbWVNc1xuXHR9O1xufVxuY29uc3QgZGVmYXVsdFJhdGVMaW1pdCA9IHRocm90dGxlKGdldERlZmF1bHRUaHJvdHRsZSgpKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2xpYi9zZWFyY2gtcGFyYW1zLnRzXG5mdW5jdGlvbiBpc0Fic2VudEZyb21VcmwocXVlcnkpIHtcblx0cmV0dXJuIHF1ZXJ5ID09PSBudWxsIHx8IEFycmF5LmlzQXJyYXkocXVlcnkpICYmIHF1ZXJ5Lmxlbmd0aCA9PT0gMDtcbn1cbmZ1bmN0aW9uIHdyaXRlKHNlcmlhbGl6ZWQsIGtleSwgc2VhcmNoUGFyYW1zKSB7XG5cdGlmICh0eXBlb2Ygc2VyaWFsaXplZCA9PT0gXCJzdHJpbmdcIikgc2VhcmNoUGFyYW1zLnNldChrZXksIHNlcmlhbGl6ZWQpO1xuXHRlbHNlIHtcblx0XHRzZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG5cdFx0Zm9yIChjb25zdCB2IG9mIHNlcmlhbGl6ZWQpIHNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCB2KTtcblx0XHRpZiAoIXNlYXJjaFBhcmFtcy5oYXMoa2V5KSkgc2VhcmNoUGFyYW1zLnNldChrZXksIFwiXCIpO1xuXHR9XG5cdHJldHVybiBzZWFyY2hQYXJhbXM7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9saWIvZW1pdHRlci50c1xuZnVuY3Rpb24gY3JlYXRlRW1pdHRlcigpIHtcblx0Y29uc3QgYWxsID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0cmV0dXJuIHtcblx0XHRvbih0eXBlLCBoYW5kbGVyKSB7XG5cdFx0XHRjb25zdCBoYW5kbGVycyA9IGFsbC5nZXQodHlwZSkgfHwgW107XG5cdFx0XHRoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuXHRcdFx0YWxsLnNldCh0eXBlLCBoYW5kbGVycyk7XG5cdFx0XHRyZXR1cm4gKCkgPT4gdGhpcy5vZmYodHlwZSwgaGFuZGxlcik7XG5cdFx0fSxcblx0XHRvZmYodHlwZSwgaGFuZGxlcikge1xuXHRcdFx0Y29uc3QgaGFuZGxlcnMgPSBhbGwuZ2V0KHR5cGUpO1xuXHRcdFx0aWYgKGhhbmRsZXJzKSBhbGwuc2V0KHR5cGUsIGhhbmRsZXJzLmZpbHRlcigoaCkgPT4gaCAhPT0gaGFuZGxlcikpO1xuXHRcdH0sXG5cdFx0ZW1pdCh0eXBlLCBldmVudCkge1xuXHRcdFx0YWxsLmdldCh0eXBlKT8uZm9yRWFjaCgoaGFuZGxlcikgPT4gaGFuZGxlcihldmVudCkpO1xuXHRcdH1cblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2xpYi90aW1lb3V0LnRzXG5mdW5jdGlvbiB0aW1lb3V0KGNhbGxiYWNrLCBtcywgc2lnbmFsKSB7XG5cdGZ1bmN0aW9uIG9uVGljaygpIHtcblx0XHRjYWxsYmFjaygpO1xuXHRcdHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCk7XG5cdH1cblx0Y29uc3QgaWQgPSBzZXRUaW1lb3V0KG9uVGljaywgbXMpO1xuXHRmdW5jdGlvbiBvbkFib3J0KCkge1xuXHRcdGNsZWFyVGltZW91dChpZCk7XG5cdFx0c2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0KTtcblx0fVxuXHRzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQpO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvbGliL3dpdGgtcmVzb2x2ZXJzLnRzXG5mdW5jdGlvbiB3aXRoUmVzb2x2ZXJzKCkge1xuXHRjb25zdCBQID0gUHJvbWlzZTtcblx0aWYgKFByb21pc2UuaGFzT3duUHJvcGVydHkoXCJ3aXRoUmVzb2x2ZXJzXCIpKSByZXR1cm4gUHJvbWlzZS53aXRoUmVzb2x2ZXJzKCk7XG5cdGxldCByZXNvbHZlID0gKCkgPT4ge307XG5cdGxldCByZWplY3QgPSAoKSA9PiB7fTtcblx0cmV0dXJuIHtcblx0XHRwcm9taXNlOiBuZXcgUCgocmVzLCByZWopID0+IHtcblx0XHRcdHJlc29sdmUgPSByZXM7XG5cdFx0XHRyZWplY3QgPSByZWo7XG5cdFx0fSksXG5cdFx0cmVzb2x2ZSxcblx0XHRyZWplY3Rcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2xpYi9jb21wb3NlLnRzXG5mdW5jdGlvbiBjb21wb3NlKGZucywgZmluYWwpIHtcblx0bGV0IG5leHQgPSBmaW5hbDtcblx0Zm9yIChsZXQgaSA9IGZucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdGNvbnN0IGZuID0gZm5zW2ldO1xuXHRcdGlmICghZm4pIGNvbnRpbnVlO1xuXHRcdGNvbnN0IHByZXYgPSBuZXh0O1xuXHRcdG5leHQgPSAoKSA9PiBmbihwcmV2KTtcblx0fVxuXHRuZXh0KCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9saWIvcXVldWVzL3Rocm90dGxlLnRzXG5mdW5jdGlvbiBnZXRTZWFyY2hQYXJhbXNTbmFwc2hvdEZyb21Mb2NhdGlvbigpIHtcblx0cmV0dXJuIG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTtcbn1cbnZhciBUaHJvdHRsZWRRdWV1ZSA9IGNsYXNzIHtcblx0dXBkYXRlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0b3B0aW9ucyA9IHtcblx0XHRoaXN0b3J5OiBcInJlcGxhY2VcIixcblx0XHRzY3JvbGw6IGZhbHNlLFxuXHRcdHNoYWxsb3c6IHRydWVcblx0fTtcblx0dGltZU1zID0gZGVmYXVsdFJhdGVMaW1pdC50aW1lTXM7XG5cdHRyYW5zaXRpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0cmVzb2x2ZXJzID0gbnVsbDtcblx0Y29udHJvbGxlciA9IG51bGw7XG5cdGxhc3RGbHVzaGVkQXQgPSAwO1xuXHRyZXNldFF1ZXVlT25OZXh0UHVzaCA9IGZhbHNlO1xuXHRwdXNoKHsga2V5LCBxdWVyeSwgb3B0aW9ucyB9LCB0aW1lTXMgPSBkZWZhdWx0UmF0ZUxpbWl0LnRpbWVNcykge1xuXHRcdGlmICh0aGlzLnJlc2V0UXVldWVPbk5leHRQdXNoKSB7XG5cdFx0XHR0aGlzLnJlc2V0KCk7XG5cdFx0XHR0aGlzLnJlc2V0UXVldWVPbk5leHRQdXNoID0gZmFsc2U7XG5cdFx0fVxuXHRcdGRlYnVnKFwiW251cXMgZ3RxXSBFbnF1ZXVlaW5nICVzPSVzICVPXCIsIGtleSwgcXVlcnksIG9wdGlvbnMpO1xuXHRcdHRoaXMudXBkYXRlTWFwLnNldChrZXksIHF1ZXJ5KTtcblx0XHRpZiAob3B0aW9ucy5oaXN0b3J5ID09PSBcInB1c2hcIikgdGhpcy5vcHRpb25zLmhpc3RvcnkgPSBcInB1c2hcIjtcblx0XHRpZiAob3B0aW9ucy5zY3JvbGwpIHRoaXMub3B0aW9ucy5zY3JvbGwgPSB0cnVlO1xuXHRcdGlmIChvcHRpb25zLnNoYWxsb3cgPT09IGZhbHNlKSB0aGlzLm9wdGlvbnMuc2hhbGxvdyA9IGZhbHNlO1xuXHRcdGlmIChvcHRpb25zLnN0YXJ0VHJhbnNpdGlvbikgdGhpcy50cmFuc2l0aW9ucy5hZGQob3B0aW9ucy5zdGFydFRyYW5zaXRpb24pO1xuXHRcdGlmICghTnVtYmVyLmlzRmluaXRlKHRoaXMudGltZU1zKSB8fCB0aW1lTXMgPiB0aGlzLnRpbWVNcykgdGhpcy50aW1lTXMgPSB0aW1lTXM7XG5cdH1cblx0Z2V0UXVldWVkUXVlcnkoa2V5KSB7XG5cdFx0cmV0dXJuIHRoaXMudXBkYXRlTWFwLmdldChrZXkpO1xuXHR9XG5cdGdldFBlbmRpbmdQcm9taXNlKHsgZ2V0U2VhcmNoUGFyYW1zU25hcHNob3QgPSBnZXRTZWFyY2hQYXJhbXNTbmFwc2hvdEZyb21Mb2NhdGlvbiB9KSB7XG5cdFx0cmV0dXJuIHRoaXMucmVzb2x2ZXJzPy5wcm9taXNlID8/IFByb21pc2UucmVzb2x2ZShnZXRTZWFyY2hQYXJhbXNTbmFwc2hvdCgpKTtcblx0fVxuXHRmbHVzaCh7IGdldFNlYXJjaFBhcmFtc1NuYXBzaG90ID0gZ2V0U2VhcmNoUGFyYW1zU25hcHNob3RGcm9tTG9jYXRpb24sIHJhdGVMaW1pdEZhY3RvciA9IDEsLi4uYWRhcHRlciB9LCBwcm9jZXNzVXJsU2VhcmNoUGFyYW1zKSB7XG5cdFx0dGhpcy5jb250cm9sbGVyID8/PSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0aWYgKCFOdW1iZXIuaXNGaW5pdGUodGhpcy50aW1lTXMpKSB7XG5cdFx0XHRkZWJ1ZyhcIltudXFzIGd0cV0gU2tpcHBpbmcgZmx1c2ggZHVlIHRvIHRocm90dGxlTXM9SW5maW5pdHlcIik7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGdldFNlYXJjaFBhcmFtc1NuYXBzaG90KCkpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5yZXNvbHZlcnMpIHJldHVybiB0aGlzLnJlc29sdmVycy5wcm9taXNlO1xuXHRcdHRoaXMucmVzb2x2ZXJzID0gd2l0aFJlc29sdmVycygpO1xuXHRcdGNvbnN0IGZsdXNoTm93ID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5sYXN0Rmx1c2hlZEF0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cdFx0XHRjb25zdCBbc2VhcmNoLCBlcnJvciQxXSA9IHRoaXMuYXBwbHlQZW5kaW5nVXBkYXRlcyh7XG5cdFx0XHRcdC4uLmFkYXB0ZXIsXG5cdFx0XHRcdGF1dG9SZXNldFF1ZXVlT25VcGRhdGU6IGFkYXB0ZXIuYXV0b1Jlc2V0UXVldWVPblVwZGF0ZSA/PyB0cnVlLFxuXHRcdFx0XHRnZXRTZWFyY2hQYXJhbXNTbmFwc2hvdFxuXHRcdFx0fSwgcHJvY2Vzc1VybFNlYXJjaFBhcmFtcyk7XG5cdFx0XHRpZiAoZXJyb3IkMSA9PT0gbnVsbCkge1xuXHRcdFx0XHR0aGlzLnJlc29sdmVycy5yZXNvbHZlKHNlYXJjaCk7XG5cdFx0XHRcdHRoaXMucmVzZXRRdWV1ZU9uTmV4dFB1c2ggPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHRoaXMucmVzb2x2ZXJzLnJlamVjdChzZWFyY2gpO1xuXHRcdFx0dGhpcy5yZXNvbHZlcnMgPSBudWxsO1xuXHRcdH07XG5cdFx0Y29uc3QgcnVuT25OZXh0VGljayA9ICgpID0+IHtcblx0XHRcdGNvbnN0IHRpbWVTaW5jZUxhc3RGbHVzaCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdGhpcy5sYXN0Rmx1c2hlZEF0O1xuXHRcdFx0Y29uc3QgdGltZU1zID0gdGhpcy50aW1lTXM7XG5cdFx0XHRjb25zdCBmbHVzaEluTXMgPSByYXRlTGltaXRGYWN0b3IgKiBNYXRoLm1heCgwLCB0aW1lTXMgLSB0aW1lU2luY2VMYXN0Rmx1c2gpO1xuXHRcdFx0ZGVidWcoYFtudXFzIGd0cV0gU2NoZWR1bGluZyBmbHVzaCBpbiAlZiBtcy4gVGhyb3R0bGVkIGF0ICVmIG1zICh4JWYpYCwgZmx1c2hJbk1zLCB0aW1lTXMsIHJhdGVMaW1pdEZhY3Rvcik7XG5cdFx0XHRpZiAoZmx1c2hJbk1zID09PSAwKSBmbHVzaE5vdygpO1xuXHRcdFx0ZWxzZSB0aW1lb3V0KGZsdXNoTm93LCBmbHVzaEluTXMsIHRoaXMuY29udHJvbGxlci5zaWduYWwpO1xuXHRcdH07XG5cdFx0dGltZW91dChydW5Pbk5leHRUaWNrLCAwLCB0aGlzLmNvbnRyb2xsZXIuc2lnbmFsKTtcblx0XHRyZXR1cm4gdGhpcy5yZXNvbHZlcnMucHJvbWlzZTtcblx0fVxuXHRhYm9ydCgpIHtcblx0XHR0aGlzLmNvbnRyb2xsZXI/LmFib3J0KCk7XG5cdFx0dGhpcy5jb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXHRcdHRoaXMucmVzb2x2ZXJzPy5yZXNvbHZlKG5ldyBVUkxTZWFyY2hQYXJhbXMoKSk7XG5cdFx0dGhpcy5yZXNvbHZlcnMgPSBudWxsO1xuXHRcdHJldHVybiB0aGlzLnJlc2V0KCk7XG5cdH1cblx0cmVzZXQoKSB7XG5cdFx0Y29uc3QgcXVldWVkS2V5cyA9IEFycmF5LmZyb20odGhpcy51cGRhdGVNYXAua2V5cygpKTtcblx0XHRkZWJ1ZyhcIltudXFzIGd0cV0gUmVzZXR0aW5nIHF1ZXVlICVzXCIsIEpTT04uc3RyaW5naWZ5KE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnVwZGF0ZU1hcCkpKTtcblx0XHR0aGlzLnVwZGF0ZU1hcC5jbGVhcigpO1xuXHRcdHRoaXMudHJhbnNpdGlvbnMuY2xlYXIoKTtcblx0XHR0aGlzLm9wdGlvbnMgPSB7XG5cdFx0XHRoaXN0b3J5OiBcInJlcGxhY2VcIixcblx0XHRcdHNjcm9sbDogZmFsc2UsXG5cdFx0XHRzaGFsbG93OiB0cnVlXG5cdFx0fTtcblx0XHR0aGlzLnRpbWVNcyA9IGRlZmF1bHRSYXRlTGltaXQudGltZU1zO1xuXHRcdHJldHVybiBxdWV1ZWRLZXlzO1xuXHR9XG5cdGFwcGx5UGVuZGluZ1VwZGF0ZXMoYWRhcHRlciwgcHJvY2Vzc1VybFNlYXJjaFBhcmFtcykge1xuXHRcdGNvbnN0IHsgdXBkYXRlVXJsLCBnZXRTZWFyY2hQYXJhbXNTbmFwc2hvdCB9ID0gYWRhcHRlcjtcblx0XHRsZXQgc2VhcmNoID0gZ2V0U2VhcmNoUGFyYW1zU25hcHNob3QoKTtcblx0XHRkZWJ1ZyhgW251cXMgZ3RxXSBBcHBseWluZyAlZCBwZW5kaW5nIHVwZGF0ZShzKSBvbiB0b3Agb2YgJXNgLCB0aGlzLnVwZGF0ZU1hcC5zaXplLCBzZWFyY2gudG9TdHJpbmcoKSk7XG5cdFx0aWYgKHRoaXMudXBkYXRlTWFwLnNpemUgPT09IDApIHJldHVybiBbc2VhcmNoLCBudWxsXTtcblx0XHRjb25zdCBpdGVtcyA9IEFycmF5LmZyb20odGhpcy51cGRhdGVNYXAuZW50cmllcygpKTtcblx0XHRjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMgfTtcblx0XHRjb25zdCB0cmFuc2l0aW9ucyA9IEFycmF5LmZyb20odGhpcy50cmFuc2l0aW9ucyk7XG5cdFx0aWYgKGFkYXB0ZXIuYXV0b1Jlc2V0UXVldWVPblVwZGF0ZSkgdGhpcy5yZXNldCgpO1xuXHRcdGRlYnVnKFwiW251cXMgZ3RxXSBGbHVzaGluZyBxdWV1ZSAlTyB3aXRoIG9wdGlvbnMgJU9cIiwgaXRlbXMsIG9wdGlvbnMpO1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGl0ZW1zKSBpZiAodmFsdWUgPT09IG51bGwpIHNlYXJjaC5kZWxldGUoa2V5KTtcblx0XHRlbHNlIHNlYXJjaCA9IHdyaXRlKHZhbHVlLCBrZXksIHNlYXJjaCk7XG5cdFx0aWYgKHByb2Nlc3NVcmxTZWFyY2hQYXJhbXMpIHNlYXJjaCA9IHByb2Nlc3NVcmxTZWFyY2hQYXJhbXMoc2VhcmNoKTtcblx0XHR0cnkge1xuXHRcdFx0Y29tcG9zZSh0cmFuc2l0aW9ucywgKCkgPT4ge1xuXHRcdFx0XHR1cGRhdGVVcmwoc2VhcmNoLCBvcHRpb25zKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIFtzZWFyY2gsIG51bGxdO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcig0MjkpLCBpdGVtcy5tYXAoKFtrZXldKSA9PiBrZXkpLmpvaW4oKSwgZXJyKTtcblx0XHRcdHJldHVybiBbc2VhcmNoLCBlcnJdO1xuXHRcdH1cblx0fVxufTtcbmNvbnN0IGdsb2JhbFRocm90dGxlUXVldWUgPSBuZXcgVGhyb3R0bGVkUXVldWUoKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2xpYi9xdWV1ZXMvdXNlU3luY0V4dGVybmFsU3RvcmVzLnRzXG4vKipcbiogTGlrZSBgdXNlU3luY0V4dGVybmFsU3RvcmVgLCBidXQgZm9yIHN1YnNjcmliaW5nIHRvIG11bHRpcGxlIGtleXMuXG4qXG4qIEVhY2gga2V5IGJlY29tZXMgdGhlIGtleSBvZiB0aGUgcmV0dXJuZWQgb2JqZWN0LFxuKiBhbmQgdGhlIHZhbHVlIGlzIHRoZSByZXN1bHQgb2YgY2FsbGluZyBgZ2V0S2V5U25hcHNob3RgIHdpdGggdGhhdCBrZXkuXG4qXG4qIEBwYXJhbSBrZXlzIC0gQSBsaXN0IG9mIGtleXMgdG8gc3Vic2NyaWJlIHRvLlxuKiBAcGFyYW0gc3Vic2NyaWJlS2V5IC0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEga2V5IGFuZCBhIGNhbGxiYWNrLFxuKiBzdWJzY3JpYmVzIHRvIGFuIGV4dGVybmFsIHN0b3JlIHVzaW5nIHRoYXQga2V5IChjYWxsaW5nIHRoZSBjYWxsYmFjayB3aGVuXG4qIHN0YXRlIGNoYW5nZXMgb2NjdXIpLCBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVuc3Vic2NyaWJlIGZyb20gdGhhdCBrZXkuXG4qIEBwYXJhbSBnZXRLZXlTbmFwc2hvdCAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIGtleSBhbmQgcmV0dXJucyB0aGUgc25hcHNob3QgZm9yIHRoYXQga2V5LlxuKiBJdCB3aWxsIGJlIGNhbGxlZCBvbiB0aGUgc2VydmVyIGFuZCBvbiB0aGUgY2xpZW50LCBzbyBpdCBuZWVkcyB0byBoYW5kbGUgYm90aFxuKiBlbnZpcm9ubWVudHMuXG4qL1xuZnVuY3Rpb24gdXNlU3luY0V4dGVybmFsU3RvcmVzKGtleXMsIHN1YnNjcmliZUtleSwgZ2V0S2V5U25hcHNob3QpIHtcblx0Y29uc3Qgc25hcHNob3QgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG5cdFx0Y29uc3QgcmVjb3JkID0gT2JqZWN0LmZyb21FbnRyaWVzKGtleXMubWFwKChrZXkpID0+IFtrZXksIGdldEtleVNuYXBzaG90KGtleSldKSk7XG5cdFx0cmV0dXJuIFtKU09OLnN0cmluZ2lmeShyZWNvcmQpLCByZWNvcmRdO1xuXHR9LCBba2V5cy5qb2luKFwiLFwiKSwgZ2V0S2V5U25hcHNob3RdKTtcblx0Y29uc3QgY2FjaGVSZWYgPSB1c2VSZWYobnVsbCk7XG5cdGlmIChjYWNoZVJlZi5jdXJyZW50ID09PSBudWxsKSBjYWNoZVJlZi5jdXJyZW50ID0gc25hcHNob3QoKTtcblx0cmV0dXJuIHVzZVN5bmNFeHRlcm5hbFN0b3JlKHVzZUNhbGxiYWNrKChjYWxsYmFjaykgPT4ge1xuXHRcdGNvbnN0IG9mZiA9IGtleXMubWFwKChrZXkpID0+IHN1YnNjcmliZUtleShrZXksIGNhbGxiYWNrKSk7XG5cdFx0cmV0dXJuICgpID0+IG9mZi5mb3JFYWNoKCh1bnN1YnNjcmliZSkgPT4gdW5zdWJzY3JpYmUoKSk7XG5cdH0sIFtrZXlzLmpvaW4oXCIsXCIpLCBzdWJzY3JpYmVLZXldKSwgKCkgPT4ge1xuXHRcdGNvbnN0IFtjYWNoZUtleSwgcmVjb3JkXSA9IHNuYXBzaG90KCk7XG5cdFx0aWYgKGNhY2hlUmVmLmN1cnJlbnRbMF0gPT09IGNhY2hlS2V5KSByZXR1cm4gY2FjaGVSZWYuY3VycmVudFsxXTtcblx0XHRjYWNoZVJlZi5jdXJyZW50ID0gW2NhY2hlS2V5LCByZWNvcmRdO1xuXHRcdHJldHVybiByZWNvcmQ7XG5cdH0sICgpID0+IGNhY2hlUmVmLmN1cnJlbnRbMV0pO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvbGliL3F1ZXVlcy9kZWJvdW5jZS50c1xudmFyIERlYm91bmNlZFByb21pc2VRdWV1ZSA9IGNsYXNzIHtcblx0Y2FsbGJhY2s7XG5cdHJlc29sdmVycyA9IHdpdGhSZXNvbHZlcnMoKTtcblx0Y29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblx0cXVldWVkVmFsdWUgPSB2b2lkIDA7XG5cdGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG5cdFx0dGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuXHR9XG5cdGFib3J0KCkge1xuXHRcdHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuXHRcdHRoaXMucXVldWVkVmFsdWUgPSB2b2lkIDA7XG5cdH1cblx0cHVzaCh2YWx1ZSwgdGltZU1zKSB7XG5cdFx0dGhpcy5xdWV1ZWRWYWx1ZSA9IHZhbHVlO1xuXHRcdHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuXHRcdHRoaXMuY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblx0XHR0aW1lb3V0KCgpID0+IHtcblx0XHRcdGNvbnN0IG91dHB1dFJlc29sdmVycyA9IHRoaXMucmVzb2x2ZXJzO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGVidWcoXCJbbnVxcyBkcV0gRmx1c2hpbmcgZGVib3VuY2UgcXVldWVcIiwgdmFsdWUpO1xuXHRcdFx0XHRjb25zdCBjYWxsYmFja1Byb21pc2UgPSB0aGlzLmNhbGxiYWNrKHZhbHVlKTtcblx0XHRcdFx0ZGVidWcoXCJbbnVxcyBkcV0gUmVzZXQgZGVib3VuY2UgcXVldWUgJU9cIiwgdGhpcy5xdWV1ZWRWYWx1ZSk7XG5cdFx0XHRcdHRoaXMucXVldWVkVmFsdWUgPSB2b2lkIDA7XG5cdFx0XHRcdHRoaXMucmVzb2x2ZXJzID0gd2l0aFJlc29sdmVycygpO1xuXHRcdFx0XHRjYWxsYmFja1Byb21pc2UudGhlbigob3V0cHV0KSA9PiBvdXRwdXRSZXNvbHZlcnMucmVzb2x2ZShvdXRwdXQpKS5jYXRjaCgoZXJyb3IkMSkgPT4gb3V0cHV0UmVzb2x2ZXJzLnJlamVjdChlcnJvciQxKSk7XG5cdFx0XHR9IGNhdGNoIChlcnJvciQxKSB7XG5cdFx0XHRcdHRoaXMucXVldWVkVmFsdWUgPSB2b2lkIDA7XG5cdFx0XHRcdG91dHB1dFJlc29sdmVycy5yZWplY3QoZXJyb3IkMSk7XG5cdFx0XHR9XG5cdFx0fSwgdGltZU1zLCB0aGlzLmNvbnRyb2xsZXIuc2lnbmFsKTtcblx0XHRyZXR1cm4gdGhpcy5yZXNvbHZlcnMucHJvbWlzZTtcblx0fVxufTtcbnZhciBEZWJvdW5jZUNvbnRyb2xsZXIgPSBjbGFzcyB7XG5cdHRocm90dGxlUXVldWU7XG5cdHF1ZXVlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdHF1ZXVlZFF1ZXJ5U3luYyA9IGNyZWF0ZUVtaXR0ZXIoKTtcblx0Y29uc3RydWN0b3IodGhyb3R0bGVRdWV1ZSA9IG5ldyBUaHJvdHRsZWRRdWV1ZSgpKSB7XG5cdFx0dGhpcy50aHJvdHRsZVF1ZXVlID0gdGhyb3R0bGVRdWV1ZTtcblx0fVxuXHR1c2VRdWV1ZWRRdWVyaWVzKGtleXMpIHtcblx0XHRyZXR1cm4gdXNlU3luY0V4dGVybmFsU3RvcmVzKGtleXMsIChrZXksIGNhbGxiYWNrKSA9PiB0aGlzLnF1ZXVlZFF1ZXJ5U3luYy5vbihrZXksIGNhbGxiYWNrKSwgKGtleSkgPT4gdGhpcy5nZXRRdWV1ZWRRdWVyeShrZXkpKTtcblx0fVxuXHRwdXNoKHVwZGF0ZSwgdGltZU1zLCBhZGFwdGVyLCBwcm9jZXNzVXJsU2VhcmNoUGFyYW1zKSB7XG5cdFx0aWYgKCFOdW1iZXIuaXNGaW5pdGUodGltZU1zKSkge1xuXHRcdFx0Y29uc3QgZ2V0U25hcHNob3QgPSBhZGFwdGVyLmdldFNlYXJjaFBhcmFtc1NuYXBzaG90ID8/IGdldFNlYXJjaFBhcmFtc1NuYXBzaG90RnJvbUxvY2F0aW9uO1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShnZXRTbmFwc2hvdCgpKTtcblx0XHR9XG5cdFx0Y29uc3Qga2V5ID0gdXBkYXRlLmtleTtcblx0XHRpZiAoIXRoaXMucXVldWVzLmhhcyhrZXkpKSB7XG5cdFx0XHRkZWJ1ZyhcIltudXFzIGRxY10gQ3JlYXRpbmcgZGVib3VuY2UgcXVldWUgZm9yIGAlc2BcIiwga2V5KTtcblx0XHRcdGNvbnN0IHF1ZXVlID0gbmV3IERlYm91bmNlZFByb21pc2VRdWV1ZSgodXBkYXRlJDEpID0+IHtcblx0XHRcdFx0dGhpcy50aHJvdHRsZVF1ZXVlLnB1c2godXBkYXRlJDEpO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy50aHJvdHRsZVF1ZXVlLmZsdXNoKGFkYXB0ZXIsIHByb2Nlc3NVcmxTZWFyY2hQYXJhbXMpLmZpbmFsbHkoKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLnF1ZXVlcy5nZXQodXBkYXRlJDEua2V5KT8ucXVldWVkVmFsdWUgPT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdFx0ZGVidWcoXCJbbnVxcyBkcWNdIENsZWFuaW5nIHVwIGVtcHR5IHF1ZXVlIGZvciBgJXNgXCIsIHVwZGF0ZSQxLmtleSk7XG5cdFx0XHRcdFx0XHR0aGlzLnF1ZXVlcy5kZWxldGUodXBkYXRlJDEua2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5xdWV1ZWRRdWVyeVN5bmMuZW1pdCh1cGRhdGUkMS5rZXkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5xdWV1ZXMuc2V0KGtleSwgcXVldWUpO1xuXHRcdH1cblx0XHRkZWJ1ZyhcIltudXFzIGRxY10gRW5xdWV1ZWluZyBkZWJvdW5jZSB1cGRhdGUgJU9cIiwgdXBkYXRlKTtcblx0XHRjb25zdCBwcm9taXNlID0gdGhpcy5xdWV1ZXMuZ2V0KGtleSkucHVzaCh1cGRhdGUsIHRpbWVNcyk7XG5cdFx0dGhpcy5xdWV1ZWRRdWVyeVN5bmMuZW1pdChrZXkpO1xuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9XG5cdGFib3J0KGtleSkge1xuXHRcdGNvbnN0IHF1ZXVlID0gdGhpcy5xdWV1ZXMuZ2V0KGtleSk7XG5cdFx0aWYgKCFxdWV1ZSkgcmV0dXJuIChwYXNzVGhyb3VnaCkgPT4gcGFzc1Rocm91Z2g7XG5cdFx0ZGVidWcoXCJbbnVxcyBkcWNdIEFib3J0aW5nIGRlYm91bmNlIHF1ZXVlICVzPSVzXCIsIGtleSwgcXVldWUucXVldWVkVmFsdWU/LnF1ZXJ5KTtcblx0XHR0aGlzLnF1ZXVlcy5kZWxldGUoa2V5KTtcblx0XHRxdWV1ZS5hYm9ydCgpO1xuXHRcdHRoaXMucXVldWVkUXVlcnlTeW5jLmVtaXQoa2V5KTtcblx0XHRyZXR1cm4gKHByb21pc2UpID0+IHtcblx0XHRcdHByb21pc2UudGhlbihxdWV1ZS5yZXNvbHZlcnMucmVzb2x2ZSwgcXVldWUucmVzb2x2ZXJzLnJlamVjdCk7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHR9O1xuXHR9XG5cdGFib3J0QWxsKCkge1xuXHRcdGZvciAoY29uc3QgW2tleSwgcXVldWVdIG9mIHRoaXMucXVldWVzLmVudHJpZXMoKSkge1xuXHRcdFx0ZGVidWcoXCJbbnVxcyBkcWNdIEFib3J0aW5nIGRlYm91bmNlIHF1ZXVlICVzPSVzXCIsIGtleSwgcXVldWUucXVldWVkVmFsdWU/LnF1ZXJ5KTtcblx0XHRcdHF1ZXVlLmFib3J0KCk7XG5cdFx0XHRxdWV1ZS5yZXNvbHZlcnMucmVzb2x2ZShuZXcgVVJMU2VhcmNoUGFyYW1zKCkpO1xuXHRcdFx0dGhpcy5xdWV1ZWRRdWVyeVN5bmMuZW1pdChrZXkpO1xuXHRcdH1cblx0XHR0aGlzLnF1ZXVlcy5jbGVhcigpO1xuXHR9XG5cdGdldFF1ZXVlZFF1ZXJ5KGtleSkge1xuXHRcdGNvbnN0IGRlYm91bmNlZFF1ZXVlZCA9IHRoaXMucXVldWVzLmdldChrZXkpPy5xdWV1ZWRWYWx1ZT8ucXVlcnk7XG5cdFx0aWYgKGRlYm91bmNlZFF1ZXVlZCAhPT0gdm9pZCAwKSByZXR1cm4gZGVib3VuY2VkUXVldWVkO1xuXHRcdHJldHVybiB0aGlzLnRocm90dGxlUXVldWUuZ2V0UXVldWVkUXVlcnkoa2V5KTtcblx0fVxufTtcbmNvbnN0IGRlYm91bmNlQ29udHJvbGxlciA9IG5ldyBEZWJvdW5jZUNvbnRyb2xsZXIoZ2xvYmFsVGhyb3R0bGVRdWV1ZSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgd3JpdGUgYXMgYSwgdGhyb3R0bGUgYXMgYywgaXNBYnNlbnRGcm9tVXJsIGFzIGksIGdsb2JhbFRocm90dGxlUXVldWUgYXMgbiwgZGVib3VuY2UgYXMgbywgY3JlYXRlRW1pdHRlciBhcyByLCBkZWZhdWx0UmF0ZUxpbWl0IGFzIHMsIGRlYm91bmNlQ29udHJvbGxlciBhcyB0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZS1CSTBNQzA1NC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/debounce-BI0MC054.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nuqs/dist/impl.app-Q6Qchelg.js":
/*!*****************************************************!*\
  !*** ./node_modules/nuqs/dist/impl.app-Q6Qchelg.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   n: () => (/* binding */ useNuqsNextAppRouterAdapter),\n/* harmony export */   t: () => (/* binding */ NavigationSpy)\n/* harmony export */ });\n/* harmony import */ var _context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./context-DRdo5A2P.js */ \"(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js\");\n/* harmony import */ var _reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./reset-t0vXtVbG.js */ \"(ssr)/./node_modules/nuqs/dist/reset-t0vXtVbG.js\");\n/* harmony import */ var _patch_history_KajkFXHX_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./patch-history-KajkFXHX.js */ \"(ssr)/./node_modules/nuqs/dist/patch-history-KajkFXHX.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var next_navigation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/navigation.js */ \"(ssr)/./node_modules/next/dist/api/navigation.js\");\n\n\n\n\n\n\n//#region src/adapters/next/impl.app.ts\nconst NUM_HISTORY_CALLS_PER_UPDATE = 3;\nfunction onPopState() {\n\t(0,_reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_2__.n)(0);\n\t(0,_reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_2__.t)();\n}\nfunction onHistoryStateUpdate() {\n\t(0,_reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => {\n\t\tqueueMicrotask(_reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_2__.t);\n\t});\n}\nfunction patchHistory() {\n\tif (!(0,_patch_history_KajkFXHX_js__WEBPACK_IMPORTED_MODULE_3__.i)(\"next/app\")) return;\n\tconst originalReplaceState = history.replaceState;\n\tconst originalPushState = history.pushState;\n\thistory.replaceState = function nuqs_replaceState(state, title, url) {\n\t\tonHistoryStateUpdate();\n\t\treturn originalReplaceState.call(history, state, title, url);\n\t};\n\thistory.pushState = function nuqs_pushState(state, title, url) {\n\t\tonHistoryStateUpdate();\n\t\treturn originalPushState.call(history, state, title, url);\n\t};\n\t(0,_patch_history_KajkFXHX_js__WEBPACK_IMPORTED_MODULE_3__.n)(\"next/app\");\n}\nfunction NavigationSpy() {\n\t(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n\t\tpatchHistory();\n\t\twindow.addEventListener(\"popstate\", onPopState);\n\t\treturn () => window.removeEventListener(\"popstate\", onPopState);\n\t}, []);\n\treturn null;\n}\nfunction useNuqsNextAppRouterAdapter() {\n\tconst router = (0,next_navigation_js__WEBPACK_IMPORTED_MODULE_1__.useRouter)();\n\tconst [optimisticSearchParams, setOptimisticSearchParams] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useOptimistic)((0,next_navigation_js__WEBPACK_IMPORTED_MODULE_1__.useSearchParams)());\n\treturn {\n\t\tsearchParams: optimisticSearchParams,\n\t\tupdateUrl: (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((search, options) => {\n\t\t\t(0,react__WEBPACK_IMPORTED_MODULE_0__.startTransition)(() => {\n\t\t\t\tif (!options.shallow) setOptimisticSearchParams(search);\n\t\t\t\tconst url = renderURL(search);\n\t\t\t\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_4__.c)(\"[nuqs next/app] Updating url: %s\", url);\n\t\t\t\tconst updateMethod = options.history === \"push\" ? history.pushState : history.replaceState;\n\t\t\t\t(0,_reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_2__.n)(NUM_HISTORY_CALLS_PER_UPDATE);\n\t\t\t\tupdateMethod.call(history, null, \"\", url);\n\t\t\t\tif (options.scroll) window.scrollTo(0, 0);\n\t\t\t\tif (!options.shallow) router.replace(url, { scroll: false });\n\t\t\t});\n\t\t}, []),\n\t\trateLimitFactor: NUM_HISTORY_CALLS_PER_UPDATE,\n\t\tautoResetQueueOnUpdate: true\n\t};\n}\nfunction renderURL(search) {\n\tconst { origin, pathname, hash } = location;\n\treturn origin + pathname + (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_4__.o)(search) + hash;\n}\n\n//#endregion\n\n//# sourceMappingURL=impl.app-Q6Qchelg.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L2ltcGwuYXBwLVE2UWNoZWxnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMkU7QUFDK0I7QUFDVDtBQUNsQjtBQUNmOztBQUVoRTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHFEQUFrQjtBQUNuQixDQUFDLHFEQUFXO0FBQ1o7QUFDQTtBQUNBLENBQUMscURBQW1CO0FBQ3BCLGlCQUFpQixpREFBVztBQUM1QixFQUFFO0FBQ0Y7QUFDQTtBQUNBLE1BQU0sNkRBQWtCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw2REFBb0I7QUFDckI7QUFDQTtBQUNBLENBQUMsZ0RBQVM7QUFDVjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDZEQUFTO0FBQ3pCLDZEQUE2RCxvREFBYSxDQUFDLG1FQUFlO0FBQzFGO0FBQ0E7QUFDQSxhQUFhLGtEQUFXO0FBQ3hCLEdBQUcsc0RBQWU7QUFDbEI7QUFDQTtBQUNBLElBQUksdURBQUs7QUFDVDtBQUNBLElBQUkscURBQWtCO0FBQ3RCO0FBQ0E7QUFDQSxnREFBZ0QsZUFBZTtBQUMvRCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHlCQUF5QjtBQUNsQyw0QkFBNEIsdURBQWlCO0FBQzdDOztBQUVBO0FBQ2dFO0FBQ2hFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhjZWwtaGVscC1tZS8uL25vZGVfbW9kdWxlcy9udXFzL2Rpc3QvaW1wbC5hcHAtUTZRY2hlbGcuanM/MDQyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjIGFzIGRlYnVnLCBvIGFzIHJlbmRlclF1ZXJ5U3RyaW5nIH0gZnJvbSBcIi4vY29udGV4dC1EUmRvNUEyUC5qc1wiO1xuaW1wb3J0IHsgbiBhcyBzZXRRdWV1ZVJlc2V0TXV0ZXgsIHIgYXMgc3BpblF1ZXVlUmVzZXRNdXRleCwgdCBhcyByZXNldFF1ZXVlcyB9IGZyb20gXCIuL3Jlc2V0LXQwdlh0VmJHLmpzXCI7XG5pbXBvcnQgeyBpIGFzIHNob3VsZFBhdGNoSGlzdG9yeSwgbiBhcyBtYXJrSGlzdG9yeUFzUGF0Y2hlZCB9IGZyb20gXCIuL3BhdGNoLWhpc3RvcnktS2Fqa0ZYSFguanNcIjtcbmltcG9ydCB7IHN0YXJ0VHJhbnNpdGlvbiwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlT3B0aW1pc3RpYyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VTZWFyY2hQYXJhbXMgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMvbmV4dC9pbXBsLmFwcC50c1xuY29uc3QgTlVNX0hJU1RPUllfQ0FMTFNfUEVSX1VQREFURSA9IDM7XG5mdW5jdGlvbiBvblBvcFN0YXRlKCkge1xuXHRzZXRRdWV1ZVJlc2V0TXV0ZXgoMCk7XG5cdHJlc2V0UXVldWVzKCk7XG59XG5mdW5jdGlvbiBvbkhpc3RvcnlTdGF0ZVVwZGF0ZSgpIHtcblx0c3BpblF1ZXVlUmVzZXRNdXRleCgoKSA9PiB7XG5cdFx0cXVldWVNaWNyb3Rhc2socmVzZXRRdWV1ZXMpO1xuXHR9KTtcbn1cbmZ1bmN0aW9uIHBhdGNoSGlzdG9yeSgpIHtcblx0aWYgKCFzaG91bGRQYXRjaEhpc3RvcnkoXCJuZXh0L2FwcFwiKSkgcmV0dXJuO1xuXHRjb25zdCBvcmlnaW5hbFJlcGxhY2VTdGF0ZSA9IGhpc3RvcnkucmVwbGFjZVN0YXRlO1xuXHRjb25zdCBvcmlnaW5hbFB1c2hTdGF0ZSA9IGhpc3RvcnkucHVzaFN0YXRlO1xuXHRoaXN0b3J5LnJlcGxhY2VTdGF0ZSA9IGZ1bmN0aW9uIG51cXNfcmVwbGFjZVN0YXRlKHN0YXRlLCB0aXRsZSwgdXJsKSB7XG5cdFx0b25IaXN0b3J5U3RhdGVVcGRhdGUoKTtcblx0XHRyZXR1cm4gb3JpZ2luYWxSZXBsYWNlU3RhdGUuY2FsbChoaXN0b3J5LCBzdGF0ZSwgdGl0bGUsIHVybCk7XG5cdH07XG5cdGhpc3RvcnkucHVzaFN0YXRlID0gZnVuY3Rpb24gbnVxc19wdXNoU3RhdGUoc3RhdGUsIHRpdGxlLCB1cmwpIHtcblx0XHRvbkhpc3RvcnlTdGF0ZVVwZGF0ZSgpO1xuXHRcdHJldHVybiBvcmlnaW5hbFB1c2hTdGF0ZS5jYWxsKGhpc3RvcnksIHN0YXRlLCB0aXRsZSwgdXJsKTtcblx0fTtcblx0bWFya0hpc3RvcnlBc1BhdGNoZWQoXCJuZXh0L2FwcFwiKTtcbn1cbmZ1bmN0aW9uIE5hdmlnYXRpb25TcHkoKSB7XG5cdHVzZUVmZmVjdCgoKSA9PiB7XG5cdFx0cGF0Y2hIaXN0b3J5KCk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBvblBvcFN0YXRlKTtcblx0XHRyZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBvblBvcFN0YXRlKTtcblx0fSwgW10pO1xuXHRyZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHVzZU51cXNOZXh0QXBwUm91dGVyQWRhcHRlcigpIHtcblx0Y29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG5cdGNvbnN0IFtvcHRpbWlzdGljU2VhcmNoUGFyYW1zLCBzZXRPcHRpbWlzdGljU2VhcmNoUGFyYW1zXSA9IHVzZU9wdGltaXN0aWModXNlU2VhcmNoUGFyYW1zKCkpO1xuXHRyZXR1cm4ge1xuXHRcdHNlYXJjaFBhcmFtczogb3B0aW1pc3RpY1NlYXJjaFBhcmFtcyxcblx0XHR1cGRhdGVVcmw6IHVzZUNhbGxiYWNrKChzZWFyY2gsIG9wdGlvbnMpID0+IHtcblx0XHRcdHN0YXJ0VHJhbnNpdGlvbigoKSA9PiB7XG5cdFx0XHRcdGlmICghb3B0aW9ucy5zaGFsbG93KSBzZXRPcHRpbWlzdGljU2VhcmNoUGFyYW1zKHNlYXJjaCk7XG5cdFx0XHRcdGNvbnN0IHVybCA9IHJlbmRlclVSTChzZWFyY2gpO1xuXHRcdFx0XHRkZWJ1ZyhcIltudXFzIG5leHQvYXBwXSBVcGRhdGluZyB1cmw6ICVzXCIsIHVybCk7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZU1ldGhvZCA9IG9wdGlvbnMuaGlzdG9yeSA9PT0gXCJwdXNoXCIgPyBoaXN0b3J5LnB1c2hTdGF0ZSA6IGhpc3RvcnkucmVwbGFjZVN0YXRlO1xuXHRcdFx0XHRzZXRRdWV1ZVJlc2V0TXV0ZXgoTlVNX0hJU1RPUllfQ0FMTFNfUEVSX1VQREFURSk7XG5cdFx0XHRcdHVwZGF0ZU1ldGhvZC5jYWxsKGhpc3RvcnksIG51bGwsIFwiXCIsIHVybCk7XG5cdFx0XHRcdGlmIChvcHRpb25zLnNjcm9sbCkgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuc2hhbGxvdykgcm91dGVyLnJlcGxhY2UodXJsLCB7IHNjcm9sbDogZmFsc2UgfSk7XG5cdFx0XHR9KTtcblx0XHR9LCBbXSksXG5cdFx0cmF0ZUxpbWl0RmFjdG9yOiBOVU1fSElTVE9SWV9DQUxMU19QRVJfVVBEQVRFLFxuXHRcdGF1dG9SZXNldFF1ZXVlT25VcGRhdGU6IHRydWVcblx0fTtcbn1cbmZ1bmN0aW9uIHJlbmRlclVSTChzZWFyY2gpIHtcblx0Y29uc3QgeyBvcmlnaW4sIHBhdGhuYW1lLCBoYXNoIH0gPSBsb2NhdGlvbjtcblx0cmV0dXJuIG9yaWdpbiArIHBhdGhuYW1lICsgcmVuZGVyUXVlcnlTdHJpbmcoc2VhcmNoKSArIGhhc2g7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdXNlTnVxc05leHRBcHBSb3V0ZXJBZGFwdGVyIGFzIG4sIE5hdmlnYXRpb25TcHkgYXMgdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW1wbC5hcHAtUTZRY2hlbGcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/impl.app-Q6Qchelg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nuqs/dist/index.js":
/*!*****************************************!*\
  !*** ./node_modules/nuqs/dist/index.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLoader: () => (/* binding */ createLoader),\n/* harmony export */   createMultiParser: () => (/* binding */ createMultiParser),\n/* harmony export */   createParser: () => (/* binding */ createParser),\n/* harmony export */   createSerializer: () => (/* binding */ createSerializer),\n/* harmony export */   createStandardSchemaV1: () => (/* binding */ createStandardSchemaV1),\n/* harmony export */   debounce: () => (/* reexport safe */ _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.o),\n/* harmony export */   defaultRateLimit: () => (/* reexport safe */ _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.s),\n/* harmony export */   parseAsArrayOf: () => (/* binding */ parseAsArrayOf),\n/* harmony export */   parseAsBoolean: () => (/* binding */ parseAsBoolean),\n/* harmony export */   parseAsFloat: () => (/* binding */ parseAsFloat),\n/* harmony export */   parseAsHex: () => (/* binding */ parseAsHex),\n/* harmony export */   parseAsIndex: () => (/* binding */ parseAsIndex),\n/* harmony export */   parseAsInteger: () => (/* binding */ parseAsInteger),\n/* harmony export */   parseAsIsoDate: () => (/* binding */ parseAsIsoDate),\n/* harmony export */   parseAsIsoDateTime: () => (/* binding */ parseAsIsoDateTime),\n/* harmony export */   parseAsJson: () => (/* binding */ parseAsJson),\n/* harmony export */   parseAsNativeArrayOf: () => (/* binding */ parseAsNativeArrayOf),\n/* harmony export */   parseAsNumberLiteral: () => (/* binding */ parseAsNumberLiteral),\n/* harmony export */   parseAsString: () => (/* binding */ parseAsString),\n/* harmony export */   parseAsStringEnum: () => (/* binding */ parseAsStringEnum),\n/* harmony export */   parseAsStringLiteral: () => (/* binding */ parseAsStringLiteral),\n/* harmony export */   parseAsTimestamp: () => (/* binding */ parseAsTimestamp),\n/* harmony export */   throttle: () => (/* reexport safe */ _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.c),\n/* harmony export */   useQueryState: () => (/* binding */ useQueryState),\n/* harmony export */   useQueryStates: () => (/* binding */ useQueryStates)\n/* harmony export */ });\n/* harmony import */ var _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./debounce-BI0MC054.js */ \"(ssr)/./node_modules/nuqs/dist/debounce-BI0MC054.js\");\n/* harmony import */ var _context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context-DRdo5A2P.js */ \"(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js\");\n/* harmony import */ var _compare_Br3z3FUS_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./compare-Br3z3FUS.js */ \"(ssr)/./node_modules/nuqs/dist/compare-Br3z3FUS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* __next_internal_client_entry_do_not_use__ createLoader,createMultiParser,createParser,createSerializer,createStandardSchemaV1,debounce,defaultRateLimit,parseAsArrayOf,parseAsBoolean,parseAsFloat,parseAsHex,parseAsIndex,parseAsInteger,parseAsIsoDate,parseAsIsoDateTime,parseAsJson,parseAsNativeArrayOf,parseAsNumberLiteral,parseAsString,parseAsStringEnum,parseAsStringLiteral,parseAsTimestamp,throttle,useQueryState,useQueryStates auto */ \n\n\n\n//#region src/loader.ts\nfunction createLoader(parsers, { urlKeys = {} } = {}) {\n    function loadSearchParams(input, { strict = false } = {}) {\n        if (input instanceof Promise) return input.then((i)=>loadSearchParams(i, {\n                strict\n            }));\n        const searchParams = extractSearchParams(input);\n        const result = {};\n        for (const [key, parser] of Object.entries(parsers)){\n            const urlKey = urlKeys[key] ?? key;\n            const query = parser.type === \"multi\" ? searchParams.getAll(urlKey) : searchParams.get(urlKey);\n            if ((0,_debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.i)(query)) {\n                result[key] = parser.defaultValue ?? null;\n                continue;\n            }\n            let parsedValue;\n            try {\n                parsedValue = parser.parse(query);\n            } catch (error$1) {\n                if (strict) throw new Error(`[nuqs] Error while parsing query \\`${query}\\` for key \\`${key}\\`: ${error$1}`);\n                parsedValue = null;\n            }\n            if (strict && query && parsedValue === null) throw new Error(`[nuqs] Failed to parse query \\`${query}\\` for key \\`${key}\\` (got null)`);\n            result[key] = parsedValue ?? parser.defaultValue ?? null;\n        }\n        return result;\n    }\n    return loadSearchParams;\n}\nfunction extractSearchParams(input) {\n    try {\n        if (input instanceof Request) return input.url ? new URL(input.url).searchParams : new URLSearchParams();\n        if (input instanceof URL) return input.searchParams;\n        if (input instanceof URLSearchParams) return input;\n        if (typeof input === \"object\") {\n            const searchParams = new URLSearchParams();\n            for (const [key, value] of Object.entries(input))if (Array.isArray(value)) for (const v of value)searchParams.append(key, v);\n            else if (value !== void 0) searchParams.set(key, value);\n            return searchParams;\n        }\n        if (typeof input === \"string\") {\n            if (URL.hasOwnProperty(\"canParse\") && URL.canParse(input)) return new URL(input).searchParams;\n            return new URLSearchParams(input);\n        }\n    } catch  {}\n    return new URLSearchParams();\n}\n//#endregion\n//#region src/lib/safe-parse.ts\nfunction safeParse(parser, value, key) {\n    try {\n        return parser(value);\n    } catch (error$1) {\n        (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.l)(\"[nuqs] Error while parsing value `%s`: %O\" + (key ? \" (for key `%s`)\" : \"\"), value, error$1, key);\n        return null;\n    }\n}\n//#endregion\n//#region src/parsers.ts\n/**\n* Wrap a set of parse/serialize functions into a builder pattern parser\n* you can pass to one of the hooks, making its default value type safe.\n*/ function createParser(parser) {\n    function parseServerSideNullable(value) {\n        if (typeof value === \"undefined\") return null;\n        let str = \"\";\n        if (Array.isArray(value)) {\n            if (value[0] === void 0) return null;\n            str = value[0];\n        }\n        if (typeof value === \"string\") str = value;\n        return safeParse(parser.parse, str);\n    }\n    return {\n        type: \"single\",\n        eq: (a, b)=>a === b,\n        ...parser,\n        parseServerSide: parseServerSideNullable,\n        withDefault (defaultValue) {\n            return {\n                ...this,\n                defaultValue,\n                parseServerSide (value) {\n                    return parseServerSideNullable(value) ?? defaultValue;\n                }\n            };\n        },\n        withOptions (options) {\n            return {\n                ...this,\n                ...options\n            };\n        }\n    };\n}\nfunction createMultiParser(parser) {\n    function parseServerSideNullable(value) {\n        if (typeof value === \"undefined\") return null;\n        return safeParse(parser.parse, Array.isArray(value) ? value : [\n            value\n        ]);\n    }\n    return {\n        type: \"multi\",\n        eq: (a, b)=>a === b,\n        ...parser,\n        parseServerSide: parseServerSideNullable,\n        withDefault (defaultValue) {\n            return {\n                ...this,\n                defaultValue,\n                parseServerSide (value) {\n                    return parseServerSideNullable(value) ?? defaultValue;\n                }\n            };\n        },\n        withOptions (options) {\n            return {\n                ...this,\n                ...options\n            };\n        }\n    };\n}\nconst parseAsString = createParser({\n    parse: (v)=>v,\n    serialize: String\n});\nconst parseAsInteger = createParser({\n    parse: (v)=>{\n        const int = parseInt(v);\n        return int == int ? int : null;\n    },\n    serialize: (v)=>\"\" + Math.round(v)\n});\nconst parseAsIndex = createParser({\n    parse: (v)=>{\n        const int = parseInt(v);\n        return int == int ? int - 1 : null;\n    },\n    serialize: (v)=>\"\" + Math.round(v + 1)\n});\nconst parseAsHex = createParser({\n    parse: (v)=>{\n        const int = parseInt(v, 16);\n        return int == int ? int : null;\n    },\n    serialize: (v)=>{\n        const hex = Math.round(v).toString(16);\n        return (hex.length & 1 ? \"0\" : \"\") + hex;\n    }\n});\nconst parseAsFloat = createParser({\n    parse: (v)=>{\n        const float = parseFloat(v);\n        return float == float ? float : null;\n    },\n    serialize: String\n});\nconst parseAsBoolean = createParser({\n    parse: (v)=>v.toLowerCase() === \"true\",\n    serialize: String\n});\nfunction compareDates(a, b) {\n    return a.valueOf() === b.valueOf();\n}\n/**\n* Querystring encoded as the number of milliseconds since epoch,\n* and returned as a Date object.\n*/ const parseAsTimestamp = createParser({\n    parse: (v)=>{\n        const ms = parseInt(v);\n        return ms == ms ? new Date(ms) : null;\n    },\n    serialize: (v)=>\"\" + v.valueOf(),\n    eq: compareDates\n});\n/**\n* Querystring encoded as an ISO-8601 string (UTC),\n* and returned as a Date object.\n*/ const parseAsIsoDateTime = createParser({\n    parse: (v)=>{\n        const date = new Date(v);\n        return date.valueOf() == date.valueOf() ? date : null;\n    },\n    serialize: (v)=>v.toISOString(),\n    eq: compareDates\n});\n/**\n* Querystring encoded as an ISO-8601 string (UTC)\n* without the time zone offset, and returned as\n* a Date object.\n*\n* The Date is parsed without the time zone offset,\n* making it at 00:00:00 UTC.\n*/ const parseAsIsoDate = createParser({\n    parse: (v)=>{\n        const date = new Date(v.slice(0, 10));\n        return date.valueOf() == date.valueOf() ? date : null;\n    },\n    serialize: (v)=>v.toISOString().slice(0, 10),\n    eq: compareDates\n});\n/**\n* String-based enums provide better type-safety for known sets of values.\n* You will need to pass the parseAsStringEnum function a list of your enum values\n* in order to validate the query string. Anything else will return `null`,\n* or your default value if specified.\n*\n* Example:\n* ```ts\n* enum Direction {\n*   up = 'UP',\n*   down = 'DOWN',\n*   left = 'LEFT',\n*   right = 'RIGHT'\n* }\n*\n* const [direction, setDirection] = useQueryState(\n*   'direction',\n*    parseAsStringEnum<Direction>(Object.values(Direction)) // pass a list of allowed values\n*      .withDefault(Direction.up)\n* )\n* ```\n*\n* Note: the query string value will be the value of the enum, not its name\n* (example above: `direction=UP`).\n*\n* @param validValues The values you want to accept\n*/ function parseAsStringEnum(validValues) {\n    return parseAsStringLiteral(validValues);\n}\n/**\n* String-based literals provide better type-safety for known sets of values.\n* You will need to pass the parseAsStringLiteral function a list of your string values\n* in order to validate the query string. Anything else will return `null`,\n* or your default value if specified.\n*\n* Example:\n* ```ts\n* const colors = [\"red\", \"green\", \"blue\"] as const\n*\n* const [color, setColor] = useQueryState(\n*   'color',\n*    parseAsStringLiteral(colors) // pass a readonly list of allowed values\n*      .withDefault(\"red\")\n* )\n* ```\n*\n* @param validValues The values you want to accept\n*/ function parseAsStringLiteral(validValues) {\n    return createParser({\n        parse: (query)=>{\n            const asConst = query;\n            return validValues.includes(asConst) ? asConst : null;\n        },\n        serialize: String\n    });\n}\n/**\n* Number-based literals provide better type-safety for known sets of values.\n* You will need to pass the parseAsNumberLiteral function a list of your number values\n* in order to validate the query string. Anything else will return `null`,\n* or your default value if specified.\n*\n* Example:\n* ```ts\n* const diceSides = [1, 2, 3, 4, 5, 6] as const\n*\n* const [side, setSide] = useQueryState(\n*   'side',\n*    parseAsNumberLiteral(diceSides) // pass a readonly list of allowed values\n*      .withDefault(4)\n* )\n* ```\n*\n* @param validValues The values you want to accept\n*/ function parseAsNumberLiteral(validValues) {\n    return createParser({\n        parse: (query)=>{\n            const asConst = parseFloat(query);\n            if (validValues.includes(asConst)) return asConst;\n            return null;\n        },\n        serialize: String\n    });\n}\n/**\n* Encode any object shape into the querystring value as JSON.\n* Note: you may want to use `useQueryStates` for finer control over\n* multiple related query keys.\n*\n* @param runtimeParser Runtime parser (eg: Zod schema or Standard Schema) to validate after JSON.parse\n*/ function parseAsJson(validator) {\n    return createParser({\n        parse: (query)=>{\n            try {\n                const obj = JSON.parse(query);\n                if (\"~standard\" in validator) {\n                    const result = validator[\"~standard\"].validate(obj);\n                    if (result instanceof Promise) throw new Error(\"[nuqs] Only synchronous Standard Schemas are supported in parseAsJson.\");\n                    return result.issues ? null : result.value;\n                }\n                return validator(obj);\n            } catch  {\n                return null;\n            }\n        },\n        serialize: (value)=>JSON.stringify(value),\n        eq (a, b) {\n            return a === b || JSON.stringify(a) === JSON.stringify(b);\n        }\n    });\n}\n/**\n* A comma-separated list of items.\n* Items are URI-encoded for safety, so they may not look nice in the URL.\n*\n* @param itemParser Parser for each individual item in the array\n* @param separator The character to use to separate items (default ',')\n*/ function parseAsArrayOf(itemParser, separator = \",\") {\n    const itemEq = itemParser.eq ?? ((a, b)=>a === b);\n    const encodedSeparator = encodeURIComponent(separator);\n    return createParser({\n        parse: (query)=>{\n            if (query === \"\") return [];\n            return query.split(separator).map((item, index)=>safeParse(itemParser.parse, item.replaceAll(encodedSeparator, separator), `[${index}]`)).filter((value)=>value !== null && value !== void 0);\n        },\n        serialize: (values)=>values.map((value)=>{\n                return (itemParser.serialize ? itemParser.serialize(value) : String(value)).replaceAll(separator, encodedSeparator);\n            }).join(separator),\n        eq (a, b) {\n            if (a === b) return true;\n            if (a.length !== b.length) return false;\n            return a.every((value, index)=>itemEq(value, b[index]));\n        }\n    });\n}\nfunction parseAsNativeArrayOf(itemParser) {\n    const itemEq = itemParser.eq ?? ((a, b)=>a === b);\n    return createMultiParser({\n        parse: (query)=>{\n            const parsed = query.map((item, index)=>safeParse(itemParser.parse, item, `[${index}]`)).filter((value)=>value !== null && value !== void 0);\n            return parsed.length === 0 ? null : parsed;\n        },\n        serialize: (values)=>{\n            return (Array.isArray(values) ? values : [\n                values\n            ]).flatMap((value)=>{\n                const serialized = itemParser.serialize?.(value) ?? String(value);\n                return typeof serialized === \"string\" ? [\n                    serialized\n                ] : [\n                    ...serialized\n                ];\n            });\n        },\n        eq (a, b) {\n            if (a === b) return true;\n            if (a.length !== b.length) return false;\n            return a.every((value, index)=>itemEq(value, b[index]));\n        }\n    }).withDefault([]);\n}\n//#endregion\n//#region src/serializer.ts\nfunction createSerializer(parsers, { clearOnDefault = true, urlKeys = {}, processUrlSearchParams } = {}) {\n    function serialize(arg1BaseOrValues, arg2values = {}) {\n        let [base, search] = isBase(arg1BaseOrValues) ? splitBase(arg1BaseOrValues) : [\n            \"\",\n            new URLSearchParams()\n        ];\n        const values = isBase(arg1BaseOrValues) ? arg2values : arg1BaseOrValues;\n        if (values === null) {\n            for(const key in parsers){\n                const urlKey = urlKeys[key] ?? key;\n                search.delete(urlKey);\n            }\n            if (processUrlSearchParams) search = processUrlSearchParams(search);\n            return base + (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.o)(search);\n        }\n        for(const key in parsers){\n            const parser = parsers[key];\n            const value = values[key];\n            if (!parser || value === void 0) continue;\n            const urlKey = urlKeys[key] ?? key;\n            const isMatchingDefault = parser.defaultValue !== void 0 && value !== null && (parser.eq ?? ((a, b)=>a === b))(value, parser.defaultValue);\n            if (value === null || (parser.clearOnDefault ?? clearOnDefault ?? true) && isMatchingDefault) search.delete(urlKey);\n            else search = (0,_debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.a)(parser.serialize(value), urlKey, search);\n        }\n        if (processUrlSearchParams) search = processUrlSearchParams(search);\n        return base + (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.o)(search);\n    }\n    return serialize;\n}\nfunction isBase(base) {\n    return typeof base === \"string\" || base instanceof URLSearchParams || base instanceof URL;\n}\nfunction splitBase(base) {\n    if (typeof base === \"string\") {\n        const [path = \"\", ...search] = base.split(\"?\");\n        return [\n            path,\n            new URLSearchParams(search.join(\"?\"))\n        ];\n    } else if (base instanceof URLSearchParams) return [\n        \"\",\n        new URLSearchParams(base)\n    ];\n    else return [\n        base.origin + base.pathname,\n        new URLSearchParams(base.searchParams)\n    ];\n}\n//#endregion\n//#region src/standard-schema.ts\nfunction createStandardSchemaV1(parsers, { urlKeys, partialOutput = false } = {}) {\n    const serialize = createSerializer(parsers, {\n        urlKeys\n    });\n    const load = createLoader(parsers, {\n        urlKeys\n    });\n    return {\n        \"~standard\": {\n            version: 1,\n            vendor: \"nuqs\",\n            validate (input) {\n                try {\n                    const value = load(serialize(input), {\n                        strict: true\n                    });\n                    if (partialOutput) {\n                        for(const key in value)if (!(key in input)) delete value[key];\n                    }\n                    return {\n                        value\n                    };\n                } catch (error$1) {\n                    return {\n                        issues: [\n                            {\n                                message: error$1 instanceof Error ? error$1.message : String(error$1)\n                            }\n                        ]\n                    };\n                }\n            }\n        }\n    };\n}\n//#endregion\n//#region src/lib/sync.ts\nconst emitter = (0,_debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.r)();\n//#endregion\n//#region src/useQueryStates.ts\nconst defaultUrlKeys = {};\n/**\n* Synchronise multiple query string arguments to React state in Next.js\n*\n* @param keys - An object describing the keys to synchronise and how to\n*               serialise and parse them.\n*               Use `parseAs(String|Integer|Float|...)` for quick shorthands.\n* @param options - Optional history mode, shallow routing and scroll restoration options.\n*/ function useQueryStates(keyMap, options = {}) {\n    const hookId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();\n    const defaultOptions = (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.i)();\n    const processUrlSearchParams = (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.a)();\n    const { history = \"replace\", scroll = defaultOptions?.scroll ?? false, shallow = defaultOptions?.shallow ?? true, throttleMs = _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.s.timeMs, limitUrlUpdates = defaultOptions?.limitUrlUpdates, clearOnDefault = defaultOptions?.clearOnDefault ?? true, startTransition: startTransition$1, urlKeys = defaultUrlKeys } = options;\n    const stateKeys = Object.keys(keyMap).join(\",\");\n    const resolvedUrlKeys = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>Object.fromEntries(Object.keys(keyMap).map((key)=>[\n                key,\n                urlKeys[key] ?? key\n            ])), [\n        stateKeys,\n        JSON.stringify(urlKeys)\n    ]);\n    const adapter = (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.r)(Object.values(resolvedUrlKeys));\n    const initialSearchParams = adapter.searchParams;\n    const queryRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\n    const defaultValues = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>Object.fromEntries(Object.keys(keyMap).map((key)=>[\n                key,\n                keyMap[key].defaultValue ?? null\n            ])), [\n        Object.values(keyMap).map(({ defaultValue })=>defaultValue).join(\",\")\n    ]);\n    const queuedQueries = _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.t.useQueuedQueries(Object.values(resolvedUrlKeys));\n    const [internalState, setInternalState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(()=>{\n        return parseMap(keyMap, urlKeys, initialSearchParams ?? new URLSearchParams(), queuedQueries).state;\n    });\n    const stateRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(internalState);\n    (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] render - state: %O, iSP: %s\", hookId, stateKeys, internalState, initialSearchParams);\n    if (Object.keys(queryRef.current).join(\"&\") !== Object.values(resolvedUrlKeys).join(\"&\")) {\n        const { state, hasChanged } = parseMap(keyMap, urlKeys, initialSearchParams, queuedQueries, queryRef.current, stateRef.current);\n        if (hasChanged) {\n            (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] State changed: %O\", hookId, stateKeys, {\n                state,\n                initialSearchParams,\n                queuedQueries,\n                queryRef: queryRef.current,\n                stateRef: stateRef.current\n            });\n            stateRef.current = state;\n            setInternalState(state);\n        }\n        queryRef.current = Object.fromEntries(Object.entries(resolvedUrlKeys).map(([key, urlKey])=>{\n            return [\n                urlKey,\n                keyMap[key]?.type === \"multi\" ? initialSearchParams?.getAll(urlKey) : initialSearchParams?.get(urlKey) ?? null\n            ];\n        }));\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const { state, hasChanged } = parseMap(keyMap, urlKeys, initialSearchParams, queuedQueries, queryRef.current, stateRef.current);\n        if (hasChanged) {\n            (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] State changed: %O\", hookId, stateKeys, {\n                state,\n                initialSearchParams,\n                queuedQueries,\n                queryRef: queryRef.current,\n                stateRef: stateRef.current\n            });\n            stateRef.current = state;\n            setInternalState(state);\n        }\n    }, [\n        Object.values(resolvedUrlKeys).map((key)=>`${key}=${initialSearchParams?.getAll(key)}`).join(\"&\"),\n        JSON.stringify(queuedQueries)\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const handlers = Object.keys(keyMap).reduce((handlers$1, stateKey)=>{\n            handlers$1[stateKey] = ({ state, query })=>{\n                setInternalState((currentState)=>{\n                    const { defaultValue } = keyMap[stateKey];\n                    const urlKey = resolvedUrlKeys[stateKey];\n                    const nextValue = state ?? defaultValue ?? null;\n                    const currentValue = currentState[stateKey] ?? defaultValue ?? null;\n                    if (Object.is(currentValue, nextValue)) {\n                        (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). no change, skipping, resolved: %O\", hookId, stateKeys, urlKey, state, defaultValue, stateRef.current);\n                        return currentState;\n                    }\n                    stateRef.current = {\n                        ...stateRef.current,\n                        [stateKey]: nextValue\n                    };\n                    queryRef.current[urlKey] = query;\n                    (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). updateInternalState, resolved: %O\", hookId, stateKeys, urlKey, state, defaultValue, stateRef.current);\n                    return stateRef.current;\n                });\n            };\n            return handlers$1;\n        }, {});\n        for (const stateKey of Object.keys(keyMap)){\n            const urlKey = resolvedUrlKeys[stateKey];\n            (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] Subscribing to sync for `%s`\", hookId, urlKey, stateKeys);\n            emitter.on(urlKey, handlers[stateKey]);\n        }\n        return ()=>{\n            for (const stateKey of Object.keys(keyMap)){\n                const urlKey = resolvedUrlKeys[stateKey];\n                (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] Unsubscribing to sync for `%s`\", hookId, urlKey, stateKeys);\n                emitter.off(urlKey, handlers[stateKey]);\n            }\n        };\n    }, [\n        stateKeys,\n        resolvedUrlKeys\n    ]);\n    const update = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((stateUpdater, callOptions = {})=>{\n        const nullMap = Object.fromEntries(Object.keys(keyMap).map((key)=>[\n                key,\n                null\n            ]));\n        const newState = typeof stateUpdater === \"function\" ? stateUpdater(applyDefaultValues(stateRef.current, defaultValues)) ?? nullMap : stateUpdater ?? nullMap;\n        (0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"[nuq+ %s `%s`] setState: %O\", hookId, stateKeys, newState);\n        let returnedPromise = void 0;\n        let maxDebounceTime = 0;\n        let doFlush = false;\n        const debounceAborts = [];\n        for (let [stateKey, value] of Object.entries(newState)){\n            const parser = keyMap[stateKey];\n            const urlKey = resolvedUrlKeys[stateKey];\n            if (!parser || value === void 0) continue;\n            if ((callOptions.clearOnDefault ?? parser.clearOnDefault ?? clearOnDefault) && value !== null && parser.defaultValue !== void 0 && (parser.eq ?? ((a, b)=>a === b))(value, parser.defaultValue)) value = null;\n            const query = value === null ? null : (parser.serialize ?? String)(value);\n            emitter.emit(urlKey, {\n                state: value,\n                query\n            });\n            const update$1 = {\n                key: urlKey,\n                query,\n                options: {\n                    history: callOptions.history ?? parser.history ?? history,\n                    shallow: callOptions.shallow ?? parser.shallow ?? shallow,\n                    scroll: callOptions.scroll ?? parser.scroll ?? scroll,\n                    startTransition: callOptions.startTransition ?? parser.startTransition ?? startTransition$1\n                }\n            };\n            if (callOptions?.limitUrlUpdates?.method === \"debounce\" || limitUrlUpdates?.method === \"debounce\" || parser.limitUrlUpdates?.method === \"debounce\") {\n                if (update$1.options.shallow === true) console.warn((0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_2__.s)(422));\n                const timeMs = callOptions?.limitUrlUpdates?.timeMs ?? limitUrlUpdates?.timeMs ?? parser.limitUrlUpdates?.timeMs ?? _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.s.timeMs;\n                const debouncedPromise = _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.t.push(update$1, timeMs, adapter, processUrlSearchParams);\n                if (maxDebounceTime < timeMs) {\n                    returnedPromise = debouncedPromise;\n                    maxDebounceTime = timeMs;\n                }\n            } else {\n                const timeMs = callOptions?.limitUrlUpdates?.timeMs ?? parser?.limitUrlUpdates?.timeMs ?? limitUrlUpdates?.timeMs ?? callOptions.throttleMs ?? parser.throttleMs ?? throttleMs;\n                debounceAborts.push(_debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.t.abort(urlKey));\n                _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.n.push(update$1, timeMs);\n                doFlush = true;\n            }\n        }\n        const globalPromise = debounceAborts.reduce((previous, fn)=>fn(previous), doFlush ? _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.n.flush(adapter, processUrlSearchParams) : _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.n.getPendingPromise(adapter));\n        return returnedPromise ?? globalPromise;\n    }, [\n        stateKeys,\n        history,\n        shallow,\n        scroll,\n        throttleMs,\n        limitUrlUpdates?.method,\n        limitUrlUpdates?.timeMs,\n        startTransition$1,\n        resolvedUrlKeys,\n        adapter.updateUrl,\n        adapter.getSearchParamsSnapshot,\n        adapter.rateLimitFactor,\n        processUrlSearchParams,\n        defaultValues\n    ]);\n    return [\n        (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>applyDefaultValues(internalState, defaultValues), [\n            internalState,\n            defaultValues\n        ]),\n        update\n    ];\n}\nfunction parseMap(keyMap, urlKeys, searchParams, queuedQueries, cachedQuery, cachedState) {\n    let hasChanged = false;\n    const state = Object.entries(keyMap).reduce((out, [stateKey, parser])=>{\n        const urlKey = urlKeys?.[stateKey] ?? stateKey;\n        const queuedQuery = queuedQueries[urlKey];\n        const fallbackValue = parser.type === \"multi\" ? [] : null;\n        const query = queuedQuery === void 0 ? (parser.type === \"multi\" ? searchParams?.getAll(urlKey) : searchParams?.get(urlKey)) ?? fallbackValue : queuedQuery;\n        if (cachedQuery && cachedState && (0,_compare_Br3z3FUS_js__WEBPACK_IMPORTED_MODULE_3__.t)(cachedQuery[urlKey] ?? fallbackValue, query)) {\n            out[stateKey] = cachedState[stateKey] ?? null;\n            return out;\n        }\n        hasChanged = true;\n        out[stateKey] = ((0,_debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.i)(query) ? null : safeParse(parser.parse, query, urlKey)) ?? null;\n        if (cachedQuery) cachedQuery[urlKey] = query;\n        return out;\n    }, {});\n    if (!hasChanged) {\n        const keyMapKeys = Object.keys(keyMap);\n        const cachedStateKeys = Object.keys(cachedState ?? {});\n        hasChanged = keyMapKeys.length !== cachedStateKeys.length || keyMapKeys.some((key)=>!cachedStateKeys.includes(key));\n    }\n    return {\n        state,\n        hasChanged\n    };\n}\nfunction applyDefaultValues(state, defaults) {\n    return Object.fromEntries(Object.keys(state).map((key)=>[\n            key,\n            state[key] ?? defaults[key] ?? null\n        ]));\n}\n//#endregion\n//#region src/useQueryState.ts\n/**\n* React state hook synchronized with a URL query string in Next.js\n*\n* If used without a `defaultValue` supplied in the options, and the query is\n* missing in the URL, the state will be `null`.\n*\n* ### Behaviour with default values:\n*\n* _Note: the URL will **not** be updated with the default value if the query\n* is missing._\n*\n* Setting the value to `null` will clear the query in the URL, and return\n* the default value as state.\n*\n* Example usage:\n* ```ts\n*   // Blog posts filtering by tag\n*   const [tag, selectTag] = useQueryState('tag')\n*   const filteredPosts = posts.filter(post => tag ? post.tag === tag : true)\n*   const clearTag = () => selectTag(null)\n*\n*   // With default values\n*\n*   const [count, setCount] = useQueryState(\n*     'count',\n*     parseAsInteger.defaultValue(0)\n*   )\n*\n*   const increment = () => setCount(oldCount => oldCount + 1)\n*   const decrement = () => setCount(oldCount => oldCount - 1)\n*   const clearCountQuery = () => setCount(null)\n*\n*   // --\n*\n*   const [date, setDate] = useQueryState(\n*     'date',\n*     parseAsIsoDateTime.withDefault(new Date('2021-01-01'))\n*   )\n*\n*   const setToNow = () => setDate(new Date())\n*   const addOneHour = () => {\n*     setDate(oldDate => new Date(oldDate.valueOf() + 3600_000))\n*   }\n* ```\n* @param key The URL query string key to bind to\n* @param options - Parser (defines the state data type), optional default value and history mode.\n*/ function useQueryState(key, options = {}) {\n    const { parse, type, serialize, eq, defaultValue, ...hookOptions } = options;\n    const [{ [key]: state }, setState] = useQueryStates({\n        [key]: {\n            parse: parse ?? ((x)=>x),\n            type,\n            serialize,\n            eq,\n            defaultValue\n        }\n    }, hookOptions);\n    return [\n        state,\n        (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((stateUpdater, callOptions = {})=>setState((old)=>({\n                    [key]: typeof stateUpdater === \"function\" ? stateUpdater(old[key]) : stateUpdater\n                }), callOptions), [\n            key,\n            setState\n        ])\n    ];\n}\n//#endregion\n //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJGLE9BQU87UUFBQzFEO1FBZk9rQixrREFBV0EsQ0FBWCxDQUNaQyxjQUE4Q0MsY0FBdUIsRUFBRSxHQUN0RXVDLFNBQUEsQ0FDRUUsTUFBUTtvQkFBQSxDQUNMNU4sSUFBQSxFQUNDLE9BQU9rTCxpQkFBaUIsYUFHcEJBLGFBQWEwQyxHQUFBLENBQUk1TixJQUFBLElBQ2pCa0w7Z0JBQUEsSUFFUkMsY0FFSjtZQUFDbkw7WUFBSzBOO1NBQVM7S0FFSyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Y2VsLWhlbHAtbWUvLi4vc3JjL2xvYWRlci50cz9kYTk3Iiwid2VicGFjazovL2V4Y2VsLWhlbHAtbWUvLi4vc3JjL2xpYi9zYWZlLXBhcnNlLnRzP2VmODIiLCJ3ZWJwYWNrOi8vZXhjZWwtaGVscC1tZS8uLi9zcmMvcGFyc2Vycy50cz9iYmJkIiwid2VicGFjazovL2V4Y2VsLWhlbHAtbWUvLi4vc3JjL3NlcmlhbGl6ZXIudHM/NzMxNSIsIndlYnBhY2s6Ly9leGNlbC1oZWxwLW1lLy4uL3NyYy9zdGFuZGFyZC1zY2hlbWEudHM/YzU2OCIsIndlYnBhY2s6Ly9leGNlbC1oZWxwLW1lLy4uL3NyYy9saWIvc3luYy50cz9lYWZiIiwid2VicGFjazovL2V4Y2VsLWhlbHAtbWUvLi4vc3JjL3VzZVF1ZXJ5U3RhdGVzLnRzP2E1ZWQiLCJ3ZWJwYWNrOi8vZXhjZWwtaGVscC1tZS8uLi9zcmMvdXNlUXVlcnlTdGF0ZS50cz85NzRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVXJsS2V5cyB9IGZyb20gJy4vZGVmcydcbmltcG9ydCB7IGlzQWJzZW50RnJvbVVybCB9IGZyb20gJy4vbGliL3NlYXJjaC1wYXJhbXMnXG5pbXBvcnQgdHlwZSB7IGluZmVyUGFyc2VyVHlwZSwgUGFyc2VyTWFwIH0gZnJvbSAnLi9wYXJzZXJzJ1xuXG5leHBvcnQgdHlwZSBMb2FkZXJJbnB1dCA9XG4gIHwgVVJMXG4gIHwgUmVxdWVzdFxuICB8IFVSTFNlYXJjaFBhcmFtc1xuICB8IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkPlxuICB8IHN0cmluZ1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBgQ3JlYXRlTG9hZGVyT3B0aW9uc2AgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IHR5cGUgTG9hZGVyT3B0aW9uczxQYXJzZXJzIGV4dGVuZHMgUGFyc2VyTWFwPiA9IHtcbiAgdXJsS2V5cz86IFVybEtleXM8UGFyc2Vycz5cbn1cbmV4cG9ydCB0eXBlIENyZWF0ZUxvYWRlck9wdGlvbnM8UCBleHRlbmRzIFBhcnNlck1hcD4gPSBMb2FkZXJPcHRpb25zPFA+XG5leHBvcnQgdHlwZSBMb2FkZXJGdW5jdGlvbk9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHVzZSBzdHJpY3QgcGFyc2luZy4gSWYgdHJ1ZSwgdGhlIGxvYWRlciB3aWxsIHRocm93IGFuIGVycm9yIGlmXG4gICAqIGFueSBvZiB0aGUgcGFyc2VycyBmYWlsIHRvIHBhcnNlIHRoZWlyIHJlc3BlY3RpdmUgdmFsdWVzLiBJZiBmYWxzZSwgdGhlXG4gICAqIGxvYWRlciB3aWxsIHJldHVybiBudWxsIG9yIHRoZWlyIGRlZmF1bHQgdmFsdWUgZm9yIGFueSBmYWlsZWQgcGFyc2Vycy5cbiAgICovXG4gIHN0cmljdD86IGJvb2xlYW5cbn1cblxuZXhwb3J0IHR5cGUgTG9hZGVyRnVuY3Rpb248UGFyc2VycyBleHRlbmRzIFBhcnNlck1hcD4gPSB7XG4gIC8qKlxuICAgKiBMb2FkICYgcGFyc2Ugc2VhcmNoIHBhcmFtcyBmcm9tIChhbG1vc3QpIGFueSBpbnB1dC5cbiAgICpcbiAgICogV2hpbGUgbG9hZGVycyBhcmUgdHlwaWNhbGx5IHVzZWQgaW4gdGhlIGNvbnRleHQgb2YgYSBSZWFjdCBSb3V0ZXIgLyBSZW1peFxuICAgKiBsb2FkZXIgZnVuY3Rpb24sIGl0IGNhbiBhbHNvIGJlIHVzZWQgaW4gTmV4dC5qcyBBUEkgcm91dGVzIG9yXG4gICAqIGdldFNlcnZlclNpZGVQcm9wcyBmdW5jdGlvbnMsIG9yIGV2ZW4gd2l0aCB0aGUgYXBwIHJvdXRlciBgc2VhcmNoUGFyYW1zYFxuICAgKiBwYWdlIHByb3AgKHN5bmMgb3IgYXN5bmMpLCBpZiB5b3UgZG9uJ3QgbmVlZCB0aGUgY2FjaGUgYmVoYXZpb3Vycy5cbiAgICovXG4gIChcbiAgICBpbnB1dDogTG9hZGVySW5wdXQsXG4gICAgb3B0aW9ucz86IExvYWRlckZ1bmN0aW9uT3B0aW9uc1xuICApOiBpbmZlclBhcnNlclR5cGU8UGFyc2Vycz5cbiAgLyoqXG4gICAqIExvYWQgJiBwYXJzZSBzZWFyY2ggcGFyYW1zIGZyb20gKGFsbW9zdCkgYW55IGlucHV0LlxuICAgKlxuICAgKiBXaGlsZSBsb2FkZXJzIGFyZSB0eXBpY2FsbHkgdXNlZCBpbiB0aGUgY29udGV4dCBvZiBhIFJlYWN0IFJvdXRlciAvIFJlbWl4XG4gICAqIGxvYWRlciBmdW5jdGlvbiwgaXQgY2FuIGFsc28gYmUgdXNlZCBpbiBOZXh0LmpzIEFQSSByb3V0ZXMgb3JcbiAgICogZ2V0U2VydmVyU2lkZVByb3BzIGZ1bmN0aW9ucywgb3IgZXZlbiB3aXRoIHRoZSBhcHAgcm91dGVyIGBzZWFyY2hQYXJhbXNgXG4gICAqIHBhZ2UgcHJvcCAoc3luYyBvciBhc3luYyksIGlmIHlvdSBkb24ndCBuZWVkIHRoZSBjYWNoZSBiZWhhdmlvdXJzLlxuICAgKlxuICAgKiBOb3RlOiB0aGlzIGFzeW5jIG92ZXJsb2FkIG1ha2VzIGl0IGVhc2llciB0byB1c2UgYWdhaW5zdCB0aGUgYHNlYXJjaFBhcmFtc2BcbiAgICogcGFnZSBwcm9wIGluIE5leHQuanMgMTUgYXBwIHJvdXRlcjpcbiAgICpcbiAgICogYGBgdHN4XG4gICAqIGV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIFBhZ2UoeyBzZWFyY2hQYXJhbXMgfSkge1xuICAgKiAgIGNvbnN0IHBhcnNlZFNlYXJjaFBhcmFtc1Byb21pc2UgPSBsb2FkU2VhcmNoUGFyYW1zKHNlYXJjaFBhcmFtcylcbiAgICogICByZXR1cm4gKFxuICAgKiAgICAgLy8gUHJlLXJlbmRlciAmIHN0cmVhbSB0aGUgc2hlbGwgaW1tZWRpYXRlbHlcbiAgICogICAgIDxTdGF0aWNTaGVsbD5cbiAgICogICAgICAgPFN1c3BlbnNlPlxuICAgKiAgICAgICAgIC8vIFN0cmVhbSB0aGUgUHJvbWlzZSBkb3duXG4gICAqICAgICAgICAgPER5bmFtaWNDb21wb25lbnQgc2VhcmNoUGFyYW1zPXtwYXJzZWRTZWFyY2hQYXJhbXNQcm9taXNlfSAvPlxuICAgKiAgICAgICA8L1N1c3BlbnNlPlxuICAgKiAgICAgIDwvU3RhdGljU2hlbGw+XG4gICAqICAgKVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgKFxuICAgIGlucHV0OiBQcm9taXNlPExvYWRlcklucHV0PixcbiAgICBvcHRpb25zPzogTG9hZGVyRnVuY3Rpb25PcHRpb25zXG4gICk6IFByb21pc2U8aW5mZXJQYXJzZXJUeXBlPFBhcnNlcnM+PlxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9hZGVyPFBhcnNlcnMgZXh0ZW5kcyBQYXJzZXJNYXA+KFxuICBwYXJzZXJzOiBQYXJzZXJzLFxuICB7IHVybEtleXMgPSB7fSB9OiBDcmVhdGVMb2FkZXJPcHRpb25zPFBhcnNlcnM+ID0ge31cbik6IExvYWRlckZ1bmN0aW9uPFBhcnNlcnM+IHtcbiAgdHlwZSBQYXJzZWRTZWFyY2hQYXJhbXMgPSBpbmZlclBhcnNlclR5cGU8UGFyc2Vycz5cblxuICBmdW5jdGlvbiBsb2FkU2VhcmNoUGFyYW1zKFxuICAgIGlucHV0OiBMb2FkZXJJbnB1dCxcbiAgICBvcHRpb25zPzogTG9hZGVyRnVuY3Rpb25PcHRpb25zXG4gICk6IFBhcnNlZFNlYXJjaFBhcmFtc1xuXG4gIGZ1bmN0aW9uIGxvYWRTZWFyY2hQYXJhbXMoXG4gICAgaW5wdXQ6IFByb21pc2U8TG9hZGVySW5wdXQ+LFxuICAgIG9wdGlvbnM/OiBMb2FkZXJGdW5jdGlvbk9wdGlvbnNcbiAgKTogUHJvbWlzZTxQYXJzZWRTZWFyY2hQYXJhbXM+XG5cbiAgZnVuY3Rpb24gbG9hZFNlYXJjaFBhcmFtcyhcbiAgICBpbnB1dDogTG9hZGVySW5wdXQgfCBQcm9taXNlPExvYWRlcklucHV0PixcbiAgICB7IHN0cmljdCA9IGZhbHNlIH06IExvYWRlckZ1bmN0aW9uT3B0aW9ucyA9IHt9XG4gICkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgIHJldHVybiBpbnB1dC50aGVuKGkgPT4gbG9hZFNlYXJjaFBhcmFtcyhpLCB7IHN0cmljdCB9KSlcbiAgICB9XG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gZXh0cmFjdFNlYXJjaFBhcmFtcyhpbnB1dClcbiAgICBjb25zdCByZXN1bHQgPSB7fSBhcyBhbnlcbiAgICBmb3IgKGNvbnN0IFtrZXksIHBhcnNlcl0gb2YgT2JqZWN0LmVudHJpZXMocGFyc2VycykpIHtcbiAgICAgIGNvbnN0IHVybEtleSA9IHVybEtleXNba2V5XSA/PyBrZXlcbiAgICAgIGNvbnN0IHF1ZXJ5ID1cbiAgICAgICAgcGFyc2VyLnR5cGUgPT09ICdtdWx0aSdcbiAgICAgICAgICA/IHNlYXJjaFBhcmFtcy5nZXRBbGwodXJsS2V5KVxuICAgICAgICAgIDogc2VhcmNoUGFyYW1zLmdldCh1cmxLZXkpXG4gICAgICBpZiAoaXNBYnNlbnRGcm9tVXJsKHF1ZXJ5KSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHBhcnNlci5kZWZhdWx0VmFsdWUgPz8gbnVsbFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgbGV0IHBhcnNlZFZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICAvLyB3ZSBoYXZlIHByb3Blcmx5IG5hcnJvd2VkIGBxdWVyeWAgaGVyZSwgYnV0IFRTIGRvZXNuJ3Qga2VlcCB0cmFjayBvZiB0aGF0XG4gICAgICAgIHBhcnNlZFZhbHVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5IGFzIHN0cmluZyAmIEFycmF5PHN0cmluZz4pXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoc3RyaWN0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFtudXFzXSBFcnJvciB3aGlsZSBwYXJzaW5nIHF1ZXJ5IFxcYCR7cXVlcnl9XFxgIGZvciBrZXkgXFxgJHtrZXl9XFxgOiAke2Vycm9yfWBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VkVmFsdWUgPSBudWxsXG4gICAgICB9XG4gICAgICBpZiAoc3RyaWN0ICYmIHF1ZXJ5ICYmIHBhcnNlZFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgW251cXNdIEZhaWxlZCB0byBwYXJzZSBxdWVyeSBcXGAke3F1ZXJ5fVxcYCBmb3Iga2V5IFxcYCR7a2V5fVxcYCAoZ290IG51bGwpYFxuICAgICAgICApXG4gICAgICB9XG4gICAgICByZXN1bHRba2V5XSA9IHBhcnNlZFZhbHVlID8/IHBhcnNlci5kZWZhdWx0VmFsdWUgPz8gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIGxvYWRTZWFyY2hQYXJhbXNcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFNlYXJjaFBhcmFtcyhpbnB1dDogTG9hZGVySW5wdXQpOiBVUkxTZWFyY2hQYXJhbXMge1xuICB0cnkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICAgIHJldHVybiBpbnB1dC51cmwgPyBuZXcgVVJMKGlucHV0LnVybCkuc2VhcmNoUGFyYW1zIDogbmV3IFVSTFNlYXJjaFBhcmFtcygpXG4gICAgfVxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgcmV0dXJuIGlucHV0LnNlYXJjaFBhcmFtc1xuICAgIH1cbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpIHtcbiAgICAgIHJldHVybiBpbnB1dFxuICAgIH1cbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhpbnB1dCkpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB2IG9mIHZhbHVlKSB7XG4gICAgICAgICAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgdilcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoa2V5LCB2YWx1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNlYXJjaFBhcmFtc1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKFVSTC5oYXNPd25Qcm9wZXJ0eSgnY2FuUGFyc2UnKSAmJiBVUkwuY2FuUGFyc2UoaW5wdXQpKSB7XG4gICAgICAgIHJldHVybiBuZXcgVVJMKGlucHV0KS5zZWFyY2hQYXJhbXNcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKGlucHV0KVxuICAgIH1cbiAgfSBjYXRjaCB7fVxuICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG59XG4iLCJpbXBvcnQgeyB3YXJuIH0gZnJvbSAnLi9kZWJ1ZydcblxuZXhwb3J0IGZ1bmN0aW9uIHNhZmVQYXJzZTxJLCBSPihcbiAgcGFyc2VyOiAoYXJnOiBJKSA9PiBSLFxuICB2YWx1ZTogSSxcbiAga2V5Pzogc3RyaW5nXG4pOiBSIHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBhcnNlcih2YWx1ZSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB3YXJuKFxuICAgICAgJ1tudXFzXSBFcnJvciB3aGlsZSBwYXJzaW5nIHZhbHVlIGAlc2A6ICVPJyArXG4gICAgICAgIChrZXkgPyAnIChmb3Iga2V5IGAlc2ApJyA6ICcnKSxcbiAgICAgIHZhbHVlLFxuICAgICAgZXJyb3IsXG4gICAgICBrZXlcbiAgICApXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBTdGFuZGFyZFNjaGVtYVYxIH0gZnJvbSAnQHN0YW5kYXJkLXNjaGVtYS9zcGVjJ1xuaW1wb3J0IHR5cGUgeyBPcHRpb25zIH0gZnJvbSAnLi9kZWZzJ1xuaW1wb3J0IHsgc2FmZVBhcnNlIH0gZnJvbSAnLi9saWIvc2FmZS1wYXJzZSdcblxudHlwZSBSZXF1aXJlPFQsIEtleXMgZXh0ZW5kcyBrZXlvZiBUPiA9IFBpY2s8UmVxdWlyZWQ8VD4sIEtleXM+ICYgT21pdDxULCBLZXlzPlxuXG5leHBvcnQgdHlwZSBTaW5nbGVQYXJzZXI8VD4gPSB7XG4gIHR5cGU/OiAnc2luZ2xlJ1xuICAvKipcbiAgICogQ29udmVydCBhIHF1ZXJ5IHN0cmluZyB2YWx1ZSBpbnRvIGEgc3RhdGUgdmFsdWUuXG4gICAqXG4gICAqIElmIHRoZSBzdHJpbmcgdmFsdWUgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsaWQgc3RhdGUgdmFsdWUsXG4gICAqIHRoZSBwYXJzZXIgc2hvdWxkIHJldHVybiBgbnVsbGAuIFRocm93aW5nIGFuIGVycm9yIGlzIGFsc28gc3VwcG9ydGVkLlxuICAgKi9cbiAgcGFyc2U6ICh2YWx1ZTogc3RyaW5nKSA9PiBUIHwgbnVsbFxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIHN0YXRlIHZhbHVlIGludG8gYSBxdWVyeSBzdHJpbmcgdmFsdWUuXG4gICAqL1xuICBzZXJpYWxpemU/OiAodmFsdWU6IFQpID0+IHN0cmluZ1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0d28gc3RhdGUgdmFsdWVzIGFyZSBlcXVhbC5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VkIHdoZW4gdXNpbmcgdGhlIGBjbGVhck9uRGVmYXVsdGAgdmFsdWUsIHRvIGNvbXBhcmUgdGhlIGRlZmF1bHRcbiAgICogdmFsdWUgd2l0aCB0aGUgc2V0IHZhbHVlLlxuICAgKlxuICAgKiBJdCBtYWtlcyBzZW5zZSB0byBwcm92aWRlIHRoaXMgZnVuY3Rpb24gd2hlbiB0aGUgc3RhdGUgdmFsdWUgaXMgYW4gb2JqZWN0XG4gICAqIG9yIGFuIGFycmF5LCBhcyB0aGUgZGVmYXVsdCByZWZlcmVudGlhbCBlcXVhbGl0eSBjaGVjayB3aWxsIG5vdCB3b3JrLlxuICAgKi9cbiAgZXE/OiAoYTogVCwgYjogVCkgPT4gYm9vbGVhblxufVxuXG5leHBvcnQgdHlwZSBNdWx0aVBhcnNlcjxUPiA9IHtcbiAgdHlwZTogJ211bHRpJ1xuICBwYXJzZTogKHZhbHVlOiBSZWFkb25seUFycmF5PHN0cmluZz4pID0+IFQgfCBudWxsXG4gIHNlcmlhbGl6ZT86ICh2YWx1ZTogVCkgPT4gQXJyYXk8c3RyaW5nPlxuICBlcT86IChhOiBULCBiOiBUKSA9PiBib29sZWFuXG59XG5cbmV4cG9ydCB0eXBlIEdlbmVyaWNQYXJzZXI8VD4gPSBTaW5nbGVQYXJzZXI8VD4gfCBNdWx0aVBhcnNlcjxUPlxuZXhwb3J0IHR5cGUgR2VuZXJpY1BhcnNlckJ1aWxkZXI8VD4gPVxuICB8IFNpbmdsZVBhcnNlckJ1aWxkZXI8VD5cbiAgfCBNdWx0aVBhcnNlckJ1aWxkZXI8VD5cblxuLyogdHlwZSBhbGlhc2VzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSAqL1xuLyoqIEBkZXByZWNhdGVkIHVzZSBTaW5nbGVQYXJzZXIgaW5zdGVhZCAqL1xuZXhwb3J0IHR5cGUgUGFyc2VyPFQ+ID0gU2luZ2xlUGFyc2VyPFQ+XG4vKiogQGRlcHJlY2F0ZWQgdXNlIFNpbmdsZVBhcnNlckJ1aWxkZXIgaW5zdGVhZCAqL1xuZXhwb3J0IHR5cGUgUGFyc2VyQnVpbGRlcjxUPiA9IFNpbmdsZVBhcnNlckJ1aWxkZXI8VD5cblxuZXhwb3J0IHR5cGUgU2luZ2xlUGFyc2VyQnVpbGRlcjxUPiA9IFJlcXVpcmVkPFNpbmdsZVBhcnNlcjxUPj4gJlxuICBPcHRpb25zICYge1xuICAgIC8qKlxuICAgICAqIFNldCBoaXN0b3J5IHR5cGUsIHNoYWxsb3cgcm91dGluZyBhbmQgc2Nyb2xsIHJlc3RvcmF0aW9uIG9wdGlvbnNcbiAgICAgKiBhdCB0aGUgaG9vayBkZWNsYXJhdGlvbiBsZXZlbC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB5b3UgY2FuIG92ZXJyaWRlIHRob3NlIG9wdGlvbnMgaW4gaW5kaXZpZHVhbCBjYWxscyB0byB0aGVcbiAgICAgKiBzdGF0ZSB1cGRhdGVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHdpdGhPcHRpb25zPFRoaXM+KHRoaXM6IFRoaXMsIG9wdGlvbnM6IE9wdGlvbnMpOiBUaGlzXG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5aW5nIGEgZGVmYXVsdCB2YWx1ZSBtYWtlcyB0aGUgaG9vayBzdGF0ZSBub24tbnVsbGFibGUgd2hlbiB0aGVcbiAgICAgKiBxdWVyeSBpcyBtaXNzaW5nIGZyb20gdGhlIFVSTDogdGhlIGRlZmF1bHQgdmFsdWUgaXMgcmV0dXJuZWQgaW5zdGVhZFxuICAgICAqIG9mIGBudWxsYC5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdGhlIHN0YXRlIHRvIHRoZSBkZWZhdWx0IHZhbHVlwrkgd2lsbCBjbGVhciB0aGUgcXVlcnkgc3RyaW5nIGtleVxuICAgICAqIGZyb20gdGhlIFVSTCwgdW5sZXNzIGBjbGVhck9uRGVmYXVsdGAgaXMgc2V0IHRvIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHRoZSBzdGF0ZSB0byBgbnVsbGAgd2lsbCBhbHdheXMgY2xlYXIgdGhlIHF1ZXJ5IHN0cmluZyBrZXlcbiAgICAgKiBmcm9tIHRoZSBVUkwsIGFuZCByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICpcbiAgICAgKiDCuTogRXF1YWxpdHkgaXMgY2hlY2tlZCB3aXRoIHRoZSBwYXJzZXIncyBgZXFgIGZ1bmN0aW9uLCBvciByZWZlcmVudGlhbFxuICAgICAqIGVxdWFsaXR5IGlmIG5vdCBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWVcbiAgICAgKi9cbiAgICB3aXRoRGVmYXVsdChcbiAgICAgIHRoaXM6IFNpbmdsZVBhcnNlckJ1aWxkZXI8VD4sXG4gICAgICBkZWZhdWx0VmFsdWU6IE5vbk51bGxhYmxlPFQ+XG4gICAgKTogT21pdDxTaW5nbGVQYXJzZXJCdWlsZGVyPFQ+LCAncGFyc2VTZXJ2ZXJTaWRlJz4gJiB7XG4gICAgICByZWFkb25seSBkZWZhdWx0VmFsdWU6IE5vbk51bGxhYmxlPFQ+XG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlIHRoZSBwYXJzZXIgaW4gU2VydmVyIENvbXBvbmVudHNcbiAgICAgICAqXG4gICAgICAgKiBgcGFyc2VgIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgb25seSBieSB0aGUgaG9vaywgYnV0IHlvdSBjYW4gdXNlIHRoaXNcbiAgICAgICAqIG1ldGhvZCB0byBoeWRyYXRlIHF1ZXJ5IHZhbHVlcyBvbiBzZXJ2ZXItc2lkZSByZW5kZXJlZCBwYWdlcy5cbiAgICAgICAqIFNlZSB0aGUgYHNlcnZlci1zaWRlLXBhcnNpbmdgIGRlbW8gZm9yIGFuIGV4YW1wbGUuXG4gICAgICAgKlxuICAgICAgICogTm90ZSB0aGF0IHdoZW4gbXVsdGlwbGUgcXVlcmllcyBhcmUgcHJlc2VudGVkIHRvIHRoZSBwYXJzZXJcbiAgICAgICAqIChlZzogYC8/YT0xJmE9MmApLCBvbmx5IHRoZSAqKmZpcnN0Kiogd2lsbCBiZSBwYXJzZWQsIHRvIG1pbWljIHRoZVxuICAgICAgICogYmVoYXZpb3VyIG9mIFVSTFNlYXJjaFBhcmFtczpcbiAgICAgICAqIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybHNlYXJjaHBhcmFtcy1nZXRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gdmFsdWUgYXMgY29taW5nIGZyb20gcGFnZSBwcm9wc1xuICAgICAgICpcbiAgICAgICAqIEBkZXByZWNhdGVkIHByZWZlciB1c2luZyBsb2FkZXJzIGluc3RlYWQsIGFzIHRoZXkgZW5mb3JjZSBhIHN0cm9uZ1xuICAgICAgICogYm9uZCBiZXR3ZWVuIHRoZSBkYXRhIHR5cGUgYW5kIHRoZSBzZWFyY2ggcGFyYW0ga2V5LlxuICAgICAgICovXG4gICAgICBwYXJzZVNlcnZlclNpZGUodmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkKTogTm9uTnVsbGFibGU8VD5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhlIHBhcnNlciBpbiBTZXJ2ZXIgQ29tcG9uZW50c1xuICAgICAqXG4gICAgICogYHBhcnNlYCBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIG9ubHkgYnkgdGhlIGhvb2ssIGJ1dCB5b3UgY2FuIHVzZSB0aGlzXG4gICAgICogbWV0aG9kIHRvIGh5ZHJhdGUgcXVlcnkgdmFsdWVzIG9uIHNlcnZlci1zaWRlIHJlbmRlcmVkIHBhZ2VzLlxuICAgICAqIFNlZSB0aGUgYHNlcnZlci1zaWRlLXBhcnNpbmdgIGRlbW8gZm9yIGFuIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2hlbiBtdWx0aXBsZSBxdWVyaWVzIGFyZSBwcmVzZW50ZWQgdG8gdGhlIHBhcnNlclxuICAgICAqIChlZzogYC8/YT0xJmE9MmApLCBvbmx5IHRoZSAqKmZpcnN0Kiogd2lsbCBiZSBwYXJzZWQsIHRvIG1pbWljIHRoZVxuICAgICAqIGJlaGF2aW91ciBvZiBVUkxTZWFyY2hQYXJhbXM6XG4gICAgICogaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsc2VhcmNocGFyYW1zLWdldFxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIGFzIGNvbWluZyBmcm9tIHBhZ2UgcHJvcHNcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIHByZWZlciB1c2luZyBsb2FkZXJzIGluc3RlYWQsIGFzIHRoZXkgZW5mb3JjZSBhIHN0cm9uZ1xuICAgICAqIGJvbmQgYmV0d2VlbiB0aGUgZGF0YSB0eXBlIGFuZCB0aGUgc2VhcmNoIHBhcmFtIGtleS5cbiAgICAgKi9cbiAgICBwYXJzZVNlcnZlclNpZGUodmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkKTogVCB8IG51bGxcbiAgfVxuXG5leHBvcnQgdHlwZSBNdWx0aVBhcnNlckJ1aWxkZXI8VD4gPSBSZXF1aXJlZDxNdWx0aVBhcnNlcjxUPj4gJlxuICBPcHRpb25zICYge1xuICAgIHdpdGhPcHRpb25zPFRoaXM+KHRoaXM6IFRoaXMsIG9wdGlvbnM6IE9wdGlvbnMpOiBUaGlzXG4gICAgd2l0aERlZmF1bHQoXG4gICAgICB0aGlzOiBNdWx0aVBhcnNlckJ1aWxkZXI8VD4sXG4gICAgICBkZWZhdWx0VmFsdWU6IE5vbk51bGxhYmxlPFQ+XG4gICAgKTogT21pdDxNdWx0aVBhcnNlckJ1aWxkZXI8VD4sICdwYXJzZVNlcnZlclNpZGUnPiAmIHtcbiAgICAgIHJlYWRvbmx5IGRlZmF1bHRWYWx1ZTogTm9uTnVsbGFibGU8VD5cbiAgICAgIC8qKlxuICAgICAgICogQGRlcHJlY2F0ZWQgZXhwb3NlZCBmb3Igc3ltbWV0cnkgd2l0aCBTaW5nbGVQYXJzZXJCdWlsZGVyIG9ubHksXG4gICAgICAgKiBwcmVmZXIgdXNpbmcgbG9hZGVycyBpbnN0ZWFkLlxuICAgICAgICovXG4gICAgICBwYXJzZVNlcnZlclNpZGUodmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkKTogTm9uTnVsbGFibGU8VD5cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgZXhwb3NlZCBmb3Igc3ltbWV0cnkgd2l0aCBTaW5nbGVQYXJzZXJCdWlsZGVyIG9ubHksXG4gICAgICogcHJlZmVyIHVzaW5nIGxvYWRlcnMgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBwYXJzZVNlcnZlclNpZGUodmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkKTogVCB8IG51bGxcbiAgfVxuXG4vKipcbiAqIFdyYXAgYSBzZXQgb2YgcGFyc2Uvc2VyaWFsaXplIGZ1bmN0aW9ucyBpbnRvIGEgYnVpbGRlciBwYXR0ZXJuIHBhcnNlclxuICogeW91IGNhbiBwYXNzIHRvIG9uZSBvZiB0aGUgaG9va3MsIG1ha2luZyBpdHMgZGVmYXVsdCB2YWx1ZSB0eXBlIHNhZmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQYXJzZXI8VD4oXG4gIHBhcnNlcjogUmVxdWlyZTxTaW5nbGVQYXJzZXI8VD4sICdwYXJzZScgfCAnc2VyaWFsaXplJz5cbik6IFNpbmdsZVBhcnNlckJ1aWxkZXI8VD4ge1xuICBmdW5jdGlvbiBwYXJzZVNlcnZlclNpZGVOdWxsYWJsZSh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10gfCB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAvLyBGb2xsb3cgdGhlIHNwZWM6XG4gICAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmxzZWFyY2hwYXJhbXMtZ2V0XG4gICAgICBpZiAodmFsdWVbMF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgc3RyID0gdmFsdWVbMF1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHN0ciA9IHZhbHVlXG4gICAgfVxuICAgIHJldHVybiBzYWZlUGFyc2UocGFyc2VyLnBhcnNlLCBzdHIpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHR5cGU6ICdzaW5nbGUnLFxuICAgIGVxOiAoYSwgYikgPT4gYSA9PT0gYixcbiAgICAuLi5wYXJzZXIsXG4gICAgcGFyc2VTZXJ2ZXJTaWRlOiBwYXJzZVNlcnZlclNpZGVOdWxsYWJsZSxcbiAgICB3aXRoRGVmYXVsdChkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRoaXMsXG4gICAgICAgIGRlZmF1bHRWYWx1ZSxcbiAgICAgICAgcGFyc2VTZXJ2ZXJTaWRlKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlU2VydmVyU2lkZU51bGxhYmxlKHZhbHVlKSA/PyBkZWZhdWx0VmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgd2l0aE9wdGlvbnMob3B0aW9uczogT3B0aW9ucykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udGhpcyxcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTXVsdGlQYXJzZXI8VD4oXG4gIHBhcnNlcjogT21pdDxSZXF1aXJlPE11bHRpUGFyc2VyPFQ+LCAncGFyc2UnIHwgJ3NlcmlhbGl6ZSc+LCAndHlwZSc+XG4pOiBNdWx0aVBhcnNlckJ1aWxkZXI8VD4ge1xuICBmdW5jdGlvbiBwYXJzZVNlcnZlclNpZGVOdWxsYWJsZSh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10gfCB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHNhZmVQYXJzZShwYXJzZXIucGFyc2UsIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnbXVsdGknLFxuICAgIGVxOiAoYSwgYikgPT4gYSA9PT0gYixcbiAgICAuLi5wYXJzZXIsXG4gICAgcGFyc2VTZXJ2ZXJTaWRlOiBwYXJzZVNlcnZlclNpZGVOdWxsYWJsZSxcbiAgICB3aXRoRGVmYXVsdChkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRoaXMsXG4gICAgICAgIGRlZmF1bHRWYWx1ZSxcbiAgICAgICAgcGFyc2VTZXJ2ZXJTaWRlKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlU2VydmVyU2lkZU51bGxhYmxlKHZhbHVlKSA/PyBkZWZhdWx0VmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgd2l0aE9wdGlvbnMob3B0aW9uczogT3B0aW9ucykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udGhpcyxcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBQYXJzZXJzIGltcGxlbWVudGF0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY29uc3QgcGFyc2VBc1N0cmluZzogU2luZ2xlUGFyc2VyQnVpbGRlcjxzdHJpbmc+ID0gY3JlYXRlUGFyc2VyKHtcbiAgcGFyc2U6IHYgPT4gdixcbiAgc2VyaWFsaXplOiBTdHJpbmdcbn0pXG5cbmV4cG9ydCBjb25zdCBwYXJzZUFzSW50ZWdlcjogU2luZ2xlUGFyc2VyQnVpbGRlcjxudW1iZXI+ID0gY3JlYXRlUGFyc2VyKHtcbiAgcGFyc2U6IHYgPT4ge1xuICAgIGNvbnN0IGludCA9IHBhcnNlSW50KHYpXG4gICAgcmV0dXJuIGludCA9PSBpbnQgPyBpbnQgOiBudWxsIC8vIE5hTiBjaGVjayBhdCBsb3cgYnVuZGxlIHNpemUgY29zdFxuICB9LFxuICBzZXJpYWxpemU6IHYgPT4gJycgKyBNYXRoLnJvdW5kKHYpXG59KVxuXG5leHBvcnQgY29uc3QgcGFyc2VBc0luZGV4OiBTaW5nbGVQYXJzZXJCdWlsZGVyPG51bWJlcj4gPSBjcmVhdGVQYXJzZXIoe1xuICBwYXJzZTogdiA9PiB7XG4gICAgY29uc3QgaW50ID0gcGFyc2VJbnQodilcbiAgICByZXR1cm4gaW50ID09IGludCA/IGludCAtIDEgOiBudWxsIC8vIE5hTiBjaGVjayBhdCBsb3cgYnVuZGxlIHNpemUgY29zdFxuICB9LFxuICBzZXJpYWxpemU6IHYgPT4gJycgKyBNYXRoLnJvdW5kKHYgKyAxKVxufSlcblxuZXhwb3J0IGNvbnN0IHBhcnNlQXNIZXg6IFNpbmdsZVBhcnNlckJ1aWxkZXI8bnVtYmVyPiA9IGNyZWF0ZVBhcnNlcih7XG4gIHBhcnNlOiB2ID0+IHtcbiAgICBjb25zdCBpbnQgPSBwYXJzZUludCh2LCAxNilcbiAgICByZXR1cm4gaW50ID09IGludCA/IGludCA6IG51bGwgLy8gTmFOIGNoZWNrIGF0IGxvdyBidW5kbGUgc2l6ZSBjb3N0XG4gIH0sXG4gIHNlcmlhbGl6ZTogdiA9PiB7XG4gICAgY29uc3QgaGV4ID0gTWF0aC5yb3VuZCh2KS50b1N0cmluZygxNilcbiAgICByZXR1cm4gKGhleC5sZW5ndGggJiAxID8gJzAnIDogJycpICsgaGV4XG4gIH1cbn0pXG5cbmV4cG9ydCBjb25zdCBwYXJzZUFzRmxvYXQ6IFNpbmdsZVBhcnNlckJ1aWxkZXI8bnVtYmVyPiA9IGNyZWF0ZVBhcnNlcih7XG4gIHBhcnNlOiB2ID0+IHtcbiAgICBjb25zdCBmbG9hdCA9IHBhcnNlRmxvYXQodilcbiAgICByZXR1cm4gZmxvYXQgPT0gZmxvYXQgPyBmbG9hdCA6IG51bGwgLy8gTmFOIGNoZWNrIGF0IGxvdyBidW5kbGUgc2l6ZSBjb3N0XG4gIH0sXG4gIHNlcmlhbGl6ZTogU3RyaW5nXG59KVxuXG5leHBvcnQgY29uc3QgcGFyc2VBc0Jvb2xlYW46IFNpbmdsZVBhcnNlckJ1aWxkZXI8Ym9vbGVhbj4gPSBjcmVhdGVQYXJzZXIoe1xuICBwYXJzZTogdiA9PiB2LnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyxcbiAgc2VyaWFsaXplOiBTdHJpbmdcbn0pXG5cbmZ1bmN0aW9uIGNvbXBhcmVEYXRlcyhhOiBEYXRlLCBiOiBEYXRlKSB7XG4gIHJldHVybiBhLnZhbHVlT2YoKSA9PT0gYi52YWx1ZU9mKClcbn1cblxuLyoqXG4gKiBRdWVyeXN0cmluZyBlbmNvZGVkIGFzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIGVwb2NoLFxuICogYW5kIHJldHVybmVkIGFzIGEgRGF0ZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZUFzVGltZXN0YW1wOiBTaW5nbGVQYXJzZXJCdWlsZGVyPERhdGU+ID0gY3JlYXRlUGFyc2VyKHtcbiAgcGFyc2U6IHYgPT4ge1xuICAgIGNvbnN0IG1zID0gcGFyc2VJbnQodilcbiAgICByZXR1cm4gbXMgPT0gbXMgPyBuZXcgRGF0ZShtcykgOiBudWxsIC8vIE5hTiBjaGVjayBhdCBsb3cgYnVuZGxlIHNpemUgY29zdFxuICB9LFxuICBzZXJpYWxpemU6ICh2OiBEYXRlKSA9PiAnJyArIHYudmFsdWVPZigpLFxuICBlcTogY29tcGFyZURhdGVzXG59KVxuXG4vKipcbiAqIFF1ZXJ5c3RyaW5nIGVuY29kZWQgYXMgYW4gSVNPLTg2MDEgc3RyaW5nIChVVEMpLFxuICogYW5kIHJldHVybmVkIGFzIGEgRGF0ZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZUFzSXNvRGF0ZVRpbWU6IFNpbmdsZVBhcnNlckJ1aWxkZXI8RGF0ZT4gPSBjcmVhdGVQYXJzZXIoe1xuICBwYXJzZTogdiA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHYpXG4gICAgLy8gTmFOIGNoZWNrIGF0IGxvdyBidW5kbGUgc2l6ZSBjb3N0XG4gICAgcmV0dXJuIGRhdGUudmFsdWVPZigpID09IGRhdGUudmFsdWVPZigpID8gZGF0ZSA6IG51bGxcbiAgfSxcbiAgc2VyaWFsaXplOiAodjogRGF0ZSkgPT4gdi50b0lTT1N0cmluZygpLFxuICBlcTogY29tcGFyZURhdGVzXG59KVxuXG4vKipcbiAqIFF1ZXJ5c3RyaW5nIGVuY29kZWQgYXMgYW4gSVNPLTg2MDEgc3RyaW5nIChVVEMpXG4gKiB3aXRob3V0IHRoZSB0aW1lIHpvbmUgb2Zmc2V0LCBhbmQgcmV0dXJuZWQgYXNcbiAqIGEgRGF0ZSBvYmplY3QuXG4gKlxuICogVGhlIERhdGUgaXMgcGFyc2VkIHdpdGhvdXQgdGhlIHRpbWUgem9uZSBvZmZzZXQsXG4gKiBtYWtpbmcgaXQgYXQgMDA6MDA6MDAgVVRDLlxuICovXG5leHBvcnQgY29uc3QgcGFyc2VBc0lzb0RhdGU6IFNpbmdsZVBhcnNlckJ1aWxkZXI8RGF0ZT4gPSBjcmVhdGVQYXJzZXIoe1xuICBwYXJzZTogdiA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHYuc2xpY2UoMCwgMTApKVxuICAgIC8vIE5hTiBjaGVjayBhdCBsb3cgYnVuZGxlIHNpemUgY29zdFxuICAgIHJldHVybiBkYXRlLnZhbHVlT2YoKSA9PSBkYXRlLnZhbHVlT2YoKSA/IGRhdGUgOiBudWxsXG4gIH0sXG4gIHNlcmlhbGl6ZTogKHY6IERhdGUpID0+IHYudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCksXG4gIGVxOiBjb21wYXJlRGF0ZXNcbn0pXG5cbi8qKlxuICogU3RyaW5nLWJhc2VkIGVudW1zIHByb3ZpZGUgYmV0dGVyIHR5cGUtc2FmZXR5IGZvciBrbm93biBzZXRzIG9mIHZhbHVlcy5cbiAqIFlvdSB3aWxsIG5lZWQgdG8gcGFzcyB0aGUgcGFyc2VBc1N0cmluZ0VudW0gZnVuY3Rpb24gYSBsaXN0IG9mIHlvdXIgZW51bSB2YWx1ZXNcbiAqIGluIG9yZGVyIHRvIHZhbGlkYXRlIHRoZSBxdWVyeSBzdHJpbmcuIEFueXRoaW5nIGVsc2Ugd2lsbCByZXR1cm4gYG51bGxgLFxuICogb3IgeW91ciBkZWZhdWx0IHZhbHVlIGlmIHNwZWNpZmllZC5cbiAqXG4gKiBFeGFtcGxlOlxuICogYGBgdHNcbiAqIGVudW0gRGlyZWN0aW9uIHtcbiAqICAgdXAgPSAnVVAnLFxuICogICBkb3duID0gJ0RPV04nLFxuICogICBsZWZ0ID0gJ0xFRlQnLFxuICogICByaWdodCA9ICdSSUdIVCdcbiAqIH1cbiAqXG4gKiBjb25zdCBbZGlyZWN0aW9uLCBzZXREaXJlY3Rpb25dID0gdXNlUXVlcnlTdGF0ZShcbiAqICAgJ2RpcmVjdGlvbicsXG4gKiAgICBwYXJzZUFzU3RyaW5nRW51bTxEaXJlY3Rpb24+KE9iamVjdC52YWx1ZXMoRGlyZWN0aW9uKSkgLy8gcGFzcyBhIGxpc3Qgb2YgYWxsb3dlZCB2YWx1ZXNcbiAqICAgICAgLndpdGhEZWZhdWx0KERpcmVjdGlvbi51cClcbiAqIClcbiAqIGBgYFxuICpcbiAqIE5vdGU6IHRoZSBxdWVyeSBzdHJpbmcgdmFsdWUgd2lsbCBiZSB0aGUgdmFsdWUgb2YgdGhlIGVudW0sIG5vdCBpdHMgbmFtZVxuICogKGV4YW1wbGUgYWJvdmU6IGBkaXJlY3Rpb249VVBgKS5cbiAqXG4gKiBAcGFyYW0gdmFsaWRWYWx1ZXMgVGhlIHZhbHVlcyB5b3Ugd2FudCB0byBhY2NlcHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXNTdHJpbmdFbnVtPEVudW0gZXh0ZW5kcyBzdHJpbmc+KFxuICB2YWxpZFZhbHVlczogRW51bVtdXG4pOiBTaW5nbGVQYXJzZXJCdWlsZGVyPEVudW0+IHtcbiAgLy8gRGVsZWdhdGUgaW1wbGVtZW50YXRpb24gdG8gcGFyc2VBc1N0cmluZ0xpdGVyYWwgdG8gYXZvaWQgZHVwbGljYXRpb24uXG4gIHJldHVybiBwYXJzZUFzU3RyaW5nTGl0ZXJhbCh2YWxpZFZhbHVlcyBhcyByZWFkb25seSBFbnVtW10pXG59XG5cbi8qKlxuICogU3RyaW5nLWJhc2VkIGxpdGVyYWxzIHByb3ZpZGUgYmV0dGVyIHR5cGUtc2FmZXR5IGZvciBrbm93biBzZXRzIG9mIHZhbHVlcy5cbiAqIFlvdSB3aWxsIG5lZWQgdG8gcGFzcyB0aGUgcGFyc2VBc1N0cmluZ0xpdGVyYWwgZnVuY3Rpb24gYSBsaXN0IG9mIHlvdXIgc3RyaW5nIHZhbHVlc1xuICogaW4gb3JkZXIgdG8gdmFsaWRhdGUgdGhlIHF1ZXJ5IHN0cmluZy4gQW55dGhpbmcgZWxzZSB3aWxsIHJldHVybiBgbnVsbGAsXG4gKiBvciB5b3VyIGRlZmF1bHQgdmFsdWUgaWYgc3BlY2lmaWVkLlxuICpcbiAqIEV4YW1wbGU6XG4gKiBgYGB0c1xuICogY29uc3QgY29sb3JzID0gW1wicmVkXCIsIFwiZ3JlZW5cIiwgXCJibHVlXCJdIGFzIGNvbnN0XG4gKlxuICogY29uc3QgW2NvbG9yLCBzZXRDb2xvcl0gPSB1c2VRdWVyeVN0YXRlKFxuICogICAnY29sb3InLFxuICogICAgcGFyc2VBc1N0cmluZ0xpdGVyYWwoY29sb3JzKSAvLyBwYXNzIGEgcmVhZG9ubHkgbGlzdCBvZiBhbGxvd2VkIHZhbHVlc1xuICogICAgICAud2l0aERlZmF1bHQoXCJyZWRcIilcbiAqIClcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB2YWxpZFZhbHVlcyBUaGUgdmFsdWVzIHlvdSB3YW50IHRvIGFjY2VwdFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBc1N0cmluZ0xpdGVyYWw8Y29uc3QgTGl0ZXJhbCBleHRlbmRzIHN0cmluZz4oXG4gIHZhbGlkVmFsdWVzOiByZWFkb25seSBMaXRlcmFsW11cbik6IFNpbmdsZVBhcnNlckJ1aWxkZXI8TGl0ZXJhbD4ge1xuICByZXR1cm4gY3JlYXRlUGFyc2VyKHtcbiAgICBwYXJzZTogKHF1ZXJ5OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGFzQ29uc3QgPSBxdWVyeSBhcyB1bmtub3duIGFzIExpdGVyYWxcbiAgICAgIHJldHVybiB2YWxpZFZhbHVlcy5pbmNsdWRlcyhhc0NvbnN0KSA/IGFzQ29uc3QgOiBudWxsXG4gICAgfSxcbiAgICBzZXJpYWxpemU6IFN0cmluZ1xuICB9KVxufVxuXG4vKipcbiAqIE51bWJlci1iYXNlZCBsaXRlcmFscyBwcm92aWRlIGJldHRlciB0eXBlLXNhZmV0eSBmb3Iga25vd24gc2V0cyBvZiB2YWx1ZXMuXG4gKiBZb3Ugd2lsbCBuZWVkIHRvIHBhc3MgdGhlIHBhcnNlQXNOdW1iZXJMaXRlcmFsIGZ1bmN0aW9uIGEgbGlzdCBvZiB5b3VyIG51bWJlciB2YWx1ZXNcbiAqIGluIG9yZGVyIHRvIHZhbGlkYXRlIHRoZSBxdWVyeSBzdHJpbmcuIEFueXRoaW5nIGVsc2Ugd2lsbCByZXR1cm4gYG51bGxgLFxuICogb3IgeW91ciBkZWZhdWx0IHZhbHVlIGlmIHNwZWNpZmllZC5cbiAqXG4gKiBFeGFtcGxlOlxuICogYGBgdHNcbiAqIGNvbnN0IGRpY2VTaWRlcyA9IFsxLCAyLCAzLCA0LCA1LCA2XSBhcyBjb25zdFxuICpcbiAqIGNvbnN0IFtzaWRlLCBzZXRTaWRlXSA9IHVzZVF1ZXJ5U3RhdGUoXG4gKiAgICdzaWRlJyxcbiAqICAgIHBhcnNlQXNOdW1iZXJMaXRlcmFsKGRpY2VTaWRlcykgLy8gcGFzcyBhIHJlYWRvbmx5IGxpc3Qgb2YgYWxsb3dlZCB2YWx1ZXNcbiAqICAgICAgLndpdGhEZWZhdWx0KDQpXG4gKiApXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdmFsaWRWYWx1ZXMgVGhlIHZhbHVlcyB5b3Ugd2FudCB0byBhY2NlcHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXNOdW1iZXJMaXRlcmFsPGNvbnN0IExpdGVyYWwgZXh0ZW5kcyBudW1iZXI+KFxuICB2YWxpZFZhbHVlczogcmVhZG9ubHkgTGl0ZXJhbFtdXG4pOiBTaW5nbGVQYXJzZXJCdWlsZGVyPExpdGVyYWw+IHtcbiAgcmV0dXJuIGNyZWF0ZVBhcnNlcih7XG4gICAgcGFyc2U6IChxdWVyeTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBhc0NvbnN0ID0gcGFyc2VGbG9hdChxdWVyeSkgYXMgdW5rbm93biBhcyBMaXRlcmFsXG4gICAgICBpZiAodmFsaWRWYWx1ZXMuaW5jbHVkZXMoYXNDb25zdCkpIHtcbiAgICAgICAgcmV0dXJuIGFzQ29uc3RcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfSxcbiAgICBzZXJpYWxpemU6IFN0cmluZ1xuICB9KVxufVxuXG4vKipcbiAqIEVuY29kZSBhbnkgb2JqZWN0IHNoYXBlIGludG8gdGhlIHF1ZXJ5c3RyaW5nIHZhbHVlIGFzIEpTT04uXG4gKiBOb3RlOiB5b3UgbWF5IHdhbnQgdG8gdXNlIGB1c2VRdWVyeVN0YXRlc2AgZm9yIGZpbmVyIGNvbnRyb2wgb3ZlclxuICogbXVsdGlwbGUgcmVsYXRlZCBxdWVyeSBrZXlzLlxuICpcbiAqIEBwYXJhbSBydW50aW1lUGFyc2VyIFJ1bnRpbWUgcGFyc2VyIChlZzogWm9kIHNjaGVtYSBvciBTdGFuZGFyZCBTY2hlbWEpIHRvIHZhbGlkYXRlIGFmdGVyIEpTT04ucGFyc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXNKc29uPFQ+KFxuICB2YWxpZGF0b3I6ICgodmFsdWU6IHVua25vd24pID0+IFQgfCBudWxsKSB8IFN0YW5kYXJkU2NoZW1hVjE8VD5cbik6IFNpbmdsZVBhcnNlckJ1aWxkZXI8VD4ge1xuICByZXR1cm4gY3JlYXRlUGFyc2VyKHtcbiAgICBwYXJzZTogcXVlcnkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb2JqID0gSlNPTi5wYXJzZShxdWVyeSlcbiAgICAgICAgaWYgKCd+c3RhbmRhcmQnIGluIHZhbGlkYXRvcikge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvclsnfnN0YW5kYXJkJ10udmFsaWRhdGUob2JqKVxuICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICdbbnVxc10gT25seSBzeW5jaHJvbm91cyBTdGFuZGFyZCBTY2hlbWFzIGFyZSBzdXBwb3J0ZWQgaW4gcGFyc2VBc0pzb24uJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0Lmlzc3VlcyA/IG51bGwgOiByZXN1bHQudmFsdWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsaWRhdG9yKG9iailcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH0sXG4gICAgc2VyaWFsaXplOiB2YWx1ZSA9PiBKU09OLnN0cmluZ2lmeSh2YWx1ZSksXG4gICAgZXEoYSwgYikge1xuICAgICAgLy8gQ2hlY2sgZm9yIHJlZmVyZW50aWFsIGVxdWFsaXR5IGZpcnN0XG4gICAgICByZXR1cm4gYSA9PT0gYiB8fCBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYilcbiAgICB9XG4gIH0pXG59XG5cbi8qKlxuICogQSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBpdGVtcy5cbiAqIEl0ZW1zIGFyZSBVUkktZW5jb2RlZCBmb3Igc2FmZXR5LCBzbyB0aGV5IG1heSBub3QgbG9vayBuaWNlIGluIHRoZSBVUkwuXG4gKlxuICogQHBhcmFtIGl0ZW1QYXJzZXIgUGFyc2VyIGZvciBlYWNoIGluZGl2aWR1YWwgaXRlbSBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSBzZXBhcmF0b3IgVGhlIGNoYXJhY3RlciB0byB1c2UgdG8gc2VwYXJhdGUgaXRlbXMgKGRlZmF1bHQgJywnKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBc0FycmF5T2Y8SXRlbVR5cGU+KFxuICBpdGVtUGFyc2VyOiBTaW5nbGVQYXJzZXI8SXRlbVR5cGU+LFxuICBzZXBhcmF0b3IgPSAnLCdcbik6IFNpbmdsZVBhcnNlckJ1aWxkZXI8SXRlbVR5cGVbXT4ge1xuICBjb25zdCBpdGVtRXEgPSBpdGVtUGFyc2VyLmVxID8/ICgoYTogSXRlbVR5cGUsIGI6IEl0ZW1UeXBlKSA9PiBhID09PSBiKVxuICBjb25zdCBlbmNvZGVkU2VwYXJhdG9yID0gZW5jb2RlVVJJQ29tcG9uZW50KHNlcGFyYXRvcilcbiAgLy8gdG9kbzogSGFuZGxlIGRlZmF1bHQgaXRlbSB2YWx1ZXMgYW5kIG1ha2UgcmV0dXJuIHR5cGUgbm9uLW51bGxhYmxlXG4gIHJldHVybiBjcmVhdGVQYXJzZXIoe1xuICAgIHBhcnNlOiBxdWVyeSA9PiB7XG4gICAgICBpZiAocXVlcnkgPT09ICcnKSB7XG4gICAgICAgIC8vIEVtcHR5IHF1ZXJ5IHNob3VsZCBub3QgZ28gdGhyb3VnaCB0aGUgc3BsaXQvbWFwL2ZpbHRlciBsb2dpYyxcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS80N25nL251cXMvaXNzdWVzLzMyOVxuICAgICAgICByZXR1cm4gW10gYXMgSXRlbVR5cGVbXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHF1ZXJ5XG4gICAgICAgIC5zcGxpdChzZXBhcmF0b3IpXG4gICAgICAgIC5tYXAoKGl0ZW0sIGluZGV4KSA9PlxuICAgICAgICAgIHNhZmVQYXJzZShcbiAgICAgICAgICAgIGl0ZW1QYXJzZXIucGFyc2UsXG4gICAgICAgICAgICBpdGVtLnJlcGxhY2VBbGwoZW5jb2RlZFNlcGFyYXRvciwgc2VwYXJhdG9yKSxcbiAgICAgICAgICAgIGBbJHtpbmRleH1dYFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgICAuZmlsdGVyKHZhbHVlID0+IHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIGFzIEl0ZW1UeXBlW11cbiAgICB9LFxuICAgIHNlcmlhbGl6ZTogdmFsdWVzID0+XG4gICAgICB2YWx1ZXNcbiAgICAgICAgLm1hcDxzdHJpbmc+KHZhbHVlID0+IHtcbiAgICAgICAgICBjb25zdCBzdHIgPSBpdGVtUGFyc2VyLnNlcmlhbGl6ZVxuICAgICAgICAgICAgPyBpdGVtUGFyc2VyLnNlcmlhbGl6ZSh2YWx1ZSlcbiAgICAgICAgICAgIDogU3RyaW5nKHZhbHVlKVxuICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZUFsbChzZXBhcmF0b3IsIGVuY29kZWRTZXBhcmF0b3IpXG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKHNlcGFyYXRvciksXG4gICAgZXEoYSwgYikge1xuICAgICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHRydWUgLy8gUmVmZXJlbnRpYWxseSBzdGFibGVcbiAgICAgIH1cbiAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICByZXR1cm4gYS5ldmVyeSgodmFsdWUsIGluZGV4KSA9PiBpdGVtRXEodmFsdWUsIGJbaW5kZXhdISkpXG4gICAgfVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBc05hdGl2ZUFycmF5T2Y8SXRlbVR5cGU+KFxuICBpdGVtUGFyc2VyOiBTaW5nbGVQYXJzZXI8SXRlbVR5cGU+XG4pOiBSZXR1cm5UeXBlPE11bHRpUGFyc2VyQnVpbGRlcjxJdGVtVHlwZVtdPlsnd2l0aERlZmF1bHQnXT4ge1xuICBjb25zdCBpdGVtRXEgPSBpdGVtUGFyc2VyLmVxID8/ICgoYTogSXRlbVR5cGUsIGI6IEl0ZW1UeXBlKSA9PiBhID09PSBiKVxuICByZXR1cm4gY3JlYXRlTXVsdGlQYXJzZXIoe1xuICAgIHBhcnNlOiBxdWVyeSA9PiB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBxdWVyeVxuICAgICAgICAubWFwKChpdGVtLCBpbmRleCkgPT4gc2FmZVBhcnNlKGl0ZW1QYXJzZXIucGFyc2UsIGl0ZW0sIGBbJHtpbmRleH1dYCkpXG4gICAgICAgIC5maWx0ZXIodmFsdWUgPT4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkgYXMgSXRlbVR5cGVbXVxuICAgICAgcmV0dXJuIHBhcnNlZC5sZW5ndGggPT09IDAgPyBudWxsIDogcGFyc2VkXG4gICAgfSxcbiAgICBzZXJpYWxpemU6IHZhbHVlcyA9PiB7XG4gICAgICAvLyBkZWZlbnNpdmUgY2hlY2sgYmVjYXVzZSB3ZSBwb3RlbnRpYWxseSBnZXQgYSBzaW5nbGUgdmFsdWUgcGFzc2VkIGZyb20gYSBzdGFuZGFyZCBzY2hlbWFcbiAgICAgIGNvbnN0IHNhZmVWYWx1ZXMgPSBBcnJheS5pc0FycmF5KHZhbHVlcykgPyB2YWx1ZXMgOiBbdmFsdWVzXVxuICAgICAgcmV0dXJuIHNhZmVWYWx1ZXMuZmxhdE1hcCh2YWx1ZSA9PiB7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBpdGVtUGFyc2VyLnNlcmlhbGl6ZT8uKHZhbHVlKSA/PyBTdHJpbmcodmFsdWUpXG4gICAgICAgIHJldHVybiB0eXBlb2Ygc2VyaWFsaXplZCA9PT0gJ3N0cmluZycgPyBbc2VyaWFsaXplZF0gOiBbLi4uc2VyaWFsaXplZF1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBlcShhLCBiKSB7XG4gICAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4gdHJ1ZSAvLyBSZWZlcmVudGlhbGx5IHN0YWJsZVxuICAgICAgfVxuICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIHJldHVybiBhLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IGl0ZW1FcSh2YWx1ZSwgYltpbmRleF0hKSlcbiAgICB9XG4gIH0pLndpdGhEZWZhdWx0KFtdKVxufVxuXG50eXBlIGluZmVyU2luZ2xlUGFyc2VyVHlwZTxQYXJzZXI+ID0gUGFyc2VyIGV4dGVuZHMgR2VuZXJpY1BhcnNlckJ1aWxkZXI8XG4gIGluZmVyIFZhbHVlXG4+ICYge1xuICBkZWZhdWx0VmFsdWU6IGluZmVyIFZhbHVlXG59XG4gID8gVmFsdWVcbiAgOiBQYXJzZXIgZXh0ZW5kcyBHZW5lcmljUGFyc2VyQnVpbGRlcjxpbmZlciBWYWx1ZT5cbiAgICA/IFZhbHVlIHwgbnVsbFxuICAgIDogbmV2ZXJcblxudHlwZSBpbmZlclBhcnNlclJlY29yZFR5cGU8XG4gIE1hcCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIEdlbmVyaWNQYXJzZXJCdWlsZGVyPGFueT4+XG4+ID0ge1xuICBbS2V5IGluIGtleW9mIE1hcF06IGluZmVyU2luZ2xlUGFyc2VyVHlwZTxNYXBbS2V5XT5cbn0gJiB7fVxuXG4vKipcbiAqIFR5cGUgaGVscGVyIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcgcmV0dXJuZWQgZGF0YSB0eXBlIG9mIGEgcGFyc2VyXG4gKiBvciBvZiBhbiBvYmplY3QgZGVzY3JpYmluZyBtdWx0aXBsZSBwYXJzZXJzIGFuZCB0aGVpciBhc3NvY2lhdGVkIGtleXMuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IHR5cGUgaW5mZXJQYXJzZXJUeXBlIH0gZnJvbSAnbnVxcycgLy8gb3IgJ251cXMvc2VydmVyJ1xuICpcbiAqIGNvbnN0IGludE51bGxhYmxlID0gcGFyc2VBc0ludGVnZXJcbiAqIGNvbnN0IGludE5vbk51bGwgPSBwYXJzZUFzSW50ZWdlci53aXRoRGVmYXVsdCgwKVxuICpcbiAqIGluZmVyUGFyc2VyVHlwZTx0eXBlb2YgaW50TnVsbGFibGU+IC8vIG51bWJlciB8IG51bGxcbiAqIGluZmVyUGFyc2VyVHlwZTx0eXBlb2YgaW50Tm9uTnVsbD4gLy8gbnVtYmVyXG4gKlxuICogY29uc3QgcGFyc2VycyA9IHtcbiAqICBhOiBwYXJzZUFzSW50ZWdlcixcbiAqICBiOiBwYXJzZUFzQm9vbGVhbi53aXRoRGVmYXVsdChmYWxzZSlcbiAqIH1cbiAqXG4gKiBpbmZlclBhcnNlclR5cGU8dHlwZW9mIHBhcnNlcnM+XG4gKiAvLyB7IGE6IG51bWJlciB8IG51bGwsIGI6IGJvb2xlYW4gfVxuICogYGBgXG4gKi9cbmV4cG9ydCB0eXBlIGluZmVyUGFyc2VyVHlwZTxJbnB1dD4gPVxuICBJbnB1dCBleHRlbmRzIEdlbmVyaWNQYXJzZXJCdWlsZGVyPGFueT5cbiAgICA/IGluZmVyU2luZ2xlUGFyc2VyVHlwZTxJbnB1dD5cbiAgICA6IElucHV0IGV4dGVuZHMgUmVjb3JkPHN0cmluZywgR2VuZXJpY1BhcnNlckJ1aWxkZXI8YW55Pj5cbiAgICAgID8gaW5mZXJQYXJzZXJSZWNvcmRUeXBlPElucHV0PlxuICAgICAgOiBuZXZlclxuXG5leHBvcnQgdHlwZSBQYXJzZXJXaXRoT3B0aW9uYWxEZWZhdWx0PFQ+ID0gR2VuZXJpY1BhcnNlckJ1aWxkZXI8VD4gJiB7XG4gIGRlZmF1bHRWYWx1ZT86IFRcbn1cbmV4cG9ydCB0eXBlIFBhcnNlck1hcCA9IFJlY29yZDxzdHJpbmcsIFBhcnNlcldpdGhPcHRpb25hbERlZmF1bHQ8YW55Pj5cbiIsImltcG9ydCB0eXBlIHsgTnVsbGFibGUsIE9wdGlvbnMsIFVybEtleXMgfSBmcm9tICcuL2RlZnMnXG5pbXBvcnQgeyByZW5kZXJRdWVyeVN0cmluZyB9IGZyb20gJy4vbGliL3VybC1lbmNvZGluZydcbmltcG9ydCB0eXBlIHsgaW5mZXJQYXJzZXJUeXBlLCBQYXJzZXJNYXAgfSBmcm9tICcuL3BhcnNlcnMnXG5pbXBvcnQgeyB3cml0ZSB9IGZyb20gJy4vbGliL3NlYXJjaC1wYXJhbXMnXG5cbnR5cGUgQmFzZSA9IHN0cmluZyB8IFVSTFNlYXJjaFBhcmFtcyB8IFVSTFxuXG5leHBvcnQgdHlwZSBDcmVhdGVTZXJpYWxpemVyT3B0aW9uczxQYXJzZXJzIGV4dGVuZHMgUGFyc2VyTWFwPiA9IFBpY2s8XG4gIE9wdGlvbnMsXG4gICdjbGVhck9uRGVmYXVsdCdcbj4gJiB7XG4gIHVybEtleXM/OiBVcmxLZXlzPFBhcnNlcnM+XG4gIHByb2Nlc3NVcmxTZWFyY2hQYXJhbXM/OiAoc2VhcmNoUGFyYW1zOiBVUkxTZWFyY2hQYXJhbXMpID0+IFVSTFNlYXJjaFBhcmFtc1xufVxuXG50eXBlIFNlcmlhbGl6ZUZ1bmN0aW9uPFxuICBQYXJzZXJzIGV4dGVuZHMgUGFyc2VyTWFwLFxuICBCYXNlVHlwZSBleHRlbmRzIEJhc2UgPSBCYXNlLFxuICBSZXR1cm4gPSBzdHJpbmdcbj4gPSB7XG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHF1ZXJ5IHN0cmluZyBmb3IgdGhlIGdpdmVuIHZhbHVlcy5cbiAgICovXG4gICh2YWx1ZXM6IFBhcnRpYWw8TnVsbGFibGU8aW5mZXJQYXJzZXJUeXBlPFBhcnNlcnM+Pj4pOiBSZXR1cm5cbiAgLyoqXG4gICAqIEFwcGVuZC9hbWVuZCB0aGUgcXVlcnkgc3RyaW5nIG9mIHRoZSBnaXZlbiBiYXNlIHdpdGggdGhlIGdpdmVuIHZhbHVlcy5cbiAgICpcbiAgICogRXhpc3Rpbmcgc2VhcmNoIHBhcmFtIHZhbHVlcyB3aWxsIGtlcHQsIHVubGVzczpcbiAgICogLSB0aGUgdmFsdWUgaXMgbnVsbCwgaW4gd2hpY2ggY2FzZSB0aGUgc2VhcmNoIHBhcmFtIHdpbGwgYmUgZGVsZXRlZFxuICAgKiAtIGFub3RoZXIgdmFsdWUgaXMgZ2l2ZW4gZm9yIGFuIGV4aXN0aW5nIGtleSwgaW4gd2hpY2ggY2FzZSB0aGVcbiAgICogIHNlYXJjaCBwYXJhbSB3aWxsIGJlIHVwZGF0ZWRcbiAgICovXG4gIChcbiAgICBiYXNlOiBCYXNlVHlwZSxcbiAgICB2YWx1ZXM6IFBhcnRpYWw8TnVsbGFibGU8aW5mZXJQYXJzZXJUeXBlPFBhcnNlcnM+Pj4gfCBudWxsXG4gICk6IFJldHVyblxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VyaWFsaXplcjxcbiAgUGFyc2VycyBleHRlbmRzIFBhcnNlck1hcCxcbiAgQmFzZVR5cGUgZXh0ZW5kcyBCYXNlID0gQmFzZSxcbiAgUmV0dXJuID0gc3RyaW5nXG4+KFxuICBwYXJzZXJzOiBQYXJzZXJzLFxuICB7XG4gICAgY2xlYXJPbkRlZmF1bHQgPSB0cnVlLFxuICAgIHVybEtleXMgPSB7fSxcbiAgICBwcm9jZXNzVXJsU2VhcmNoUGFyYW1zXG4gIH06IENyZWF0ZVNlcmlhbGl6ZXJPcHRpb25zPFBhcnNlcnM+ID0ge31cbik6IFNlcmlhbGl6ZUZ1bmN0aW9uPFBhcnNlcnMsIEJhc2VUeXBlLCBSZXR1cm4+IHtcbiAgdHlwZSBWYWx1ZXMgPSBQYXJ0aWFsPE51bGxhYmxlPGluZmVyUGFyc2VyVHlwZTxQYXJzZXJzPj4+XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgcXVlcnkgc3RyaW5nIGZvciB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgKi9cbiAgZnVuY3Rpb24gc2VyaWFsaXplKHZhbHVlczogVmFsdWVzKTogUmV0dXJuXG4gIC8qKlxuICAgKiBBcHBlbmQvYW1lbmQgdGhlIHF1ZXJ5IHN0cmluZyBvZiB0aGUgZ2l2ZW4gYmFzZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAqXG4gICAqIEV4aXN0aW5nIHNlYXJjaCBwYXJhbSB2YWx1ZXMgd2lsbCBrZXB0LCB1bmxlc3M6XG4gICAqIC0gdGhlIHZhbHVlIGlzIG51bGwsIGluIHdoaWNoIGNhc2UgdGhlIHNlYXJjaCBwYXJhbSB3aWxsIGJlIGRlbGV0ZWRcbiAgICogLSBhbm90aGVyIHZhbHVlIGlzIGdpdmVuIGZvciBhbiBleGlzdGluZyBrZXksIGluIHdoaWNoIGNhc2UgdGhlXG4gICAqICBzZWFyY2ggcGFyYW0gd2lsbCBiZSB1cGRhdGVkXG4gICAqL1xuICBmdW5jdGlvbiBzZXJpYWxpemUoYmFzZTogQmFzZVR5cGUsIHZhbHVlczogVmFsdWVzIHwgbnVsbCk6IFJldHVyblxuICBmdW5jdGlvbiBzZXJpYWxpemUoXG4gICAgYXJnMUJhc2VPclZhbHVlczogQmFzZVR5cGUgfCBWYWx1ZXMsXG4gICAgYXJnMnZhbHVlczogVmFsdWVzIHwgbnVsbCA9IHt9XG4gICkge1xuICAgIGxldCBbYmFzZSwgc2VhcmNoXSA9IGlzQmFzZTxCYXNlVHlwZT4oYXJnMUJhc2VPclZhbHVlcylcbiAgICAgID8gc3BsaXRCYXNlKGFyZzFCYXNlT3JWYWx1ZXMpXG4gICAgICA6IFsnJywgbmV3IFVSTFNlYXJjaFBhcmFtcygpXVxuICAgIGNvbnN0IHZhbHVlcyA9IGlzQmFzZShhcmcxQmFzZU9yVmFsdWVzKSA/IGFyZzJ2YWx1ZXMgOiBhcmcxQmFzZU9yVmFsdWVzXG4gICAgaWYgKHZhbHVlcyA9PT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcGFyc2Vycykge1xuICAgICAgICBjb25zdCB1cmxLZXkgPSB1cmxLZXlzW2tleV0gPz8ga2V5XG4gICAgICAgIHNlYXJjaC5kZWxldGUodXJsS2V5KVxuICAgICAgfVxuICAgICAgaWYgKHByb2Nlc3NVcmxTZWFyY2hQYXJhbXMpIHtcbiAgICAgICAgc2VhcmNoID0gcHJvY2Vzc1VybFNlYXJjaFBhcmFtcyhzZWFyY2gpXG4gICAgICB9XG4gICAgICByZXR1cm4gKGJhc2UgKyByZW5kZXJRdWVyeVN0cmluZyhzZWFyY2gpKSBhcyBSZXR1cm5cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcGFyc2Vycykge1xuICAgICAgY29uc3QgcGFyc2VyID0gcGFyc2Vyc1trZXldXG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1trZXldXG4gICAgICBpZiAoIXBhcnNlciB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCB1cmxLZXkgPSB1cmxLZXlzW2tleV0gPz8ga2V5XG4gICAgICBjb25zdCBpc01hdGNoaW5nRGVmYXVsdCA9XG4gICAgICAgIHBhcnNlci5kZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAocGFyc2VyLmVxID8/ICgoYSwgYikgPT4gYSA9PT0gYikpKHZhbHVlLCBwYXJzZXIuZGVmYXVsdFZhbHVlKVxuXG4gICAgICBpZiAoXG4gICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICgocGFyc2VyLmNsZWFyT25EZWZhdWx0ID8/IGNsZWFyT25EZWZhdWx0ID8/IHRydWUpICYmIGlzTWF0Y2hpbmdEZWZhdWx0KVxuICAgICAgKSB7XG4gICAgICAgIHNlYXJjaC5kZWxldGUodXJsS2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHBhcnNlci5zZXJpYWxpemUodmFsdWUpXG4gICAgICAgIHNlYXJjaCA9IHdyaXRlKHNlcmlhbGl6ZWQsIHVybEtleSwgc2VhcmNoKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc1VybFNlYXJjaFBhcmFtcykge1xuICAgICAgc2VhcmNoID0gcHJvY2Vzc1VybFNlYXJjaFBhcmFtcyhzZWFyY2gpXG4gICAgfVxuICAgIHJldHVybiBiYXNlICsgcmVuZGVyUXVlcnlTdHJpbmcoc2VhcmNoKVxuICB9XG4gIHJldHVybiBzZXJpYWxpemVcbn1cblxuZnVuY3Rpb24gaXNCYXNlPEJhc2VUeXBlPihiYXNlOiBhbnkpOiBiYXNlIGlzIEJhc2VUeXBlIHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgYmFzZSA9PT0gJ3N0cmluZycgfHxcbiAgICBiYXNlIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zIHx8XG4gICAgYmFzZSBpbnN0YW5jZW9mIFVSTFxuICApXG59XG5cbmZ1bmN0aW9uIHNwbGl0QmFzZTxCYXNlVHlwZSBleHRlbmRzIEJhc2U+KGJhc2U6IEJhc2VUeXBlKSB7XG4gIGlmICh0eXBlb2YgYmFzZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBbcGF0aCA9ICcnLCAuLi5zZWFyY2hdID0gYmFzZS5zcGxpdCgnPycpXG4gICAgcmV0dXJuIFtwYXRoLCBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaC5qb2luKCc/JykpXSBhcyBjb25zdFxuICB9IGVsc2UgaWYgKGJhc2UgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpIHtcbiAgICByZXR1cm4gWycnLCBuZXcgVVJMU2VhcmNoUGFyYW1zKGJhc2UpXSBhcyBjb25zdCAvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBVUkxTZWFyY2hQYXJhbXMsIGFzIGRlcml2ZWQgY2xhc3NlcyBtYXkgcmVzdHJpY3QgaXRzIGFsbG93ZWQgbWV0aG9kc1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXG4gICAgICBiYXNlLm9yaWdpbiArIGJhc2UucGF0aG5hbWUsXG4gICAgICBuZXcgVVJMU2VhcmNoUGFyYW1zKGJhc2Uuc2VhcmNoUGFyYW1zKVxuICAgIF0gYXMgY29uc3RcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBTdGFuZGFyZFNjaGVtYVYxIH0gZnJvbSAnQHN0YW5kYXJkLXNjaGVtYS9zcGVjJ1xuaW1wb3J0IHsgY3JlYXRlTG9hZGVyLCB0eXBlIENyZWF0ZUxvYWRlck9wdGlvbnMgfSBmcm9tICcuL2xvYWRlcidcbmltcG9ydCB0eXBlIHsgUGFyc2VyTWFwLCBpbmZlclBhcnNlclR5cGUgfSBmcm9tICcuL3BhcnNlcnMnXG5pbXBvcnQgeyBjcmVhdGVTZXJpYWxpemVyIH0gZnJvbSAnLi9zZXJpYWxpemVyJ1xuXG5leHBvcnQgdHlwZSBDcmVhdGVTdGFuZGFyZFNjaGVtYVYxT3B0aW9uczxcbiAgUGFyc2VycyBleHRlbmRzIFBhcnNlck1hcCxcbiAgUGFydGlhbE91dHB1dCBleHRlbmRzIGJvb2xlYW4gPSBmYWxzZVxuPiA9IENyZWF0ZUxvYWRlck9wdGlvbnM8UGFyc2Vycz4gJiB7XG4gIC8qKlxuICAgKiBNYXJrcyB0aGUgb3V0cHV0IHR5cGUgYXMgUGFydGlhbCwgYW5kIHJlbW92ZXMgYW55IGtleXNcbiAgICogZnJvbSB0aGUgb3V0cHV0IHRoYXQgYXJlIG5vdCBwcmVzZW50IGluIHRoZSBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIFRhblN0YWNrIFJvdXRlciwgdG8gYXZvaWQgcmVmbGVjdGluZyBkZWZhdWx0IHZhbHVlc1xuICAgKiAob3IgbnVsbCkgaW4gdGhlIFVSTCwgYW5kIHRvIG1ha2Ugc2VhcmNoIHBhcmFtcyBvcHRpb25hbCBpbiBMaW5rcyxcbiAgICogYXMgZGVmYXVsdCB2YWx1ZXMgYXJlIGhhbmRsZWQgYnkgbnVxcy5cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHBhcnRpYWxPdXRwdXQ/OiBQYXJ0aWFsT3V0cHV0XG59XG5cbnR5cGUgTWF5YmVQYXJ0aWFsPENvbmRpdGlvbiwgVHlwZT4gPSBDb25kaXRpb24gZXh0ZW5kcyB0cnVlXG4gID8gUGFydGlhbDxUeXBlPlxuICA6IFR5cGVcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0YW5kYXJkU2NoZW1hVjE8XG4gIFBhcnNlcnMgZXh0ZW5kcyBQYXJzZXJNYXAsXG4gIFBhcnRpYWxPdXRwdXQgZXh0ZW5kcyBib29sZWFuID0gZmFsc2Vcbj4oXG4gIHBhcnNlcnM6IFBhcnNlcnMsXG4gIHtcbiAgICB1cmxLZXlzLFxuICAgIHBhcnRpYWxPdXRwdXQgPSBmYWxzZSBhcyBQYXJ0aWFsT3V0cHV0XG4gIH06IENyZWF0ZVN0YW5kYXJkU2NoZW1hVjFPcHRpb25zPFBhcnNlcnMsIFBhcnRpYWxPdXRwdXQ+ID0ge31cbik6IFN0YW5kYXJkU2NoZW1hVjE8TWF5YmVQYXJ0aWFsPFBhcnRpYWxPdXRwdXQsIGluZmVyUGFyc2VyVHlwZTxQYXJzZXJzPj4+IHtcbiAgY29uc3Qgc2VyaWFsaXplID0gY3JlYXRlU2VyaWFsaXplcihwYXJzZXJzLCB7IHVybEtleXMgfSlcbiAgY29uc3QgbG9hZCA9IGNyZWF0ZUxvYWRlcihwYXJzZXJzLCB7IHVybEtleXMgfSlcbiAgcmV0dXJuIHtcbiAgICAnfnN0YW5kYXJkJzoge1xuICAgICAgdmVyc2lvbjogMSxcbiAgICAgIHZlbmRvcjogJ251cXMnLFxuICAgICAgdmFsaWRhdGUoaW5wdXQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cmwgPSBzZXJpYWxpemUoaW5wdXQgYXMgYW55KVxuICAgICAgICAgIGNvbnN0IHZhbHVlID0gbG9hZCh1cmwsIHsgc3RyaWN0OiB0cnVlIH0pXG4gICAgICAgICAgaWYgKHBhcnRpYWxPdXRwdXQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmICghKGtleSBpbiAoaW5wdXQgYXMgYW55KSkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdmFsdWVba2V5XVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IHZhbHVlIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRW1pdHRlciwgdHlwZSBFbWl0dGVyIH0gZnJvbSAnLi9lbWl0dGVyJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeSB9IGZyb20gJy4vc2VhcmNoLXBhcmFtcydcblxuZXhwb3J0IHR5cGUgQ3Jvc3NIb29rU3luY1BheWxvYWQgPSB7XG4gIHN0YXRlOiBhbnlcbiAgcXVlcnk6IFF1ZXJ5IHwgbnVsbFxufVxuXG50eXBlIEV2ZW50TWFwID0ge1xuICBba2V5OiBzdHJpbmddOiBDcm9zc0hvb2tTeW5jUGF5bG9hZFxufVxuXG5leHBvcnQgY29uc3QgZW1pdHRlcjogRW1pdHRlcjxFdmVudE1hcD4gPSBjcmVhdGVFbWl0dGVyKClcbiIsImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZUlkLCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQge1xuICB1c2VBZGFwdGVyLFxuICB1c2VBZGFwdGVyRGVmYXVsdE9wdGlvbnMsXG4gIHVzZUFkYXB0ZXJQcm9jZXNzVXJsU2VhcmNoUGFyYW1zXG59IGZyb20gJy4vYWRhcHRlcnMvbGliL2NvbnRleHQnXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlLCBPcHRpb25zLCBVcmxLZXlzIH0gZnJvbSAnLi9kZWZzJ1xuaW1wb3J0IHsgY29tcGFyZVF1ZXJ5IH0gZnJvbSAnLi9saWIvY29tcGFyZSdcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi9saWIvZGVidWcnXG5pbXBvcnQgeyBlcnJvciB9IGZyb20gJy4vbGliL2Vycm9ycydcbmltcG9ydCB7IGRlYm91bmNlQ29udHJvbGxlciB9IGZyb20gJy4vbGliL3F1ZXVlcy9kZWJvdW5jZSdcbmltcG9ydCB7IGRlZmF1bHRSYXRlTGltaXQgfSBmcm9tICcuL2xpYi9xdWV1ZXMvcmF0ZS1saW1pdGluZydcbmltcG9ydCB7XG4gIGdsb2JhbFRocm90dGxlUXVldWUsXG4gIHR5cGUgVXBkYXRlUXVldWVQdXNoQXJnc1xufSBmcm9tICcuL2xpYi9xdWV1ZXMvdGhyb3R0bGUnXG5pbXBvcnQgeyBzYWZlUGFyc2UgfSBmcm9tICcuL2xpYi9zYWZlLXBhcnNlJ1xuaW1wb3J0IHsgaXNBYnNlbnRGcm9tVXJsLCB0eXBlIFF1ZXJ5IH0gZnJvbSAnLi9saWIvc2VhcmNoLXBhcmFtcydcbmltcG9ydCB7IGVtaXR0ZXIsIHR5cGUgQ3Jvc3NIb29rU3luY1BheWxvYWQgfSBmcm9tICcuL2xpYi9zeW5jJ1xuaW1wb3J0IHsgdHlwZSBHZW5lcmljUGFyc2VyIH0gZnJvbSAnLi9wYXJzZXJzJ1xuXG50eXBlIEtleU1hcFZhbHVlPFR5cGU+ID0gR2VuZXJpY1BhcnNlcjxUeXBlPiAmXG4gIE9wdGlvbnMgJiB7XG4gICAgZGVmYXVsdFZhbHVlPzogVHlwZVxuICB9XG5cbmV4cG9ydCB0eXBlIFVzZVF1ZXJ5U3RhdGVzS2V5c01hcDxNYXAgPSBhbnk+ID0ge1xuICBbS2V5IGluIGtleW9mIE1hcF06IEtleU1hcFZhbHVlPE1hcFtLZXldPlxufSAmIHt9XG5cbmV4cG9ydCB0eXBlIFVzZVF1ZXJ5U3RhdGVzT3B0aW9uczxLZXlNYXAgZXh0ZW5kcyBVc2VRdWVyeVN0YXRlc0tleXNNYXA+ID1cbiAgT3B0aW9ucyAmIHtcbiAgICB1cmxLZXlzOiBVcmxLZXlzPEtleU1hcD5cbiAgfVxuXG5leHBvcnQgdHlwZSBWYWx1ZXM8VCBleHRlbmRzIFVzZVF1ZXJ5U3RhdGVzS2V5c01hcD4gPSB7XG4gIFtLIGluIGtleW9mIFRdOiBUW0tdWydkZWZhdWx0VmFsdWUnXSBleHRlbmRzIE5vbk51bGxhYmxlPFxuICAgIFJldHVyblR5cGU8VFtLXVsncGFyc2UnXT5cbiAgPlxuICAgID8gTm9uTnVsbGFibGU8UmV0dXJuVHlwZTxUW0tdWydwYXJzZSddPj5cbiAgICA6IFJldHVyblR5cGU8VFtLXVsncGFyc2UnXT4gfCBudWxsXG59XG50eXBlIE51bGxhYmxlVmFsdWVzPFQgZXh0ZW5kcyBVc2VRdWVyeVN0YXRlc0tleXNNYXA+ID0gTnVsbGFibGU8VmFsdWVzPFQ+PlxuXG50eXBlIFVwZGF0ZXJGbjxUIGV4dGVuZHMgVXNlUXVlcnlTdGF0ZXNLZXlzTWFwPiA9IChcbiAgb2xkOiBWYWx1ZXM8VD5cbikgPT4gUGFydGlhbDxOdWxsYWJsZTxWYWx1ZXM8VD4+PiB8IG51bGxcblxuZXhwb3J0IHR5cGUgU2V0VmFsdWVzPFQgZXh0ZW5kcyBVc2VRdWVyeVN0YXRlc0tleXNNYXA+ID0gKFxuICB2YWx1ZXM6IFBhcnRpYWw8TnVsbGFibGU8VmFsdWVzPFQ+Pj4gfCBVcGRhdGVyRm48VD4gfCBudWxsLFxuICBvcHRpb25zPzogT3B0aW9uc1xuKSA9PiBQcm9taXNlPFVSTFNlYXJjaFBhcmFtcz5cblxuZXhwb3J0IHR5cGUgVXNlUXVlcnlTdGF0ZXNSZXR1cm48VCBleHRlbmRzIFVzZVF1ZXJ5U3RhdGVzS2V5c01hcD4gPSBbXG4gIFZhbHVlczxUPixcbiAgU2V0VmFsdWVzPFQ+XG5dXG5cbi8vIEVuc3VyZSByZWZlcmVudGlhbCBjb25zaXN0ZW5jeSBmb3IgdGhlIGRlZmF1bHQgdmFsdWUgb2YgdXJsS2V5c1xuLy8gYnkgaG9pc3RpbmcgaXQgb3V0IG9mIHRoZSBmdW5jdGlvbiBzY29wZS5cbi8vIE90aGVyd2lzZSB1c2VFZmZlY3QgbG9vcHMgZ28gYnJycnJcbmNvbnN0IGRlZmF1bHRVcmxLZXlzID0ge31cblxuLyoqXG4gKiBTeW5jaHJvbmlzZSBtdWx0aXBsZSBxdWVyeSBzdHJpbmcgYXJndW1lbnRzIHRvIFJlYWN0IHN0YXRlIGluIE5leHQuanNcbiAqXG4gKiBAcGFyYW0ga2V5cyAtIEFuIG9iamVjdCBkZXNjcmliaW5nIHRoZSBrZXlzIHRvIHN5bmNocm9uaXNlIGFuZCBob3cgdG9cbiAqICAgICAgICAgICAgICAgc2VyaWFsaXNlIGFuZCBwYXJzZSB0aGVtLlxuICogICAgICAgICAgICAgICBVc2UgYHBhcnNlQXMoU3RyaW5nfEludGVnZXJ8RmxvYXR8Li4uKWAgZm9yIHF1aWNrIHNob3J0aGFuZHMuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIGhpc3RvcnkgbW9kZSwgc2hhbGxvdyByb3V0aW5nIGFuZCBzY3JvbGwgcmVzdG9yYXRpb24gb3B0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVF1ZXJ5U3RhdGVzPEtleU1hcCBleHRlbmRzIFVzZVF1ZXJ5U3RhdGVzS2V5c01hcD4oXG4gIGtleU1hcDogS2V5TWFwLFxuICBvcHRpb25zOiBQYXJ0aWFsPFVzZVF1ZXJ5U3RhdGVzT3B0aW9uczxLZXlNYXA+PiA9IHt9XG4pOiBVc2VRdWVyeVN0YXRlc1JldHVybjxLZXlNYXA+IHtcbiAgY29uc3QgaG9va0lkID0gdXNlSWQoKVxuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHVzZUFkYXB0ZXJEZWZhdWx0T3B0aW9ucygpXG4gIGNvbnN0IHByb2Nlc3NVcmxTZWFyY2hQYXJhbXMgPSB1c2VBZGFwdGVyUHJvY2Vzc1VybFNlYXJjaFBhcmFtcygpXG5cbiAgY29uc3Qge1xuICAgIGhpc3RvcnkgPSAncmVwbGFjZScsXG4gICAgc2Nyb2xsID0gZGVmYXVsdE9wdGlvbnM/LnNjcm9sbCA/PyBmYWxzZSxcbiAgICBzaGFsbG93ID0gZGVmYXVsdE9wdGlvbnM/LnNoYWxsb3cgPz8gdHJ1ZSxcbiAgICB0aHJvdHRsZU1zID0gZGVmYXVsdFJhdGVMaW1pdC50aW1lTXMsXG4gICAgbGltaXRVcmxVcGRhdGVzID0gZGVmYXVsdE9wdGlvbnM/LmxpbWl0VXJsVXBkYXRlcyxcbiAgICBjbGVhck9uRGVmYXVsdCA9IGRlZmF1bHRPcHRpb25zPy5jbGVhck9uRGVmYXVsdCA/PyB0cnVlLFxuICAgIHN0YXJ0VHJhbnNpdGlvbixcbiAgICB1cmxLZXlzID0gZGVmYXVsdFVybEtleXMgYXMgVXJsS2V5czxLZXlNYXA+XG4gIH0gPSBvcHRpb25zXG5cbiAgdHlwZSBWID0gTnVsbGFibGVWYWx1ZXM8S2V5TWFwPlxuICBjb25zdCBzdGF0ZUtleXMgPSBPYmplY3Qua2V5cyhrZXlNYXApLmpvaW4oJywnKVxuICBjb25zdCByZXNvbHZlZFVybEtleXMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5rZXlzKGtleU1hcCkubWFwKGtleSA9PiBba2V5LCB1cmxLZXlzW2tleV0gPz8ga2V5XSlcbiAgICAgICksXG4gICAgW3N0YXRlS2V5cywgSlNPTi5zdHJpbmdpZnkodXJsS2V5cyldXG4gIClcbiAgY29uc3QgYWRhcHRlciA9IHVzZUFkYXB0ZXIoT2JqZWN0LnZhbHVlcyhyZXNvbHZlZFVybEtleXMpKVxuICBjb25zdCBpbml0aWFsU2VhcmNoUGFyYW1zID0gYWRhcHRlci5zZWFyY2hQYXJhbXNcbiAgY29uc3QgcXVlcnlSZWYgPSB1c2VSZWY8UmVjb3JkPHN0cmluZywgUXVlcnkgfCBudWxsPj4oe30pXG4gIGNvbnN0IGRlZmF1bHRWYWx1ZXMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5rZXlzKGtleU1hcCkubWFwKGtleSA9PiBba2V5LCBrZXlNYXBba2V5XSEuZGVmYXVsdFZhbHVlID8/IG51bGxdKVxuICAgICAgKSBhcyBWYWx1ZXM8S2V5TWFwPixcbiAgICBbXG4gICAgICBPYmplY3QudmFsdWVzKGtleU1hcClcbiAgICAgICAgLm1hcCgoeyBkZWZhdWx0VmFsdWUgfSkgPT4gZGVmYXVsdFZhbHVlKVxuICAgICAgICAuam9pbignLCcpXG4gICAgXVxuICApXG4gIGNvbnN0IHF1ZXVlZFF1ZXJpZXMgPSBkZWJvdW5jZUNvbnRyb2xsZXIudXNlUXVldWVkUXVlcmllcyhcbiAgICBPYmplY3QudmFsdWVzKHJlc29sdmVkVXJsS2V5cylcbiAgKVxuICBjb25zdCBbaW50ZXJuYWxTdGF0ZSwgc2V0SW50ZXJuYWxTdGF0ZV0gPSB1c2VTdGF0ZTxWPigoKSA9PiB7XG4gICAgY29uc3Qgc291cmNlID0gaW5pdGlhbFNlYXJjaFBhcmFtcyA/PyBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICByZXR1cm4gcGFyc2VNYXAoa2V5TWFwLCB1cmxLZXlzLCBzb3VyY2UsIHF1ZXVlZFF1ZXJpZXMpLnN0YXRlXG4gIH0pXG5cbiAgY29uc3Qgc3RhdGVSZWYgPSB1c2VSZWYoaW50ZXJuYWxTdGF0ZSlcbiAgZGVidWcoXG4gICAgJ1tudXErICVzIGAlc2BdIHJlbmRlciAtIHN0YXRlOiAlTywgaVNQOiAlcycsXG4gICAgaG9va0lkLFxuICAgIHN0YXRlS2V5cyxcbiAgICBpbnRlcm5hbFN0YXRlLFxuICAgIGluaXRpYWxTZWFyY2hQYXJhbXNcbiAgKVxuXG4gIC8vIEluaXRpYWxpc2UgdGhlIHJlZnMgd2l0aCB0aGUgaW5pdGlhbCB2YWx1ZXNcbiAgaWYgKFxuICAgIE9iamVjdC5rZXlzKHF1ZXJ5UmVmLmN1cnJlbnQpLmpvaW4oJyYnKSAhPT1cbiAgICBPYmplY3QudmFsdWVzKHJlc29sdmVkVXJsS2V5cykuam9pbignJicpXG4gICkge1xuICAgIGNvbnN0IHsgc3RhdGUsIGhhc0NoYW5nZWQgfSA9IHBhcnNlTWFwKFxuICAgICAga2V5TWFwLFxuICAgICAgdXJsS2V5cyxcbiAgICAgIGluaXRpYWxTZWFyY2hQYXJhbXMsXG4gICAgICBxdWV1ZWRRdWVyaWVzLFxuICAgICAgcXVlcnlSZWYuY3VycmVudCxcbiAgICAgIHN0YXRlUmVmLmN1cnJlbnRcbiAgICApXG4gICAgaWYgKGhhc0NoYW5nZWQpIHtcbiAgICAgIGRlYnVnKCdbbnVxKyAlcyBgJXNgXSBTdGF0ZSBjaGFuZ2VkOiAlTycsIGhvb2tJZCwgc3RhdGVLZXlzLCB7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICBpbml0aWFsU2VhcmNoUGFyYW1zLFxuICAgICAgICBxdWV1ZWRRdWVyaWVzLFxuICAgICAgICBxdWVyeVJlZjogcXVlcnlSZWYuY3VycmVudCxcbiAgICAgICAgc3RhdGVSZWY6IHN0YXRlUmVmLmN1cnJlbnRcbiAgICAgIH0pXG4gICAgICBzdGF0ZVJlZi5jdXJyZW50ID0gc3RhdGVcbiAgICAgIHNldEludGVybmFsU3RhdGUoc3RhdGUpXG4gICAgfVxuICAgIHF1ZXJ5UmVmLmN1cnJlbnQgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QuZW50cmllcyhyZXNvbHZlZFVybEtleXMpLm1hcCgoW2tleSwgdXJsS2V5XSkgPT4ge1xuICAgICAgICBjb25zdCBwYXJzZXIgPSBrZXlNYXBba2V5XVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHVybEtleSxcbiAgICAgICAgICBwYXJzZXI/LnR5cGUgPT09ICdtdWx0aSdcbiAgICAgICAgICAgID8gaW5pdGlhbFNlYXJjaFBhcmFtcz8uZ2V0QWxsKHVybEtleSlcbiAgICAgICAgICAgIDogKGluaXRpYWxTZWFyY2hQYXJhbXM/LmdldCh1cmxLZXkpID8/IG51bGwpXG4gICAgICAgIF1cbiAgICAgIH0pXG4gICAgKVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB7IHN0YXRlLCBoYXNDaGFuZ2VkIH0gPSBwYXJzZU1hcChcbiAgICAgIGtleU1hcCxcbiAgICAgIHVybEtleXMsXG4gICAgICBpbml0aWFsU2VhcmNoUGFyYW1zLFxuICAgICAgcXVldWVkUXVlcmllcyxcbiAgICAgIHF1ZXJ5UmVmLmN1cnJlbnQsXG4gICAgICBzdGF0ZVJlZi5jdXJyZW50XG4gICAgKVxuICAgIGlmIChoYXNDaGFuZ2VkKSB7XG4gICAgICBkZWJ1ZygnW251cSsgJXMgYCVzYF0gU3RhdGUgY2hhbmdlZDogJU8nLCBob29rSWQsIHN0YXRlS2V5cywge1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgaW5pdGlhbFNlYXJjaFBhcmFtcyxcbiAgICAgICAgcXVldWVkUXVlcmllcyxcbiAgICAgICAgcXVlcnlSZWY6IHF1ZXJ5UmVmLmN1cnJlbnQsXG4gICAgICAgIHN0YXRlUmVmOiBzdGF0ZVJlZi5jdXJyZW50XG4gICAgICB9KVxuICAgICAgc3RhdGVSZWYuY3VycmVudCA9IHN0YXRlXG4gICAgICBzZXRJbnRlcm5hbFN0YXRlKHN0YXRlKVxuICAgIH1cbiAgfSwgW1xuICAgIE9iamVjdC52YWx1ZXMocmVzb2x2ZWRVcmxLZXlzKVxuICAgICAgLm1hcChrZXkgPT4gYCR7a2V5fT0ke2luaXRpYWxTZWFyY2hQYXJhbXM/LmdldEFsbChrZXkpfWApXG4gICAgICAuam9pbignJicpLFxuICAgIEpTT04uc3RyaW5naWZ5KHF1ZXVlZFF1ZXJpZXMpXG4gIF0pXG5cbiAgLy8gU3luYyBhbGwgaG9va3MgdG9nZXRoZXIgJiB3aXRoIGV4dGVybmFsIFVSTCBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSBPYmplY3Qua2V5cyhrZXlNYXApLnJlZHVjZShcbiAgICAgIChoYW5kbGVycywgc3RhdGVLZXkpID0+IHtcbiAgICAgICAgaGFuZGxlcnNbc3RhdGVLZXkgYXMga2V5b2YgS2V5TWFwXSA9ICh7XG4gICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgcXVlcnlcbiAgICAgICAgfTogQ3Jvc3NIb29rU3luY1BheWxvYWQpID0+IHtcbiAgICAgICAgICBzZXRJbnRlcm5hbFN0YXRlKGN1cnJlbnRTdGF0ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGRlZmF1bHRWYWx1ZSB9ID0ga2V5TWFwW3N0YXRlS2V5XSFcbiAgICAgICAgICAgIGNvbnN0IHVybEtleSA9IHJlc29sdmVkVXJsS2V5c1tzdGF0ZUtleV0hXG4gICAgICAgICAgICBjb25zdCBuZXh0VmFsdWUgPSBzdGF0ZSA/PyBkZWZhdWx0VmFsdWUgPz8gbnVsbFxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gY3VycmVudFN0YXRlW3N0YXRlS2V5XSA/PyBkZWZhdWx0VmFsdWUgPz8gbnVsbFxuXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmlzKGN1cnJlbnRWYWx1ZSwgbmV4dFZhbHVlKSkge1xuICAgICAgICAgICAgICBkZWJ1ZyhcbiAgICAgICAgICAgICAgICAnW251cSsgJXMgYCVzYF0gQ3Jvc3MtaG9vayBrZXkgc3luYyAlczogJU8gKGRlZmF1bHQ6ICVPKS4gbm8gY2hhbmdlLCBza2lwcGluZywgcmVzb2x2ZWQ6ICVPJyxcbiAgICAgICAgICAgICAgICBob29rSWQsXG4gICAgICAgICAgICAgICAgc3RhdGVLZXlzLFxuICAgICAgICAgICAgICAgIHVybEtleSxcbiAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIC8vIGJhaWwgb3V0IGJ5IHJldHVybmluZyB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFN0YXRlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOb3RlOiBjYW5ub3QgbXV0YXRlIGluLXBsYWNlLCB0aGUgb2JqZWN0IHJlZiBtdXN0IGNoYW5nZVxuICAgICAgICAgICAgLy8gZm9yIHRoZSBzdWJzZXF1ZW50IHNldFN0YXRlIHRvIHBpY2sgaXQgdXAuXG4gICAgICAgICAgICBzdGF0ZVJlZi5jdXJyZW50ID0ge1xuICAgICAgICAgICAgICAuLi5zdGF0ZVJlZi5jdXJyZW50LFxuICAgICAgICAgICAgICBbc3RhdGVLZXkgYXMga2V5b2YgS2V5TWFwXTogbmV4dFZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWVyeVJlZi5jdXJyZW50W3VybEtleV0gPSBxdWVyeVxuICAgICAgICAgICAgZGVidWcoXG4gICAgICAgICAgICAgICdbbnVxKyAlcyBgJXNgXSBDcm9zcy1ob29rIGtleSBzeW5jICVzOiAlTyAoZGVmYXVsdDogJU8pLiB1cGRhdGVJbnRlcm5hbFN0YXRlLCByZXNvbHZlZDogJU8nLFxuICAgICAgICAgICAgICBob29rSWQsXG4gICAgICAgICAgICAgIHN0YXRlS2V5cyxcbiAgICAgICAgICAgICAgdXJsS2V5LFxuICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlLFxuICAgICAgICAgICAgICBzdGF0ZVJlZi5jdXJyZW50XG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVSZWYuY3VycmVudFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhbmRsZXJzXG4gICAgICB9LFxuICAgICAge30gYXMgUmVjb3JkPGtleW9mIEtleU1hcCwgKHBheWxvYWQ6IENyb3NzSG9va1N5bmNQYXlsb2FkKSA9PiB2b2lkPlxuICAgIClcblxuICAgIGZvciAoY29uc3Qgc3RhdGVLZXkgb2YgT2JqZWN0LmtleXMoa2V5TWFwKSkge1xuICAgICAgY29uc3QgdXJsS2V5ID0gcmVzb2x2ZWRVcmxLZXlzW3N0YXRlS2V5XSFcbiAgICAgIGRlYnVnKFxuICAgICAgICAnW251cSsgJXMgYCVzYF0gU3Vic2NyaWJpbmcgdG8gc3luYyBmb3IgYCVzYCcsXG4gICAgICAgIGhvb2tJZCxcbiAgICAgICAgdXJsS2V5LFxuICAgICAgICBzdGF0ZUtleXNcbiAgICAgIClcbiAgICAgIGVtaXR0ZXIub24odXJsS2V5LCBoYW5kbGVyc1tzdGF0ZUtleV0hKVxuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBzdGF0ZUtleSBvZiBPYmplY3Qua2V5cyhrZXlNYXApKSB7XG4gICAgICAgIGNvbnN0IHVybEtleSA9IHJlc29sdmVkVXJsS2V5c1tzdGF0ZUtleV0hXG4gICAgICAgIGRlYnVnKFxuICAgICAgICAgICdbbnVxKyAlcyBgJXNgXSBVbnN1YnNjcmliaW5nIHRvIHN5bmMgZm9yIGAlc2AnLFxuICAgICAgICAgIGhvb2tJZCxcbiAgICAgICAgICB1cmxLZXksXG4gICAgICAgICAgc3RhdGVLZXlzXG4gICAgICAgIClcbiAgICAgICAgZW1pdHRlci5vZmYodXJsS2V5LCBoYW5kbGVyc1tzdGF0ZUtleV0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbc3RhdGVLZXlzLCByZXNvbHZlZFVybEtleXNdKVxuXG4gIGNvbnN0IHVwZGF0ZSA9IHVzZUNhbGxiYWNrPFNldFZhbHVlczxLZXlNYXA+PihcbiAgICAoc3RhdGVVcGRhdGVyLCBjYWxsT3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICBjb25zdCBudWxsTWFwID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3Qua2V5cyhrZXlNYXApLm1hcChrZXkgPT4gW2tleSwgbnVsbF0pXG4gICAgICApIGFzIE51bGxhYmxlPEtleU1hcD5cbiAgICAgIGNvbnN0IG5ld1N0YXRlOiBQYXJ0aWFsPE51bGxhYmxlPEtleU1hcD4+ID1cbiAgICAgICAgdHlwZW9mIHN0YXRlVXBkYXRlciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgID8gKHN0YXRlVXBkYXRlcihcbiAgICAgICAgICAgICAgYXBwbHlEZWZhdWx0VmFsdWVzKHN0YXRlUmVmLmN1cnJlbnQsIGRlZmF1bHRWYWx1ZXMpXG4gICAgICAgICAgICApID8/IG51bGxNYXApXG4gICAgICAgICAgOiAoc3RhdGVVcGRhdGVyID8/IG51bGxNYXApXG4gICAgICBkZWJ1ZygnW251cSsgJXMgYCVzYF0gc2V0U3RhdGU6ICVPJywgaG9va0lkLCBzdGF0ZUtleXMsIG5ld1N0YXRlKVxuICAgICAgbGV0IHJldHVybmVkUHJvbWlzZTogUHJvbWlzZTxVUkxTZWFyY2hQYXJhbXM+IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG4gICAgICBsZXQgbWF4RGVib3VuY2VUaW1lID0gMFxuICAgICAgbGV0IGRvRmx1c2ggPSBmYWxzZVxuICAgICAgY29uc3QgZGVib3VuY2VBYm9ydHM6IEFycmF5PFxuICAgICAgICAocDogUHJvbWlzZTxVUkxTZWFyY2hQYXJhbXM+KSA9PiBQcm9taXNlPFVSTFNlYXJjaFBhcmFtcz5cbiAgICAgID4gPSBbXVxuICAgICAgZm9yIChsZXQgW3N0YXRlS2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobmV3U3RhdGUpKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlciA9IGtleU1hcFtzdGF0ZUtleV1cbiAgICAgICAgY29uc3QgdXJsS2V5ID0gcmVzb2x2ZWRVcmxLZXlzW3N0YXRlS2V5XSFcbiAgICAgICAgaWYgKCFwYXJzZXIgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIChjYWxsT3B0aW9ucy5jbGVhck9uRGVmYXVsdCA/P1xuICAgICAgICAgICAgcGFyc2VyLmNsZWFyT25EZWZhdWx0ID8/XG4gICAgICAgICAgICBjbGVhck9uRGVmYXVsdCkgJiZcbiAgICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHBhcnNlci5kZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIChwYXJzZXIuZXEgPz8gKChhLCBiKSA9PiBhID09PSBiKSkodmFsdWUsIHBhcnNlci5kZWZhdWx0VmFsdWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID1cbiAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCA/IG51bGwgOiAocGFyc2VyLnNlcmlhbGl6ZSA/PyBTdHJpbmcpKHZhbHVlKVxuICAgICAgICBlbWl0dGVyLmVtaXQodXJsS2V5LCB7IHN0YXRlOiB2YWx1ZSwgcXVlcnkgfSlcbiAgICAgICAgY29uc3QgdXBkYXRlOiBVcGRhdGVRdWV1ZVB1c2hBcmdzID0ge1xuICAgICAgICAgIGtleTogdXJsS2V5LFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIC8vIENhbGwtbGV2ZWwgb3B0aW9ucyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBpbmRpdmlkdWFsIHBhcnNlciBvcHRpb25zXG4gICAgICAgICAgICAvLyB3aGljaCB0YWtlIHByZWNlZGVuY2Ugb3ZlciBnbG9iYWwgb3B0aW9uc1xuICAgICAgICAgICAgaGlzdG9yeTogY2FsbE9wdGlvbnMuaGlzdG9yeSA/PyBwYXJzZXIuaGlzdG9yeSA/PyBoaXN0b3J5LFxuICAgICAgICAgICAgc2hhbGxvdzogY2FsbE9wdGlvbnMuc2hhbGxvdyA/PyBwYXJzZXIuc2hhbGxvdyA/PyBzaGFsbG93LFxuICAgICAgICAgICAgc2Nyb2xsOiBjYWxsT3B0aW9ucy5zY3JvbGwgPz8gcGFyc2VyLnNjcm9sbCA/PyBzY3JvbGwsXG4gICAgICAgICAgICBzdGFydFRyYW5zaXRpb246XG4gICAgICAgICAgICAgIGNhbGxPcHRpb25zLnN0YXJ0VHJhbnNpdGlvbiA/P1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhcnRUcmFuc2l0aW9uID8/XG4gICAgICAgICAgICAgIHN0YXJ0VHJhbnNpdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2FsbE9wdGlvbnM/LmxpbWl0VXJsVXBkYXRlcz8ubWV0aG9kID09PSAnZGVib3VuY2UnIHx8XG4gICAgICAgICAgbGltaXRVcmxVcGRhdGVzPy5tZXRob2QgPT09ICdkZWJvdW5jZScgfHxcbiAgICAgICAgICBwYXJzZXIubGltaXRVcmxVcGRhdGVzPy5tZXRob2QgPT09ICdkZWJvdW5jZSdcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHVwZGF0ZS5vcHRpb25zLnNoYWxsb3cgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcig0MjIpKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB0aW1lTXMgPVxuICAgICAgICAgICAgY2FsbE9wdGlvbnM/LmxpbWl0VXJsVXBkYXRlcz8udGltZU1zID8/XG4gICAgICAgICAgICBsaW1pdFVybFVwZGF0ZXM/LnRpbWVNcyA/P1xuICAgICAgICAgICAgcGFyc2VyLmxpbWl0VXJsVXBkYXRlcz8udGltZU1zID8/XG4gICAgICAgICAgICBkZWZhdWx0UmF0ZUxpbWl0LnRpbWVNc1xuICAgICAgICAgIGNvbnN0IGRlYm91bmNlZFByb21pc2UgPSBkZWJvdW5jZUNvbnRyb2xsZXIucHVzaChcbiAgICAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICAgIHRpbWVNcyxcbiAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICBwcm9jZXNzVXJsU2VhcmNoUGFyYW1zXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChtYXhEZWJvdW5jZVRpbWUgPCB0aW1lTXMpIHtcbiAgICAgICAgICAgIC8vIFRoZSBsYXJnZXN0IGRlYm91bmNlIGlzIGxpa2VseSB0byBiZSB0aGUgbGFzdCBVUkwgdXBkYXRlLFxuICAgICAgICAgICAgLy8gc28gd2Uga2VlcCB0aGF0IFByb21pc2UgdG8gcmV0dXJuIGl0LlxuICAgICAgICAgICAgcmV0dXJuZWRQcm9taXNlID0gZGVib3VuY2VkUHJvbWlzZVxuICAgICAgICAgICAgbWF4RGVib3VuY2VUaW1lID0gdGltZU1zXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHRpbWVNcyA9XG4gICAgICAgICAgICBjYWxsT3B0aW9ucz8ubGltaXRVcmxVcGRhdGVzPy50aW1lTXMgPz9cbiAgICAgICAgICAgIHBhcnNlcj8ubGltaXRVcmxVcGRhdGVzPy50aW1lTXMgPz9cbiAgICAgICAgICAgIGxpbWl0VXJsVXBkYXRlcz8udGltZU1zID8/XG4gICAgICAgICAgICBjYWxsT3B0aW9ucy50aHJvdHRsZU1zID8/XG4gICAgICAgICAgICBwYXJzZXIudGhyb3R0bGVNcyA/P1xuICAgICAgICAgICAgdGhyb3R0bGVNc1xuICAgICAgICAgIGRlYm91bmNlQWJvcnRzLnB1c2goZGVib3VuY2VDb250cm9sbGVyLmFib3J0KHVybEtleSkpXG4gICAgICAgICAgZ2xvYmFsVGhyb3R0bGVRdWV1ZS5wdXNoKHVwZGF0ZSwgdGltZU1zKVxuICAgICAgICAgIGRvRmx1c2ggPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFdlIG5lZWQgdG8gZmx1c2ggdGhlIHRocm90dGxlIHF1ZXVlLCBidXQgd2UgbWF5IGhhdmUgYSBwZW5kaW5nXG4gICAgICAvLyBkZWJvdW5jZWQgdXBkYXRlIHRoYXQgd2lsbCByZXNvbHZlIGFmdGVyd2FyZHMuXG4gICAgICBjb25zdCBnbG9iYWxQcm9taXNlID0gZGVib3VuY2VBYm9ydHMucmVkdWNlKFxuICAgICAgICAocHJldmlvdXMsIGZuKSA9PiBmbihwcmV2aW91cyksXG4gICAgICAgIGRvRmx1c2hcbiAgICAgICAgICA/IGdsb2JhbFRocm90dGxlUXVldWUuZmx1c2goYWRhcHRlciwgcHJvY2Vzc1VybFNlYXJjaFBhcmFtcylcbiAgICAgICAgICA6IGdsb2JhbFRocm90dGxlUXVldWUuZ2V0UGVuZGluZ1Byb21pc2UoYWRhcHRlcilcbiAgICAgIClcbiAgICAgIHJldHVybiByZXR1cm5lZFByb21pc2UgPz8gZ2xvYmFsUHJvbWlzZVxuICAgIH0sXG4gICAgW1xuICAgICAgc3RhdGVLZXlzLFxuICAgICAgaGlzdG9yeSxcbiAgICAgIHNoYWxsb3csXG4gICAgICBzY3JvbGwsXG4gICAgICB0aHJvdHRsZU1zLFxuICAgICAgbGltaXRVcmxVcGRhdGVzPy5tZXRob2QsXG4gICAgICBsaW1pdFVybFVwZGF0ZXM/LnRpbWVNcyxcbiAgICAgIHN0YXJ0VHJhbnNpdGlvbixcbiAgICAgIHJlc29sdmVkVXJsS2V5cyxcbiAgICAgIGFkYXB0ZXIudXBkYXRlVXJsLFxuICAgICAgYWRhcHRlci5nZXRTZWFyY2hQYXJhbXNTbmFwc2hvdCxcbiAgICAgIGFkYXB0ZXIucmF0ZUxpbWl0RmFjdG9yLFxuICAgICAgcHJvY2Vzc1VybFNlYXJjaFBhcmFtcyxcbiAgICAgIGRlZmF1bHRWYWx1ZXNcbiAgICBdXG4gIClcblxuICBjb25zdCBvdXRwdXRTdGF0ZSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gYXBwbHlEZWZhdWx0VmFsdWVzKGludGVybmFsU3RhdGUsIGRlZmF1bHRWYWx1ZXMpLFxuICAgIFtpbnRlcm5hbFN0YXRlLCBkZWZhdWx0VmFsdWVzXVxuICApXG4gIHJldHVybiBbb3V0cHV0U3RhdGUsIHVwZGF0ZV1cbn1cblxuLy8gLS1cblxuZnVuY3Rpb24gcGFyc2VNYXA8S2V5TWFwIGV4dGVuZHMgVXNlUXVlcnlTdGF0ZXNLZXlzTWFwPihcbiAga2V5TWFwOiBLZXlNYXAsXG4gIHVybEtleXM6IFBhcnRpYWw8UmVjb3JkPGtleW9mIEtleU1hcCwgc3RyaW5nPj4sXG4gIHNlYXJjaFBhcmFtczogVVJMU2VhcmNoUGFyYW1zLFxuICBxdWV1ZWRRdWVyaWVzOiBSZWNvcmQ8c3RyaW5nLCBRdWVyeSB8IG51bGwgfCB1bmRlZmluZWQ+LFxuICBjYWNoZWRRdWVyeT86IFJlY29yZDxzdHJpbmcsIFF1ZXJ5IHwgbnVsbD4sXG4gIGNhY2hlZFN0YXRlPzogTnVsbGFibGVWYWx1ZXM8S2V5TWFwPlxuKToge1xuICBzdGF0ZTogTnVsbGFibGVWYWx1ZXM8S2V5TWFwPlxuICBoYXNDaGFuZ2VkOiBib29sZWFuXG59IHtcbiAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZVxuICBjb25zdCBzdGF0ZSA9IE9iamVjdC5lbnRyaWVzKGtleU1hcCkucmVkdWNlKChvdXQsIFtzdGF0ZUtleSwgcGFyc2VyXSkgPT4ge1xuICAgIGNvbnN0IHVybEtleSA9IHVybEtleXM/LltzdGF0ZUtleV0gPz8gc3RhdGVLZXlcbiAgICBjb25zdCBxdWV1ZWRRdWVyeSA9IHF1ZXVlZFF1ZXJpZXNbdXJsS2V5XVxuICAgIGNvbnN0IGZhbGxiYWNrVmFsdWUgPSBwYXJzZXIudHlwZSA9PT0gJ211bHRpJyA/IFtdIDogbnVsbFxuICAgIGNvbnN0IHF1ZXJ5ID1cbiAgICAgIHF1ZXVlZFF1ZXJ5ID09PSB1bmRlZmluZWRcbiAgICAgICAgPyAoKHBhcnNlci50eXBlID09PSAnbXVsdGknXG4gICAgICAgICAgICA/IHNlYXJjaFBhcmFtcz8uZ2V0QWxsKHVybEtleSlcbiAgICAgICAgICAgIDogc2VhcmNoUGFyYW1zPy5nZXQodXJsS2V5KSkgPz8gZmFsbGJhY2tWYWx1ZSlcbiAgICAgICAgOiBxdWV1ZWRRdWVyeVxuICAgIGlmIChcbiAgICAgIGNhY2hlZFF1ZXJ5ICYmXG4gICAgICBjYWNoZWRTdGF0ZSAmJlxuICAgICAgY29tcGFyZVF1ZXJ5KGNhY2hlZFF1ZXJ5W3VybEtleV0gPz8gZmFsbGJhY2tWYWx1ZSwgcXVlcnkpXG4gICAgKSB7XG4gICAgICAvLyBDYWNoZSBoaXRcbiAgICAgIG91dFtzdGF0ZUtleSBhcyBrZXlvZiBLZXlNYXBdID0gY2FjaGVkU3RhdGVbc3RhdGVLZXldID8/IG51bGxcbiAgICAgIHJldHVybiBvdXRcbiAgICB9XG4gICAgLy8gQ2FjaGUgbWlzc1xuICAgIGhhc0NoYW5nZWQgPSB0cnVlXG4gICAgY29uc3QgdmFsdWUgPSBpc0Fic2VudEZyb21VcmwocXVlcnkpXG4gICAgICA/IG51bGxcbiAgICAgIDogLy8gd2UgaGF2ZSBwcm9wZXJseSBuYXJyb3dlZCBgcXVlcnlgIGhlcmUsIGJ1dCBUUyBkb2Vzbid0IGtlZXAgdHJhY2sgb2YgdGhhdFxuICAgICAgICBzYWZlUGFyc2UocGFyc2VyLnBhcnNlLCBxdWVyeSBhcyBzdHJpbmcgJiBBcnJheTxzdHJpbmc+LCB1cmxLZXkpXG5cbiAgICBvdXRbc3RhdGVLZXkgYXMga2V5b2YgS2V5TWFwXSA9IHZhbHVlID8/IG51bGxcbiAgICBpZiAoY2FjaGVkUXVlcnkpIHtcbiAgICAgIGNhY2hlZFF1ZXJ5W3VybEtleV0gPSBxdWVyeVxuICAgIH1cbiAgICByZXR1cm4gb3V0XG4gIH0sIHt9IGFzIE51bGxhYmxlVmFsdWVzPEtleU1hcD4pXG5cbiAgaWYgKCFoYXNDaGFuZ2VkKSB7XG4gICAgLy8gY2hlY2sgdGhhdCBrZXlNYXAga2V5cyBoYXZlIG5vdCBjaGFuZ2VkXG4gICAgY29uc3Qga2V5TWFwS2V5cyA9IE9iamVjdC5rZXlzKGtleU1hcClcbiAgICBjb25zdCBjYWNoZWRTdGF0ZUtleXMgPSBPYmplY3Qua2V5cyhjYWNoZWRTdGF0ZSA/PyB7fSlcbiAgICBoYXNDaGFuZ2VkID1cbiAgICAgIGtleU1hcEtleXMubGVuZ3RoICE9PSBjYWNoZWRTdGF0ZUtleXMubGVuZ3RoIHx8XG4gICAgICBrZXlNYXBLZXlzLnNvbWUoa2V5ID0+ICFjYWNoZWRTdGF0ZUtleXMuaW5jbHVkZXMoa2V5KSlcbiAgfVxuXG4gIHJldHVybiB7IHN0YXRlLCBoYXNDaGFuZ2VkIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlEZWZhdWx0VmFsdWVzPEtleU1hcCBleHRlbmRzIFVzZVF1ZXJ5U3RhdGVzS2V5c01hcD4oXG4gIHN0YXRlOiBOdWxsYWJsZVZhbHVlczxLZXlNYXA+LFxuICBkZWZhdWx0czogUGFydGlhbDxWYWx1ZXM8S2V5TWFwPj5cbikge1xuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5rZXlzKHN0YXRlKS5tYXAoa2V5ID0+IFtrZXksIHN0YXRlW2tleV0gPz8gZGVmYXVsdHNba2V5XSA/PyBudWxsXSlcbiAgKSBhcyBWYWx1ZXM8S2V5TWFwPlxufVxuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB0eXBlIHsgT3B0aW9ucyB9IGZyb20gJy4vZGVmcydcbmltcG9ydCB0eXBlIHsgR2VuZXJpY1BhcnNlciB9IGZyb20gJy4vcGFyc2VycydcbmltcG9ydCB7IHVzZVF1ZXJ5U3RhdGVzIH0gZnJvbSAnLi91c2VRdWVyeVN0YXRlcydcblxuZXhwb3J0IHR5cGUgVXNlUXVlcnlTdGF0ZU9wdGlvbnM8VD4gPSBHZW5lcmljUGFyc2VyPFQ+ICYgT3B0aW9uc1xuXG5leHBvcnQgdHlwZSBVc2VRdWVyeVN0YXRlUmV0dXJuPFBhcnNlZCwgRGVmYXVsdD4gPSBbXG4gIERlZmF1bHQgZXh0ZW5kcyB1bmRlZmluZWRcbiAgICA/IFBhcnNlZCB8IG51bGwgLy8gdmFsdWUgY2FuJ3QgYmUgbnVsbCBpZiBkZWZhdWx0IGlzIHNwZWNpZmllZFxuICAgIDogUGFyc2VkLFxuICAoXG4gICAgdmFsdWU6XG4gICAgICB8IG51bGxcbiAgICAgIHwgUGFyc2VkXG4gICAgICB8ICgoXG4gICAgICAgICAgb2xkOiBEZWZhdWx0IGV4dGVuZHMgUGFyc2VkID8gUGFyc2VkIDogUGFyc2VkIHwgbnVsbFxuICAgICAgICApID0+IFBhcnNlZCB8IG51bGwpLFxuICAgIG9wdGlvbnM/OiBPcHRpb25zXG4gICkgPT4gUHJvbWlzZTxVUkxTZWFyY2hQYXJhbXM+XG5dXG5cbi8vIE92ZXJsb2FkIHR5cGUgc2lnbmF0dXJlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBOb3RlOiB0aGUgb3JkZXIgb2YgZGVjbGFyYXRpb24gbWF0dGVycyAoZnJvbSB0aGUgbW9zdCBzcGVjaWZpYyB0byB0aGUgbGVhc3QpLlxuXG4vKipcbiAqIFJlYWN0IHN0YXRlIGhvb2sgc3luY2hyb25pemVkIHdpdGggYSBVUkwgcXVlcnkgc3RyaW5nIGluIE5leHQuanNcbiAqXG4gKiBUaGlzIHZhcmlhbnQgaXMgdXNlZCB3aGVuIHByb3ZpZGluZyBhIGRlZmF1bHQgdmFsdWUuIFRoaXMgd2lsbCBtYWtlXG4gKiB0aGUgcmV0dXJuZWQgc3RhdGUgbm9uLW51bGxhYmxlIHdoZW4gdGhlIHF1ZXJ5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBVUkwuXG4gKiAodGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBpbnN0ZWFkKS5cbiAqXG4gKiBfTm90ZTogdGhlIFVSTCB3aWxsICoqbm90KiogYmUgdXBkYXRlZCB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlIGlmIHRoZSBxdWVyeVxuICogaXMgbWlzc2luZy5fXG4gKlxuICogU2V0dGluZyB0aGUgdmFsdWUgdG8gYG51bGxgIHdpbGwgY2xlYXIgdGhlIHF1ZXJ5IGluIHRoZSBVUkwsIGFuZCByZXR1cm5cbiAqIHRoZSBkZWZhdWx0IHZhbHVlIGFzIHN0YXRlLlxuICpcbiAqIEV4YW1wbGUgdXNhZ2U6XG4gKiBgYGB0c1xuICogICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IHVzZVF1ZXJ5U3RhdGUoXG4gKiAgICAgJ2NvdW50JyxcbiAqICAgICBwYXJzZUFzSW50ZWdlci5kZWZhdWx0VmFsdWUoMClcbiAqICAgKVxuICpcbiAqICAgY29uc3QgaW5jcmVtZW50ID0gKCkgPT4gc2V0Q291bnQob2xkQ291bnQgPT4gb2xkQ291bnQgKyAxKVxuICogICBjb25zdCBkZWNyZW1lbnQgPSAoKSA9PiBzZXRDb3VudChvbGRDb3VudCA9PiBvbGRDb3VudCAtIDEpXG4gKiAgIC8vIENsZWFycyB0aGUgcXVlcnkga2V5IGZyb20gdGhlIFVSTCBhbmQgYGNvdW50YCBlcXVhbHMgMFxuICogICBjb25zdCBjbGVhckNvdW50UXVlcnkgPSAoKSA9PiBzZXRDb3VudChudWxsKVxuICogYGBgXG4gKiBAcGFyYW0ga2V5IFRoZSBVUkwgcXVlcnkgc3RyaW5nIGtleSB0byBiaW5kIHRvXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFBhcnNlciAoZGVmaW5lcyB0aGUgc3RhdGUgZGF0YSB0eXBlKSwgZGVmYXVsdCB2YWx1ZSBhbmQgb3B0aW9uYWwgaGlzdG9yeSBtb2RlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlUXVlcnlTdGF0ZTxUPihcbiAga2V5OiBzdHJpbmcsXG4gIG9wdGlvbnM6IFVzZVF1ZXJ5U3RhdGVPcHRpb25zPFQ+ICYgeyBkZWZhdWx0VmFsdWU6IFQgfVxuKTogVXNlUXVlcnlTdGF0ZVJldHVybjxcbiAgTm9uTnVsbGFibGU8UmV0dXJuVHlwZTx0eXBlb2Ygb3B0aW9ucy5wYXJzZT4+LFxuICB0eXBlb2Ygb3B0aW9ucy5kZWZhdWx0VmFsdWVcbj5cblxuLyoqXG4gKiBSZWFjdCBzdGF0ZSBob29rIHN5bmNocm9uaXplZCB3aXRoIGEgVVJMIHF1ZXJ5IHN0cmluZyBpbiBOZXh0LmpzXG4gKlxuICogSWYgdGhlIHF1ZXJ5IGlzIG1pc3NpbmcgaW4gdGhlIFVSTCwgdGhlIHN0YXRlIHdpbGwgYmUgYG51bGxgLlxuICpcbiAqIEV4YW1wbGUgdXNhZ2U6XG4gKiBgYGB0c1xuICogICAvLyBCbG9nIHBvc3RzIGZpbHRlcmluZyBieSB0YWdcbiAqICAgY29uc3QgW3RhZywgc2VsZWN0VGFnXSA9IHVzZVF1ZXJ5U3RhdGUoJ3RhZycpXG4gKiAgIGNvbnN0IGZpbHRlcmVkUG9zdHMgPSBwb3N0cy5maWx0ZXIocG9zdCA9PiB0YWcgPyBwb3N0LnRhZyA9PT0gdGFnIDogdHJ1ZSlcbiAqICAgY29uc3QgY2xlYXJUYWcgPSAoKSA9PiBzZWxlY3RUYWcobnVsbClcbiAqIGBgYFxuICogQHBhcmFtIGtleSBUaGUgVVJMIHF1ZXJ5IHN0cmluZyBrZXkgdG8gYmluZCB0b1xuICogQHBhcmFtIG9wdGlvbnMgLSBQYXJzZXIgKGRlZmluZXMgdGhlIHN0YXRlIGRhdGEgdHlwZSksIGFuZCBvcHRpb25hbCBoaXN0b3J5IG1vZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWVyeVN0YXRlPFQ+KFxuICBrZXk6IHN0cmluZyxcbiAgb3B0aW9uczogVXNlUXVlcnlTdGF0ZU9wdGlvbnM8VD5cbik6IFVzZVF1ZXJ5U3RhdGVSZXR1cm48Tm9uTnVsbGFibGU8UmV0dXJuVHlwZTx0eXBlb2Ygb3B0aW9ucy5wYXJzZT4+LCB1bmRlZmluZWQ+XG5cbi8qKlxuICogRGVmYXVsdCB0eXBlIHN0cmluZywgbGltaXRlZCBvcHRpb25zICYgZGVmYXVsdCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlUXVlcnlTdGF0ZShcbiAga2V5OiBzdHJpbmcsXG4gIG9wdGlvbnM6IE9wdGlvbnMgJiB7XG4gICAgZGVmYXVsdFZhbHVlOiBzdHJpbmdcbiAgfSAmIHtcbiAgICAvLyBOb3RlOiBFbnN1cmUgdGhpcyBvdmVybG9hZCBpc24ndCBwaWNrZWQgd2hlbiBzcGVjaWZ5aW5nIGEgZGVmYXVsdFxuICAgIC8vIHZhbHVlIGFuZCBzcHJlYWRpbmcgYSBwYXJzZXIgZm9yIHdoaWNoIHRoZSBkZWZhdWx0IHdvdWxkIGJlIGludmFsaWQuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS80N25nL251cXMvcHVsbC8xMDU3XG4gICAgW0sgaW4ga2V5b2YgR2VuZXJpY1BhcnNlcjx1bmtub3duPl0/OiBuZXZlclxuICB9XG4pOiBVc2VRdWVyeVN0YXRlUmV0dXJuPHN0cmluZywgdHlwZW9mIG9wdGlvbnMuZGVmYXVsdFZhbHVlPlxuXG4vKipcbiAqIFJlYWN0IHN0YXRlIGhvb2sgc3luY2hyb25pemVkIHdpdGggYSBVUkwgcXVlcnkgc3RyaW5nIGluIE5leHQuanNcbiAqXG4gKiBJZiB0aGUgcXVlcnkgaXMgbWlzc2luZyBpbiB0aGUgVVJMLCB0aGUgc3RhdGUgd2lsbCBiZSBgbnVsbGAuXG4gKlxuICogTm90ZTogYnkgZGVmYXVsdCB0aGUgc3RhdGUgdHlwZSBpcyBhIGBzdHJpbmdgLiBUbyB1c2UgZGlmZmVyZW50IHR5cGVzLFxuICogY2hlY2sgb3V0IHRoZSBgcGFyc2VBc1hZWmAgaGVscGVyczpcbiAqIGBgYHRzXG4gKiAgIGNvbnN0IFtkYXRlLCBzZXREYXRlXSA9IHVzZVF1ZXJ5U3RhdGUoXG4gKiAgICAgJ2RhdGUnLFxuICogICAgIHBhcnNlQXNJc29EYXRlVGltZS53aXRoRGVmYXVsdChuZXcgRGF0ZSgnMjAyMS0wMS0wMScpKVxuICogICApXG4gKlxuICogICBjb25zdCBzZXRUb05vdyA9ICgpID0+IHNldERhdGUobmV3IERhdGUoKSlcbiAqICAgY29uc3QgYWRkT25lSG91ciA9ICgpID0+IHtcbiAqICAgICBzZXREYXRlKG9sZERhdGUgPT4gbmV3IERhdGUob2xkRGF0ZS52YWx1ZU9mKCkgKyAzNjAwXzAwMCkpXG4gKiAgIH1cbiAqIGBgYFxuICogQHBhcmFtIGtleSBUaGUgVVJMIHF1ZXJ5IHN0cmluZyBrZXkgdG8gYmluZCB0b1xuICogQHBhcmFtIG9wdGlvbnMgLSBQYXJzZXIgKGRlZmluZXMgdGhlIHN0YXRlIGRhdGEgdHlwZSksIGFuZCBvcHRpb25hbCBoaXN0b3J5IG1vZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWVyeVN0YXRlKFxuICBrZXk6IHN0cmluZyxcbiAgb3B0aW9uczogUGljazxVc2VRdWVyeVN0YXRlT3B0aW9uczxzdHJpbmc+LCBrZXlvZiBPcHRpb25zPlxuKTogVXNlUXVlcnlTdGF0ZVJldHVybjxzdHJpbmcsIHVuZGVmaW5lZD5cblxuLyoqXG4gKiBSZWFjdCBzdGF0ZSBob29rIHN5bmNocm9uaXplZCB3aXRoIGEgVVJMIHF1ZXJ5IHN0cmluZyBpbiBOZXh0LmpzXG4gKlxuICogSWYgdGhlIHF1ZXJ5IGlzIG1pc3NpbmcgaW4gdGhlIFVSTCwgdGhlIHN0YXRlIHdpbGwgYmUgYG51bGxgLlxuICpcbiAqIE5vdGU6IGJ5IGRlZmF1bHQgdGhlIHN0YXRlIHR5cGUgaXMgYSBgc3RyaW5nYC4gVG8gdXNlIGRpZmZlcmVudCB0eXBlcyxcbiAqIGNoZWNrIG91dCB0aGUgYHBhcnNlQXNYWVpgIGhlbHBlcnM6XG4gKiBgYGB0c1xuICogICBjb25zdCBbZGF0ZSwgc2V0RGF0ZV0gPSB1c2VRdWVyeVN0YXRlKFxuICogICAgICdkYXRlJyxcbiAqICAgICBwYXJzZUFzSXNvRGF0ZVRpbWUud2l0aERlZmF1bHQobmV3IERhdGUoJzIwMjEtMDEtMDEnKSlcbiAqICAgKVxuICpcbiAqICAgY29uc3Qgc2V0VG9Ob3cgPSAoKSA9PiBzZXREYXRlKG5ldyBEYXRlKCkpXG4gKiAgIGNvbnN0IGFkZE9uZUhvdXIgPSAoKSA9PiB7XG4gKiAgICAgc2V0RGF0ZShvbGREYXRlID0+IG5ldyBEYXRlKG9sZERhdGUudmFsdWVPZigpICsgMzYwMF8wMDApKVxuICogICB9XG4gKiBgYGBcbiAqIEBwYXJhbSBrZXkgVGhlIFVSTCBxdWVyeSBzdHJpbmcga2V5IHRvIGJpbmQgdG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVF1ZXJ5U3RhdGUoXG4gIGtleTogc3RyaW5nXG4pOiBVc2VRdWVyeVN0YXRlUmV0dXJuPHN0cmluZywgdW5kZWZpbmVkPlxuXG4vKipcbiAqIFJlYWN0IHN0YXRlIGhvb2sgc3luY2hyb25pemVkIHdpdGggYSBVUkwgcXVlcnkgc3RyaW5nIGluIE5leHQuanNcbiAqXG4gKiBJZiB1c2VkIHdpdGhvdXQgYSBgZGVmYXVsdFZhbHVlYCBzdXBwbGllZCBpbiB0aGUgb3B0aW9ucywgYW5kIHRoZSBxdWVyeSBpc1xuICogbWlzc2luZyBpbiB0aGUgVVJMLCB0aGUgc3RhdGUgd2lsbCBiZSBgbnVsbGAuXG4gKlxuICogIyMjIEJlaGF2aW91ciB3aXRoIGRlZmF1bHQgdmFsdWVzOlxuICpcbiAqIF9Ob3RlOiB0aGUgVVJMIHdpbGwgKipub3QqKiBiZSB1cGRhdGVkIHdpdGggdGhlIGRlZmF1bHQgdmFsdWUgaWYgdGhlIHF1ZXJ5XG4gKiBpcyBtaXNzaW5nLl9cbiAqXG4gKiBTZXR0aW5nIHRoZSB2YWx1ZSB0byBgbnVsbGAgd2lsbCBjbGVhciB0aGUgcXVlcnkgaW4gdGhlIFVSTCwgYW5kIHJldHVyblxuICogdGhlIGRlZmF1bHQgdmFsdWUgYXMgc3RhdGUuXG4gKlxuICogRXhhbXBsZSB1c2FnZTpcbiAqIGBgYHRzXG4gKiAgIC8vIEJsb2cgcG9zdHMgZmlsdGVyaW5nIGJ5IHRhZ1xuICogICBjb25zdCBbdGFnLCBzZWxlY3RUYWddID0gdXNlUXVlcnlTdGF0ZSgndGFnJylcbiAqICAgY29uc3QgZmlsdGVyZWRQb3N0cyA9IHBvc3RzLmZpbHRlcihwb3N0ID0+IHRhZyA/IHBvc3QudGFnID09PSB0YWcgOiB0cnVlKVxuICogICBjb25zdCBjbGVhclRhZyA9ICgpID0+IHNlbGVjdFRhZyhudWxsKVxuICpcbiAqICAgLy8gV2l0aCBkZWZhdWx0IHZhbHVlc1xuICpcbiAqICAgY29uc3QgW2NvdW50LCBzZXRDb3VudF0gPSB1c2VRdWVyeVN0YXRlKFxuICogICAgICdjb3VudCcsXG4gKiAgICAgcGFyc2VBc0ludGVnZXIuZGVmYXVsdFZhbHVlKDApXG4gKiAgIClcbiAqXG4gKiAgIGNvbnN0IGluY3JlbWVudCA9ICgpID0+IHNldENvdW50KG9sZENvdW50ID0+IG9sZENvdW50ICsgMSlcbiAqICAgY29uc3QgZGVjcmVtZW50ID0gKCkgPT4gc2V0Q291bnQob2xkQ291bnQgPT4gb2xkQ291bnQgLSAxKVxuICogICBjb25zdCBjbGVhckNvdW50UXVlcnkgPSAoKSA9PiBzZXRDb3VudChudWxsKVxuICpcbiAqICAgLy8gLS1cbiAqXG4gKiAgIGNvbnN0IFtkYXRlLCBzZXREYXRlXSA9IHVzZVF1ZXJ5U3RhdGUoXG4gKiAgICAgJ2RhdGUnLFxuICogICAgIHBhcnNlQXNJc29EYXRlVGltZS53aXRoRGVmYXVsdChuZXcgRGF0ZSgnMjAyMS0wMS0wMScpKVxuICogICApXG4gKlxuICogICBjb25zdCBzZXRUb05vdyA9ICgpID0+IHNldERhdGUobmV3IERhdGUoKSlcbiAqICAgY29uc3QgYWRkT25lSG91ciA9ICgpID0+IHtcbiAqICAgICBzZXREYXRlKG9sZERhdGUgPT4gbmV3IERhdGUob2xkRGF0ZS52YWx1ZU9mKCkgKyAzNjAwXzAwMCkpXG4gKiAgIH1cbiAqIGBgYFxuICogQHBhcmFtIGtleSBUaGUgVVJMIHF1ZXJ5IHN0cmluZyBrZXkgdG8gYmluZCB0b1xuICogQHBhcmFtIG9wdGlvbnMgLSBQYXJzZXIgKGRlZmluZXMgdGhlIHN0YXRlIGRhdGEgdHlwZSksIG9wdGlvbmFsIGRlZmF1bHQgdmFsdWUgYW5kIGhpc3RvcnkgbW9kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVF1ZXJ5U3RhdGU8VCA9IHN0cmluZz4oXG4gIGtleTogc3RyaW5nLFxuICBvcHRpb25zOiBQYXJ0aWFsPFVzZVF1ZXJ5U3RhdGVPcHRpb25zPFQ+PiAmIHtcbiAgICBkZWZhdWx0VmFsdWU/OiBUXG4gIH0gPSB7fVxuKSB7XG4gIGNvbnN0IHsgcGFyc2UsIHR5cGUsIHNlcmlhbGl6ZSwgZXEsIGRlZmF1bHRWYWx1ZSwgLi4uaG9va09wdGlvbnMgfSA9IG9wdGlvbnNcbiAgY29uc3QgW3sgW2tleV06IHN0YXRlIH0sIHNldFN0YXRlXSA9IHVzZVF1ZXJ5U3RhdGVzKFxuICAgIHtcbiAgICAgIFtrZXldOiB7XG4gICAgICAgIHBhcnNlOiBwYXJzZSA/PyAoKHg6IGFueSkgPT4geCBhcyB1bmtub3duIGFzIFQpLFxuICAgICAgICB0eXBlLFxuICAgICAgICBzZXJpYWxpemUsXG4gICAgICAgIGVxLFxuICAgICAgICBkZWZhdWx0VmFsdWVcbiAgICAgIH0gYXMgR2VuZXJpY1BhcnNlcjxUPlxuICAgIH0sXG4gICAgaG9va09wdGlvbnNcbiAgKVxuICBjb25zdCB1cGRhdGUgPSB1c2VDYWxsYmFjayhcbiAgICAoc3RhdGVVcGRhdGVyOiBSZWFjdC5TZXRTdGF0ZUFjdGlvbjxUIHwgbnVsbD4sIGNhbGxPcHRpb25zOiBPcHRpb25zID0ge30pID0+XG4gICAgICBzZXRTdGF0ZShcbiAgICAgICAgb2xkID0+ICh7XG4gICAgICAgICAgW2tleV06XG4gICAgICAgICAgICB0eXBlb2Ygc3RhdGVVcGRhdGVyID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvciBzb21laG93IHN0YXRlVXBkYXRlciBpcyBub3QgbmFycm93ZWQgY29ycmVjdGx5XG4gICAgICAgICAgICAgICAgLy8gYW5kIHVzZVF1ZXJ5U3RhdGVzJyBrZXkgdHlwZSBpcyBub3QgaW5mZXJyZWRcbiAgICAgICAgICAgICAgICBzdGF0ZVVwZGF0ZXIob2xkW2tleV0pXG4gICAgICAgICAgICAgIDogc3RhdGVVcGRhdGVyXG4gICAgICAgIH0pLFxuICAgICAgICBjYWxsT3B0aW9uc1xuICAgICAgKSxcbiAgICBba2V5LCBzZXRTdGF0ZV1cbiAgKVxuICByZXR1cm4gW3N0YXRlLCB1cGRhdGVdXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlTG9hZGVyIiwicGFyc2VycyIsInVybEtleXMiLCJsb2FkU2VhcmNoUGFyYW1zIiwiaW5wdXQiLCJzdHJpY3QiLCJQcm9taXNlIiwidGhlbiIsImkiLCJzZWFyY2hQYXJhbXMiLCJleHRyYWN0U2VhcmNoUGFyYW1zIiwicmVzdWx0Iiwia2V5IiwicGFyc2VyIiwiT2JqZWN0IiwiZW50cmllcyIsInVybEtleSIsInF1ZXJ5IiwidHlwZSIsImdldEFsbCIsImdldCIsImlzQWJzZW50RnJvbVVybCIsImRlZmF1bHRWYWx1ZSIsInBhcnNlZFZhbHVlIiwicGFyc2UiLCJlcnJvciIsIkVycm9yIiwiUmVxdWVzdCIsInVybCIsIlVSTCIsIlVSTFNlYXJjaFBhcmFtcyIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwidiIsImFwcGVuZCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FuUGFyc2UiLCJzYWZlUGFyc2UiLCJ3YXJuIiwiY3JlYXRlUGFyc2VyIiwicGFyc2VTZXJ2ZXJTaWRlTnVsbGFibGUiLCJzdHIiLCJlcSIsImEiLCJiIiwicGFyc2VTZXJ2ZXJTaWRlIiwid2l0aERlZmF1bHQiLCJ3aXRoT3B0aW9ucyIsIm9wdGlvbnMiLCJjcmVhdGVNdWx0aVBhcnNlciIsInBhcnNlQXNTdHJpbmc6IFNpbmdsZVBhcnNlckJ1aWxkZXI8c3RyaW5nPiIsInNlcmlhbGl6ZSIsIlN0cmluZyIsInBhcnNlQXNJbnRlZ2VyOiBTaW5nbGVQYXJzZXJCdWlsZGVyPG51bWJlcj4iLCJpbnQiLCJwYXJzZUludCIsIk1hdGgiLCJyb3VuZCIsInBhcnNlQXNJbmRleDogU2luZ2xlUGFyc2VyQnVpbGRlcjxudW1iZXI+IiwicGFyc2VBc0hleDogU2luZ2xlUGFyc2VyQnVpbGRlcjxudW1iZXI+IiwiaGV4IiwidG9TdHJpbmciLCJsZW5ndGgiLCJwYXJzZUFzRmxvYXQ6IFNpbmdsZVBhcnNlckJ1aWxkZXI8bnVtYmVyPiIsImZsb2F0IiwicGFyc2VGbG9hdCIsInBhcnNlQXNCb29sZWFuOiBTaW5nbGVQYXJzZXJCdWlsZGVyPGJvb2xlYW4+IiwidG9Mb3dlckNhc2UiLCJjb21wYXJlRGF0ZXMiLCJ2YWx1ZU9mIiwicGFyc2VBc1RpbWVzdGFtcDogU2luZ2xlUGFyc2VyQnVpbGRlcjxEYXRlPiIsIm1zIiwiRGF0ZSIsInBhcnNlQXNJc29EYXRlVGltZTogU2luZ2xlUGFyc2VyQnVpbGRlcjxEYXRlPiIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInBhcnNlQXNJc29EYXRlOiBTaW5nbGVQYXJzZXJCdWlsZGVyPERhdGU+Iiwic2xpY2UiLCJwYXJzZUFzU3RyaW5nRW51bSIsInZhbGlkVmFsdWVzIiwicGFyc2VBc1N0cmluZ0xpdGVyYWwiLCJhc0NvbnN0IiwiaW5jbHVkZXMiLCJwYXJzZUFzTnVtYmVyTGl0ZXJhbCIsInBhcnNlQXNKc29uIiwidmFsaWRhdG9yIiwib2JqIiwiSlNPTiIsInZhbGlkYXRlIiwiaXNzdWVzIiwic3RyaW5naWZ5IiwicGFyc2VBc0FycmF5T2YiLCJpdGVtUGFyc2VyIiwic2VwYXJhdG9yIiwiaXRlbUVxIiwiZW5jb2RlZFNlcGFyYXRvciIsImVuY29kZVVSSUNvbXBvbmVudCIsInNwbGl0IiwibWFwIiwiaXRlbSIsImluZGV4IiwicmVwbGFjZUFsbCIsImZpbHRlciIsInZhbHVlcyIsImpvaW4iLCJldmVyeSIsInBhcnNlQXNOYXRpdmVBcnJheU9mIiwicGFyc2VkIiwiZmxhdE1hcCIsInNlcmlhbGl6ZWQiLCJjcmVhdGVTZXJpYWxpemVyIiwiY2xlYXJPbkRlZmF1bHQiLCJwcm9jZXNzVXJsU2VhcmNoUGFyYW1zIiwiYXJnMUJhc2VPclZhbHVlcyIsImFyZzJ2YWx1ZXMiLCJiYXNlIiwic2VhcmNoIiwiaXNCYXNlIiwic3BsaXRCYXNlIiwiZGVsZXRlIiwicmVuZGVyUXVlcnlTdHJpbmciLCJpc01hdGNoaW5nRGVmYXVsdCIsIndyaXRlIiwicGF0aCIsIm9yaWdpbiIsInBhdGhuYW1lIiwiY3JlYXRlU3RhbmRhcmRTY2hlbWFWMSIsInBhcnRpYWxPdXRwdXQiLCJsb2FkIiwidmVyc2lvbiIsInZlbmRvciIsIm1lc3NhZ2UiLCJlbWl0dGVyOiBFbWl0dGVyPEV2ZW50TWFwPiIsImNyZWF0ZUVtaXR0ZXIiLCJkZWZhdWx0VXJsS2V5cyIsInVzZVF1ZXJ5U3RhdGVzIiwia2V5TWFwIiwiaG9va0lkIiwidXNlSWQiLCJkZWZhdWx0T3B0aW9ucyIsInVzZUFkYXB0ZXJEZWZhdWx0T3B0aW9ucyIsInVzZUFkYXB0ZXJQcm9jZXNzVXJsU2VhcmNoUGFyYW1zIiwiaGlzdG9yeSIsInNjcm9sbCIsInNoYWxsb3ciLCJ0aHJvdHRsZU1zIiwiZGVmYXVsdFJhdGVMaW1pdCIsInRpbWVNcyIsImxpbWl0VXJsVXBkYXRlcyIsInN0YXJ0VHJhbnNpdGlvbiIsInN0YXJ0VHJhbnNpdGlvbiQxIiwic3RhdGVLZXlzIiwia2V5cyIsInJlc29sdmVkVXJsS2V5cyIsInVzZU1lbW8iLCJmcm9tRW50cmllcyIsImFkYXB0ZXIiLCJ1c2VBZGFwdGVyIiwiaW5pdGlhbFNlYXJjaFBhcmFtcyIsInF1ZXJ5UmVmIiwidXNlUmVmIiwiZGVmYXVsdFZhbHVlcyIsInF1ZXVlZFF1ZXJpZXMiLCJkZWJvdW5jZUNvbnRyb2xsZXIiLCJ1c2VRdWV1ZWRRdWVyaWVzIiwiaW50ZXJuYWxTdGF0ZSIsInNldEludGVybmFsU3RhdGUiLCJ1c2VTdGF0ZSIsInBhcnNlTWFwIiwic3RhdGUiLCJzdGF0ZVJlZiIsImRlYnVnIiwiY3VycmVudCIsImhhc0NoYW5nZWQiLCJ1c2VFZmZlY3QiLCJoYW5kbGVycyIsInJlZHVjZSIsImhhbmRsZXJzJDEiLCJzdGF0ZUtleSIsImN1cnJlbnRTdGF0ZSIsIm5leHRWYWx1ZSIsImN1cnJlbnRWYWx1ZSIsImlzIiwiZW1pdHRlciIsIm9uIiwib2ZmIiwidXBkYXRlIiwidXNlQ2FsbGJhY2siLCJzdGF0ZVVwZGF0ZXIiLCJjYWxsT3B0aW9ucyIsIm51bGxNYXAiLCJuZXdTdGF0ZTogUGFydGlhbDxOdWxsYWJsZTxLZXlNYXA+PiIsImFwcGx5RGVmYXVsdFZhbHVlcyIsIm5ld1N0YXRlIiwicmV0dXJuZWRQcm9taXNlOiBQcm9taXNlPFVSTFNlYXJjaFBhcmFtcz4gfCB1bmRlZmluZWQiLCJtYXhEZWJvdW5jZVRpbWUiLCJkb0ZsdXNoIiwiZGVib3VuY2VBYm9ydHM6IEFycmF5PFxuICAgICAgICAocDogUHJvbWlzZTxVUkxTZWFyY2hQYXJhbXM+KSA9PiBQcm9taXNlPFVSTFNlYXJjaFBhcmFtcz5cbiAgICAgID4iLCJlbWl0IiwidXBkYXRlOiBVcGRhdGVRdWV1ZVB1c2hBcmdzIiwibWV0aG9kIiwiY29uc29sZSIsImRlYm91bmNlZFByb21pc2UiLCJwdXNoIiwicmV0dXJuZWRQcm9taXNlIiwiZGVib3VuY2VBYm9ydHMiLCJhYm9ydCIsImdsb2JhbFRocm90dGxlUXVldWUiLCJnbG9iYWxQcm9taXNlIiwicHJldmlvdXMiLCJmbiIsImZsdXNoIiwiZ2V0UGVuZGluZ1Byb21pc2UiLCJ1cGRhdGVVcmwiLCJnZXRTZWFyY2hQYXJhbXNTbmFwc2hvdCIsInJhdGVMaW1pdEZhY3RvciIsImNhY2hlZFF1ZXJ5IiwiY2FjaGVkU3RhdGUiLCJvdXQiLCJxdWV1ZWRRdWVyeSIsImZhbGxiYWNrVmFsdWUiLCJjb21wYXJlUXVlcnkiLCJrZXlNYXBLZXlzIiwiY2FjaGVkU3RhdGVLZXlzIiwic29tZSIsImRlZmF1bHRzIiwidXNlUXVlcnlTdGF0ZSIsImhvb2tPcHRpb25zIiwic2V0U3RhdGUiLCJ4Iiwib2xkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nuqs/dist/patch-history-KajkFXHX.js":
/*!**********************************************************!*\
  !*** ./node_modules/nuqs/dist/patch-history-KajkFXHX.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i: () => (/* binding */ shouldPatchHistory),\n/* harmony export */   n: () => (/* binding */ markHistoryAsPatched),\n/* harmony export */   r: () => (/* binding */ patchHistory),\n/* harmony export */   t: () => (/* binding */ historyUpdateMarker)\n/* harmony export */ });\n/* harmony import */ var _context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./context-DRdo5A2P.js */ \"(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js\");\n/* harmony import */ var _reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./reset-t0vXtVbG.js */ \"(ssr)/./node_modules/nuqs/dist/reset-t0vXtVbG.js\");\n\n\n\n//#region src/adapters/lib/patch-history.ts\nconst historyUpdateMarker = \"__nuqs__\";\nfunction getSearchParams(url) {\n\tif (url instanceof URL) return url.searchParams;\n\tif (url.startsWith(\"?\")) return new URLSearchParams(url);\n\ttry {\n\t\treturn new URL(url, location.origin).searchParams;\n\t} catch {\n\t\treturn new URLSearchParams(url);\n\t}\n}\nfunction shouldPatchHistory(adapter) {\n\tif (typeof history === \"undefined\") return false;\n\tif (history.nuqs?.version && history.nuqs.version !== \"2.8.8\") {\n\t\tconsole.error((0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_0__.s)(409), history.nuqs.version, `2.8.8`, adapter);\n\t\treturn false;\n\t}\n\tif (history.nuqs?.adapters?.includes(adapter)) return false;\n\treturn true;\n}\nfunction markHistoryAsPatched(adapter) {\n\thistory.nuqs = history.nuqs ?? {\n\t\tversion: \"2.8.8\",\n\t\tadapters: []\n\t};\n\thistory.nuqs.adapters.push(adapter);\n}\nfunction patchHistory(emitter, adapter) {\n\tif (!shouldPatchHistory(adapter)) return;\n\tlet lastSearchSeen = typeof location === \"object\" ? location.search : \"\";\n\temitter.on(\"update\", (search) => {\n\t\tconst searchString = search.toString();\n\t\tlastSearchSeen = searchString.length ? \"?\" + searchString : \"\";\n\t});\n\twindow.addEventListener(\"popstate\", () => {\n\t\tlastSearchSeen = location.search;\n\t\t(0,_reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_1__.t)();\n\t});\n\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_0__.c)(\"[nuqs %s] Patching history (%s adapter)\", \"2.8.8\", adapter);\n\tfunction sync(url) {\n\t\t(0,_reset_t0vXtVbG_js__WEBPACK_IMPORTED_MODULE_1__.r)();\n\t\ttry {\n\t\t\tif (new URL(url, location.origin).search === lastSearchSeen) return;\n\t\t} catch {}\n\t\ttry {\n\t\t\temitter.emit(\"update\", getSearchParams(url));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n\tconst originalPushState = history.pushState;\n\tconst originalReplaceState = history.replaceState;\n\thistory.pushState = function nuqs_pushState(state, marker, url) {\n\t\toriginalPushState.call(history, state, \"\", url);\n\t\tif (url && marker !== historyUpdateMarker) sync(url);\n\t};\n\thistory.replaceState = function nuqs_replaceState(state, marker, url) {\n\t\toriginalReplaceState.call(history, state, \"\", url);\n\t\tif (url && marker !== historyUpdateMarker) sync(url);\n\t};\n\tmarkHistoryAsPatched(adapter);\n}\n\n//#endregion\n\n//# sourceMappingURL=patch-history-KajkFXHX.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L3BhdGNoLWhpc3RvcnktS2Fqa0ZYSFguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStEO0FBQ2tCOztBQUVqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdURBQUs7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFLHFEQUFXO0FBQ2IsRUFBRTtBQUNGLENBQUMsdURBQUs7QUFDTjtBQUNBLEVBQUUscURBQW1CO0FBQ3JCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkc7QUFDM0ciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGNlbC1oZWxwLW1lLy4vbm9kZV9tb2R1bGVzL251cXMvZGlzdC9wYXRjaC1oaXN0b3J5LUthamtGWEhYLmpzP2JjNTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYyBhcyBkZWJ1ZywgcyBhcyBlcnJvciB9IGZyb20gXCIuL2NvbnRleHQtRFJkbzVBMlAuanNcIjtcbmltcG9ydCB7IHIgYXMgc3BpblF1ZXVlUmVzZXRNdXRleCwgdCBhcyByZXNldFF1ZXVlcyB9IGZyb20gXCIuL3Jlc2V0LXQwdlh0VmJHLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMvbGliL3BhdGNoLWhpc3RvcnkudHNcbmNvbnN0IGhpc3RvcnlVcGRhdGVNYXJrZXIgPSBcIl9fbnVxc19fXCI7XG5mdW5jdGlvbiBnZXRTZWFyY2hQYXJhbXModXJsKSB7XG5cdGlmICh1cmwgaW5zdGFuY2VvZiBVUkwpIHJldHVybiB1cmwuc2VhcmNoUGFyYW1zO1xuXHRpZiAodXJsLnN0YXJ0c1dpdGgoXCI/XCIpKSByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyh1cmwpO1xuXHR0cnkge1xuXHRcdHJldHVybiBuZXcgVVJMKHVybCwgbG9jYXRpb24ub3JpZ2luKS5zZWFyY2hQYXJhbXM7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybCk7XG5cdH1cbn1cbmZ1bmN0aW9uIHNob3VsZFBhdGNoSGlzdG9yeShhZGFwdGVyKSB7XG5cdGlmICh0eXBlb2YgaGlzdG9yeSA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGZhbHNlO1xuXHRpZiAoaGlzdG9yeS5udXFzPy52ZXJzaW9uICYmIGhpc3RvcnkubnVxcy52ZXJzaW9uICE9PSBcIjIuOC44XCIpIHtcblx0XHRjb25zb2xlLmVycm9yKGVycm9yKDQwOSksIGhpc3RvcnkubnVxcy52ZXJzaW9uLCBgMi44LjhgLCBhZGFwdGVyKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKGhpc3RvcnkubnVxcz8uYWRhcHRlcnM/LmluY2x1ZGVzKGFkYXB0ZXIpKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gbWFya0hpc3RvcnlBc1BhdGNoZWQoYWRhcHRlcikge1xuXHRoaXN0b3J5Lm51cXMgPSBoaXN0b3J5Lm51cXMgPz8ge1xuXHRcdHZlcnNpb246IFwiMi44LjhcIixcblx0XHRhZGFwdGVyczogW11cblx0fTtcblx0aGlzdG9yeS5udXFzLmFkYXB0ZXJzLnB1c2goYWRhcHRlcik7XG59XG5mdW5jdGlvbiBwYXRjaEhpc3RvcnkoZW1pdHRlciwgYWRhcHRlcikge1xuXHRpZiAoIXNob3VsZFBhdGNoSGlzdG9yeShhZGFwdGVyKSkgcmV0dXJuO1xuXHRsZXQgbGFzdFNlYXJjaFNlZW4gPSB0eXBlb2YgbG9jYXRpb24gPT09IFwib2JqZWN0XCIgPyBsb2NhdGlvbi5zZWFyY2ggOiBcIlwiO1xuXHRlbWl0dGVyLm9uKFwidXBkYXRlXCIsIChzZWFyY2gpID0+IHtcblx0XHRjb25zdCBzZWFyY2hTdHJpbmcgPSBzZWFyY2gudG9TdHJpbmcoKTtcblx0XHRsYXN0U2VhcmNoU2VlbiA9IHNlYXJjaFN0cmluZy5sZW5ndGggPyBcIj9cIiArIHNlYXJjaFN0cmluZyA6IFwiXCI7XG5cdH0pO1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsICgpID0+IHtcblx0XHRsYXN0U2VhcmNoU2VlbiA9IGxvY2F0aW9uLnNlYXJjaDtcblx0XHRyZXNldFF1ZXVlcygpO1xuXHR9KTtcblx0ZGVidWcoXCJbbnVxcyAlc10gUGF0Y2hpbmcgaGlzdG9yeSAoJXMgYWRhcHRlcilcIiwgXCIyLjguOFwiLCBhZGFwdGVyKTtcblx0ZnVuY3Rpb24gc3luYyh1cmwpIHtcblx0XHRzcGluUXVldWVSZXNldE11dGV4KCk7XG5cdFx0dHJ5IHtcblx0XHRcdGlmIChuZXcgVVJMKHVybCwgbG9jYXRpb24ub3JpZ2luKS5zZWFyY2ggPT09IGxhc3RTZWFyY2hTZWVuKSByZXR1cm47XG5cdFx0fSBjYXRjaCB7fVxuXHRcdHRyeSB7XG5cdFx0XHRlbWl0dGVyLmVtaXQoXCJ1cGRhdGVcIiwgZ2V0U2VhcmNoUGFyYW1zKHVybCkpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IG9yaWdpbmFsUHVzaFN0YXRlID0gaGlzdG9yeS5wdXNoU3RhdGU7XG5cdGNvbnN0IG9yaWdpbmFsUmVwbGFjZVN0YXRlID0gaGlzdG9yeS5yZXBsYWNlU3RhdGU7XG5cdGhpc3RvcnkucHVzaFN0YXRlID0gZnVuY3Rpb24gbnVxc19wdXNoU3RhdGUoc3RhdGUsIG1hcmtlciwgdXJsKSB7XG5cdFx0b3JpZ2luYWxQdXNoU3RhdGUuY2FsbChoaXN0b3J5LCBzdGF0ZSwgXCJcIiwgdXJsKTtcblx0XHRpZiAodXJsICYmIG1hcmtlciAhPT0gaGlzdG9yeVVwZGF0ZU1hcmtlcikgc3luYyh1cmwpO1xuXHR9O1xuXHRoaXN0b3J5LnJlcGxhY2VTdGF0ZSA9IGZ1bmN0aW9uIG51cXNfcmVwbGFjZVN0YXRlKHN0YXRlLCBtYXJrZXIsIHVybCkge1xuXHRcdG9yaWdpbmFsUmVwbGFjZVN0YXRlLmNhbGwoaGlzdG9yeSwgc3RhdGUsIFwiXCIsIHVybCk7XG5cdFx0aWYgKHVybCAmJiBtYXJrZXIgIT09IGhpc3RvcnlVcGRhdGVNYXJrZXIpIHN5bmModXJsKTtcblx0fTtcblx0bWFya0hpc3RvcnlBc1BhdGNoZWQoYWRhcHRlcik7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2hvdWxkUGF0Y2hIaXN0b3J5IGFzIGksIG1hcmtIaXN0b3J5QXNQYXRjaGVkIGFzIG4sIHBhdGNoSGlzdG9yeSBhcyByLCBoaXN0b3J5VXBkYXRlTWFya2VyIGFzIHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhdGNoLWhpc3RvcnktS2Fqa0ZYSFguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/patch-history-KajkFXHX.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/nuqs/dist/reset-t0vXtVbG.js":
/*!**************************************************!*\
  !*** ./node_modules/nuqs/dist/reset-t0vXtVbG.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   n: () => (/* binding */ setQueueResetMutex),\n/* harmony export */   r: () => (/* binding */ spinQueueResetMutex),\n/* harmony export */   t: () => (/* binding */ resetQueues)\n/* harmony export */ });\n/* harmony import */ var _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./debounce-BI0MC054.js */ \"(ssr)/./node_modules/nuqs/dist/debounce-BI0MC054.js\");\n/* harmony import */ var _context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./context-DRdo5A2P.js */ \"(ssr)/./node_modules/nuqs/dist/context-DRdo5A2P.js\");\n\n\n\n//#region src/lib/queues/reset.ts\nlet mutex = 0;\nfunction setQueueResetMutex(value = 1) {\n\tmutex = value;\n}\nfunction spinQueueResetMutex(onReset = resetQueues) {\n\tmutex = Math.max(0, mutex - 1);\n\tif (mutex > 0) return;\n\tonReset();\n}\nfunction resetQueues() {\n\t(0,_context_DRdo5A2P_js__WEBPACK_IMPORTED_MODULE_0__.c)(\"[nuqs] Aborting queues\");\n\t_debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.t.abortAll();\n\t_debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.n.abort().forEach((key) => _debounce_BI0MC054_js__WEBPACK_IMPORTED_MODULE_1__.t.queuedQuerySync.emit(key));\n}\n\n//#endregion\n\n//# sourceMappingURL=reset-t0vXtVbG.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbnVxcy9kaXN0L3Jlc2V0LXQwdlh0VmJHLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJGO0FBQ3hDOztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx1REFBSztBQUNOLENBQUMsb0RBQWtCO0FBQ25CLENBQUMsb0RBQW1CLDBCQUEwQixvREFBa0I7QUFDaEU7O0FBRUE7QUFDK0U7QUFDL0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGNlbC1oZWxwLW1lLy4vbm9kZV9tb2R1bGVzL251cXMvZGlzdC9yZXNldC10MHZYdFZiRy5qcz82OGMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG4gYXMgZ2xvYmFsVGhyb3R0bGVRdWV1ZSwgdCBhcyBkZWJvdW5jZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9kZWJvdW5jZS1CSTBNQzA1NC5qc1wiO1xuaW1wb3J0IHsgYyBhcyBkZWJ1ZyB9IGZyb20gXCIuL2NvbnRleHQtRFJkbzVBMlAuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9saWIvcXVldWVzL3Jlc2V0LnRzXG5sZXQgbXV0ZXggPSAwO1xuZnVuY3Rpb24gc2V0UXVldWVSZXNldE11dGV4KHZhbHVlID0gMSkge1xuXHRtdXRleCA9IHZhbHVlO1xufVxuZnVuY3Rpb24gc3BpblF1ZXVlUmVzZXRNdXRleChvblJlc2V0ID0gcmVzZXRRdWV1ZXMpIHtcblx0bXV0ZXggPSBNYXRoLm1heCgwLCBtdXRleCAtIDEpO1xuXHRpZiAobXV0ZXggPiAwKSByZXR1cm47XG5cdG9uUmVzZXQoKTtcbn1cbmZ1bmN0aW9uIHJlc2V0UXVldWVzKCkge1xuXHRkZWJ1ZyhcIltudXFzXSBBYm9ydGluZyBxdWV1ZXNcIik7XG5cdGRlYm91bmNlQ29udHJvbGxlci5hYm9ydEFsbCgpO1xuXHRnbG9iYWxUaHJvdHRsZVF1ZXVlLmFib3J0KCkuZm9yRWFjaCgoa2V5KSA9PiBkZWJvdW5jZUNvbnRyb2xsZXIucXVldWVkUXVlcnlTeW5jLmVtaXQoa2V5KSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2V0UXVldWVSZXNldE11dGV4IGFzIG4sIHNwaW5RdWV1ZVJlc2V0TXV0ZXggYXMgciwgcmVzZXRRdWV1ZXMgYXMgdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzZXQtdDB2WHRWYkcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/nuqs/dist/reset-t0vXtVbG.js\n");

/***/ })

};
;